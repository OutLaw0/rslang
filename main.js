(()=>{"use strict";var t,e={481:(t,e,s)=>{const n=()=>'\n\n<div class="main__container">\n<div class="article main__article">\n<div class="bubbles-top img-x3">\n<img src="./assets/bubbles.svg" alt="">\n</div>\n<div class="skat img-x15">\n    <img src="./assets/skat.svg" alt="">\n  </div>\n<h2 class="article__title">Погрузись в <span class="accent">океан</span> знаний вместе с RS Lang</h2>\n<p class="article__text">Добро пожаловать на образовательную игровую площадку, которая помогает детям выучить английский язык.\n  Также, у нас есть миниигры игры, которые помогают улучшить навыки мышления у детей.</p>\n  <a href="/textbook" class="btn btn-article" data-btn="textbook"> Начать </a>\n  <div class="article__bottom-nav"><button class="btn btn-bottom-nav advantages"> О приложении <img class="advantages" src="./assets/icon-right.svg" alt=""></button></div>\n  </div>\n  <div class="bubbles img-x5">\n  <img src="./assets/bubbles.svg" alt="">\n</div>\n<div class="whale img-x20">\n\n    <img src="./assets/whale.svg" alt="">\n  </div>\n  </div>\n  \x3c!--<div class="main__container advantages-screen">\n  <h2 class="article__title">Наши преимущества </h2>\n  </div>\n  <div class="main__container about-us-screen">\n  <h2 class="article__title">О нас </h2>\n  </div>--\x3e\n\n',i=()=>'\n<div class="main__container advantages">\n  <div class="article main__article">\n    <div class="bubbles-top img-x3">\n      <img src="./assets/bubbles.svg" alt="">\n    </div>\n    <div class="skat img-x15">\n      <img src="./assets/skat.svg" alt="">\n    </div>\n    <h2 class="article__title">О приложении </h2>\n    <div class="advantages__content">\n      <div class="advantages__item">\n        <img src="assets/textbook-img.jpg" alt="textbook-img">\n        <h4 class="advantages-title">Электронный учебник</h4>\n        <p class="advantages-text">База из более 3500 слов. Шесть уровней сложности. Удобная навигация. Запоминание\n          прогресса.</p>\n      </div>\n      <div class="advantages__item">\n        <h4 class="advantages-title second">Обучающие игры</h4>\n        <p class="advantages-text second">Игра "Аудиовызов" - поможет лучше воспринимать английский язык на слух.\n          Игра "Спринт" - развивает реакцию и интуитивное понимание языка.</p>\n        <img class="second" src="assets/games-img.jpg" alt="games-img">\n      </div>\n      <div class="advantages__item">\n        <img src="assets/stat-img.jpg" alt="/stat-img">\n        <h4 class="advantages-title">Статистика</h4>\n        <p class="advantages-text">Мы собираем информацию о вашем прогрессе по дням и за весь период обучения!</p>\n      </div>\n    </div>\n    <div class="article__bottom-nav bottom-nav">\n      <span class="bottom-nav__back"> <img class="main" src="./assets/icon-left.svg" alt=""></span>\n      <button class="btn btn-bottom-nav team"> Разработчики <img class="team" src="./assets/icon-right.svg"\n          alt=""></button>\n    </div>\n  </div>\n  <div class="bubbles img-x5">\n    <img src="./assets/bubbles.svg" alt="">\n  </div>\n  <div class="whale img-x20">\n    <img src="./assets/whale.svg" alt="">\n  </div>\n',a=()=>'\n<div class="main__container advantages">\n<div class="article main__article">\n<div class="bubbles-top img-x3">\n<img src="./assets/bubbles.svg" alt="">\n</div>\n<div class="skat img-x15">\n    <img src="./assets/skat.svg" alt="">\n  </div>\n  <h2 class="article__title">Разработчики </h2>\n<div class="advantages__content">\n                            <div class="advantages__item">\n                                <img class="avatar" src="assets/ddd-fx-avatar.jpg" alt="ddd-fx-avatar">\n                                <h4 class="team__title"><a href="https://github.com/ddd-fx" class="github-logo"><img src="assets/github-logo.png" alt="github-logo"></a>Дмитрий</h4>\n                                <ul class="team__list" >\n                                <li class="team__list-item">Электронный учебник</li>\n                                <li class="team__list-item">Список слов</li>\n                                <li class="team__list-item">Игра Спринт</li>\n                              </ul>\n                            </div>\n                            <div class="advantages__item">\n                            <img class="avatar" src="assets/orla-avatar.jpg" alt="orla-avatar">\n                            <h4 class="team__title"><a href="https://github.com/OutLaw0" class="github-logo"><img src="assets/github-logo.png" alt="github-logo"></a>Ольга</h4>\n                            <ul class="team__list" >\n                            <li class="team__list-item">Игра Аудиовызов</li>\n                            <li class="team__list-item">Игра Спринт</li>\n                            <li class="team__list-item">Страница игр</li>\n                          </ul>\n                        </div>\n                            <div class="advantages__item">\n                            <img class="avatar outlaw" src="assets/outlaw-avatar.jpg" alt="outlaw-avatar">\n                            <h4 class="team__title"><a href="https://github.com/orla90" class="github-logo"><img src="assets/github-logo.png" alt="github-logo"></a>Валентин</h4>\n                            <ul class="team__list" >\n                            <li class="team__list-item">Главная страница</li>\n                            <li class="team__list-item">Авторизация </li>\n                            <li class="team__list-item">Статистика</li>\n                          </ul>\n                        </div>\n                    </div>\n  <div class="article__bottom-nav bottom-nav">\n  <span class="bottom-nav__back"> <img class="advantages" src="./assets/icon-left.svg" alt=""></span>\n  <button class="btn btn-bottom-nav main"> Главная <img class="main" src="./assets/icon-right.svg" alt=""></button></div>\n  </div>\n  <div class="bubbles img-x5">\n  <img src="./assets/bubbles.svg" alt="">\n</div>\n<div class="whale img-x20">\n    <img src="./assets/whale.svg" alt="">\n  </div>\n',r=(t,e)=>{const s=document.createElement(t);return e&&(Array.isArray(e)?s.classList.add(...e):s.classList.add(e)),s},o=t=>document.getElementsByClassName(t)[0],c=t=>{const e=o("modal");e.innerHTML=t,e.style.opacity="1",e.style.display="block",setTimeout((()=>{e.style.opacity="0",e.style.display="none"}),3e3)},d=()=>(new Date).toLocaleDateString().replace(/\./g,"-"),l="https://react-rslang-be-13.herokuapp.com/",h={userEmail:"",userName:"User name",avatarURL:"",token:"",refreshToken:"",expireOn:0,currPage:0,currGroup:0,currWord:"",userId:""},u="default-user",g={level:0,wordsPerPage:5,gamePage:0,textbookPage:0,wordCount:0,soundingWordId:"",learnedWords:[],unlearnedWords:[],startFromTextbook:!1,wordOfShakedArrCount:0,shakedWordsArray:[]},p={level:0,startFromTextbook:!1},m={dayData:{audiochallenge:{newWordsPerDay:0,learnedWordsPerDay:0,longestSeries:0,correctAnswers:0,incorrectAnswers:0},sprint:{newWordsPerDay:0,learnedWordsPerDay:0,longestSeries:0,correctAnswers:0,incorrectAnswers:0}},allDaysData:{labels:[d()],learnedWords:[0],newWords:[0]}};var v=function(t,e,s,n){return new(s||(s=Promise))((function(i,a){function r(t){try{c(n.next(t))}catch(t){a(t)}}function o(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,o)}c((n=n.apply(t,e||[])).next())}))};const w=t=>1e3*+JSON.parse(atob(t.split(".")[1])).exp,_=t=>!!t&&Date.now()>t;class b{}b.createLocalKey=t=>`rsl13-${t}`,b.loadData=t=>{return e=void 0,s=void 0,i=function*(){return fetch(t).then((t=>t.json()))},new((n=void 0)||(n=Promise))((function(t,a){function r(t){try{c(i.next(t))}catch(t){a(t)}}function o(t){try{c(i.throw(t))}catch(t){a(t)}}function c(e){var s;e.done?t(e.value):(s=e.value,s instanceof n?s:new n((function(t){t(s)}))).then(r,o)}c((i=i.apply(e,s||[])).next())}));var e,s,n,i},b.setLSData=(t,e)=>{const s=JSON.stringify(e);window.localStorage.setItem(b.createLocalKey(t),s)},b.removeLSData=t=>{window.localStorage.removeItem(b.createLocalKey(t))},b.getLSData=t=>{const e=window.localStorage.getItem(b.createLocalKey(t));if(e)return JSON.parse(e);const s=window.localStorage.getItem(b.createLocalKey(u));return s?JSON.parse(s):h},b.initLS=t=>{const e=b.getLSData(b.createLocalKey(t));b.currUserID=t,b.currUserSettings=e,t===u&&JSON.stringify(e)===JSON.stringify(h)&&b.setLSData(u,h),""!==b.currUserSettings.token&&(b.isAuth=!0)},b.saveToken=(t,e)=>{b.currUserSettings.token=t,b.currUserSettings.refreshToken=e,b.currUserSettings.expireOn=w(t)-3e5,b.setLSData(u,b.currUserSettings)},b.currUserID="",b.isAuth=!1,b.currUserSettings=h;var f=s(682);const k=(0,f.lX)(),x=class{constructor(t){this.render=()=>{const t=b.isAuth;this.nav.innerHTML=(t=>`\n<a href="/"><h1>RS Lang</h1></a>\n<nav class="nav">\n<ul class="nav__list">\n<li>\n<a href="/"><button class="btn" data-btn="main"> Главная </button></a>\n</li>\n<li>\n  <a href="/textbook"><button class="btn js-menu-textbook-btn" data-btn="textbook"> Учебник </button></a>\n</li>\n<li>\n  <a href="/games" ><button class="btn" data-btn="games"> Миниигры </button></a>\n</li>\n<li>\n  <a href="/stat"><button  class="btn" data-btn="stat"> Статистика </button></a>\n</li>\n<li>\n${t?'<a href="/logout"><button class="btn btn-logout " data-btn="login"> Выйти </button></a>':'<a href="/login"><button class="btn btn-login" data-btn="login"> Войти </button></a>'}\n</ul>\n</nav>\n\x3c!--<div class="shadow"></div>--\x3e\n<div class="hamburger" id="hamburger-1">\n<span class="line"></span> \n<span class="line"></span> \n<span class="line"></span>\n</div>\n`)(t),this.parent.innerHTML="",this.parent.append(this.nav)},this.bind=()=>{this.nav.addEventListener("click",(t=>{t.preventDefault(),"hamburger"!==t.target.classList[0]&&"line"!==t.target.classList[0]||this.openNav();const e=t.target.closest("a");if(e){const t=e.pathname;k.push(t)}}))},this.openNav=()=>{o("hamburger").classList.toggle("is-active"),o("nav").classList.toggle("is-active")},this.closeNav=t=>{const e=o("hamburger");if(e){const s=o("nav"),n=t.target,i=n.classList.contains("nav__list"),a=n===e||e.contains(n);!s.classList.contains("is-active")||a||i||(e.classList.remove("is-active"),s.classList.remove("is-active"))}},this.nav=r("div",["wrapper","header__wrapper"]),this.parent=t,this.bind()}};var y=function(t,e,s,n){return new(s||(s=Promise))((function(i,a){function r(t){try{c(n.next(t))}catch(t){a(t)}}function o(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,o)}c((n=n.apply(t,e||[])).next())}))};const B=()=>y(void 0,void 0,void 0,(function*(){const{userId:t,refreshToken:e,expireOn:s}=b.currUserSettings;if(_(s)){if(!_(w(e))){const s=yield((t,e)=>v(void 0,void 0,void 0,(function*(){try{const s=yield fetch(`${l}users/${t}/tokens`,{method:"GET",headers:{Authorization:"Bearer "+e,Accept:"application/json","Content-Type":"application/json"}});return yield yield s.json()}catch(t){console.error(t)}})))(t,e);return b.saveToken(s.token,s.refreshToken),!0}b.isAuth=!1,b.setLSData(u,h),window.location.replace("/login")}return!1}));class L{constructor(){this.mount=()=>y(this,void 0,void 0,(function*(){b.initLS(u),b.isAuth&&(yield B())}))}}const W=(t,e)=>y(void 0,void 0,void 0,(function*(){return(yield B())&&(e.headers.Authorization=`Bearer ${b.currUserSettings.token}`),fetch(t,e)}));var C=s(33);var S,T;!function(t){t.learned="0",t.difficult="1",t.new="2"}(S||(S={})),function(t){t[t.audioChallenge=0]="audioChallenge",t[t.sprint=1]="sprint"}(T||(T={}));var A=s(527),M=function(t,e,s,n){return new(s||(s=Promise))((function(i,a){function r(t){try{c(n.next(t))}catch(t){a(t)}}function o(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,o)}c((n=n.apply(t,e||[])).next())}))};class E extends A.TypedEmitter{constructor(){super(),this.getTextBookList=()=>M(this,void 0,void 0,(function*(){const t=`words?group=${b.currUserSettings.currGroup}&page=${b.currUserSettings.currPage}`,e=yield fetch(l+t).catch();this.wordsChunk=yield e.json(),b.currUserSettings.userId&&(yield this.updateAllCollections(),console.log("dif",this.difficultWords),console.log("learned",this.learnedWords),console.log("new",this.newWords)),this.emit("getTextBookList")})),this.getWordCardData=(t,e)=>{const s=e?this.difficultWords.filter((e=>e.id===t))[0]:this.wordsChunk.filter((e=>e.id===t))[0];this.emit("getWordCardData",s)},this.getAggregatedWordsForCurrGroup=t=>M(this,void 0,void 0,(function*(){const e=`users/${b.currUserSettings.userId}/aggregatedWords?group=${b.currUserSettings.currGroup}&wordsPerPage=600&filter={"userWord.difficulty":"${t}"}`;yield this.getAggregatedWords(e,t)})),this.getUserDictWords=()=>M(this,void 0,void 0,(function*(){yield this.updateUserWordsCollection(S.difficult),this.emit("getUserDict")})),this.updateUserWordsCollection=t=>M(this,void 0,void 0,(function*(){const e=`users/${b.currUserSettings.userId}/aggregatedWords?wordsPerPage=600&filter={"userWord.difficulty":"${t}"}`;yield this.getAggregatedWords(e,t)})),this.getAggregatedWords=(t,e)=>M(this,void 0,void 0,(function*(){try{const s=yield W(l+t,{method:"GET",headers:this.API_USER_REQ_HEADER}),n=(yield s.json())[0].paginatedResults.slice();e===S.difficult&&(this.difficultWords=this.mapUserWordsID(n)),e===S.learned&&(this.learnedWords=this.mapUserWordsID(n),o("pagination ")&&this.emit("updateMarkedPages")),e===S.new&&(this.newWords=this.mapUserWordsID(n))}catch(t){console.error(t)}})),this.addUserWord=(t,e)=>M(this,void 0,void 0,(function*(){const s=`users/${b.currUserSettings.userId}/words/${e}`;try{yield W(l+s,{method:"POST",headers:this.API_USER_REQ_HEADER,body:JSON.stringify(t)}),t.difficulty===S.learned&&(yield this.updateUserWordsCollection(S.learned)),t.difficulty===S.difficult&&(yield this.updateUserWordsCollection(S.difficult))}catch(t){console.error(t)}})),this.updateUserWord=(t,e,s,n,i)=>M(this,void 0,void 0,(function*(){const a=i?this.getAggregatedUserWordOptionsForNew(t,s):this.getAggregatedUserWordOptions(t,s,n),r=`users/${b.currUserSettings.userId}/words/${t}`;try{yield W(l+r,{method:"PUT",headers:this.API_USER_REQ_HEADER,body:JSON.stringify(a)}),e&&this.emit("removeDifficultWordElem",t),yield this.updateAllCollections()}catch(t){console.error(t)}})),this.getAggregatedUserWordOptions=(t,e,s)=>{if(s){const s=this.newWords.find((e=>e.id===t)).userWord;return s.difficulty=e,s}if(e===S.difficult&&!s){const s=this.learnedWords.find((e=>e.id===t)).userWord;return s.difficulty=e,s}if(e===S.learned&&!s){const s=this.difficultWords.find((e=>e.id===t)).userWord;return s.difficulty=e,s}},this.getAggregatedUserWordOptionsForNew=(t,e)=>{if(e===S.difficult){const e=this.difficultWords.find((e=>e.id===t)).userWord;return e.difficulty=S.new,e}if(e===S.learned){const e=this.learnedWords.find((e=>e.id===t)).userWord;return e.difficulty=S.new,e}},this.API_USER_REQ_HEADER={Authorization:`Bearer ${b.currUserSettings.token}`,Accept:"application/json","Content-Type":"application/json"},this.mapUserWordsID=t=>t.map((t=>{var{_id:e}=t,s=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]])}return s}(t,["_id"]);return Object.assign({id:e},s)})),this.updateAllCollections=()=>M(this,void 0,void 0,(function*(){yield this.getAggregatedWordsForCurrGroup(S.new),yield this.getAggregatedWordsForCurrGroup(S.learned),yield this.getAggregatedWordsForCurrGroup(S.difficult)})),this.getWordsForGames=()=>M(this,void 0,void 0,(function*(){const t=`users/${b.currUserSettings.userId}/aggregatedWords?group=${b.currUserSettings.currGroup}&wordsPerPage=600&filter={"$or":[{"userWord.difficulty":"${S.difficult}"},{"userWord.difficulty":"${S.new}"},{"userWord":null}]}`;try{const e=yield W(l+t,{method:"GET",headers:this.API_USER_REQ_HEADER});return(yield e.json())[0].paginatedResults.slice()}catch(t){console.error(t)}})),this.wordsChunk=[],this.difficultWords=[],this.learnedWords=[],this.newWords=[]}}class D extends A.TypedEmitter{constructor(t,e){super(),this.drawDict=()=>{this.textBookView.textBookViewUtils.createTextBookMain("\n  <div class='textbook-title-wrapper'>\n    <button class='textbook-instructions-btn js-textbook-instructions-btn'>Readme</button>\n    <button class='textbook-title-btn'>Вернуться в учебник</button>\n    <button class='textbook-dictionary js-textbook-dictionary' disabled>Сложные слова</button>\n  </div>\n  <div class='textbook-readme-block hide'>\n    <button class='close-readme-btn'>Зыкрыть</button>\n    <h2 class='instructions'>Руководство</h2>\n  </div>\n  \n  <h2 class='words-title'>Сложные слова:</h2>\n  <div class='textbook-words js-textbook-words'>\n    <section class='words-btns js-words-btns user-words js-user-words'></section>\n    <article class='word-description js-word-description'></article>\n  </div>\n"),this.textBookView.textBookViewUtils.addReadMeListeners(),this.addBackToTextBookListenerBtn(),this.textBookModel.difficultWords.length>0?(this.textBookView.appendWordsBtns(),this.drawUserTextBookElems(),this.textBookView.textBookViewUtils.disableDictBtn(),this.textBookView.textBookViewUtils.checkActiveWordsBtns(b.currUserSettings.currWord=""),this.makeStarBtnActive()):o("words-title").innerHTML+=" вы не добавляли сложные слова"},this.drawUserTextBookElems=()=>{this.createStarBtn(),this.createBinBtn(),this.addDictBtnListener(),this.checkStarBtnActive(),this.onDictPage||this.checkBinBtnActive()},this.createStarBtn=()=>{[...document.getElementsByClassName("words-btns__btn")].forEach((t=>{const e=r("div","word-btn__star");e.innerHTML='<?xml version="1.0" encoding="UTF-8"?>\n<svg class="star-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">\n<path d="M54,5 86,105 1,43H107L22,105"/>\n </svg>',e.addEventListener("click",(t=>{t.stopPropagation();const e=t.currentTarget.firstElementChild,s=e.closest(".words-btns__btn").id;s&&!e.classList.contains("star-svg--active")?(this.emit.call(this.textBookView,"addDifficultWordBtnClicked",s,S.difficult),e.classList.add("star-svg--active")):(this.emit.call(this.textBookView,"deleteDifficultWordBtnClicked",s,S.difficult),e.classList.remove("star-svg--active"))})),t.append(e)}))},this.createBinBtn=()=>{[...document.getElementsByClassName("words-btns__btn")].forEach((t=>{const e=r("div","word-btn__bin");e.innerHTML='<?xml version=\'1.0\' encoding=\'iso-8859-1\'?>\n<svg class="bin-svg" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 463 463" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 463 463">\n  <path d="M375.5,48H295V31.5C295,14.131,280.869,0,263.5,0h-64C182.131,0,168,14.131,168,31.5V48H87.5C65.72,48,48,65.72,48,87.5v24  c0,4.142,3.357,7.5,7.5,7.5H64v288.5c0,10.336,6.71,19.128,16,22.266v9.734c0,12.958,10.542,23.5,23.5,23.5h256  c12.958,0,23.5-10.542,23.5-23.5v-9.734c9.29-3.138,16-11.93,16-22.266V119h8.5c4.143,0,7.5-3.358,7.5-7.5v-24  C415,65.72,397.28,48,375.5,48z M183,31.5c0-9.098,7.402-16.5,16.5-16.5h64c9.098,0,16.5,7.402,16.5,16.5V48h-97V31.5z M79,159.5  c0-4.687,3.813-8.5,8.5-8.5s8.5,3.813,8.5,8.5V416h-8.5c-4.687,0-8.5-3.813-8.5-8.5V159.5z M359.5,448h-256  c-4.687,0-8.5-3.813-8.5-8.5V431h273v8.5C368,444.187,364.187,448,359.5,448z M168,416h-17V159.5c0-4.687,3.813-8.5,8.5-8.5  s8.5,3.813,8.5,8.5V416z M240,416h-17V159.5c0-4.687,3.813-8.5,8.5-8.5s8.5,3.813,8.5,8.5V416z M312,416h-17V159.5  c0-4.687,3.813-8.5,8.5-8.5s8.5,3.813,8.5,8.5V416z M384,407.5c0,4.687-3.813,8.5-8.5,8.5H367V159.5c0-4.687,3.813-8.5,8.5-8.5  s8.5,3.813,8.5,8.5V407.5z M384,137.597c-2.638-1.027-5.503-1.597-8.5-1.597c-12.958,0-23.5,10.542-23.5,23.5V416h-25V159.5  c0-12.958-10.542-23.5-23.5-23.5S280,146.542,280,159.5V416h-25V159.5c0-12.958-10.542-23.5-23.5-23.5S208,146.542,208,159.5V416  h-25V159.5c0-12.958-10.542-23.5-23.5-23.5S136,146.542,136,159.5V416h-25V159.5c0-12.958-10.542-23.5-23.5-23.5  c-2.997,0-5.862,0.57-8.5,1.597V119h305V137.597z M400,104H63V87.5C63,73.991,73.99,63,87.5,63h288c13.51,0,24.5,10.991,24.5,24.5  V104z"/>\n</svg>',e.addEventListener("click",(t=>{t.stopPropagation();const e=t.currentTarget.firstElementChild,s=e.closest(".words-btns__btn").id;s&&!e.classList.contains("bin-svg--active")?(this.emit.call(this.textBookView,"addLearnedWordBtnClicked",s,S.learned),e.classList.add("bin-svg--active")):(this.emit.call(this.textBookView,"deleteLearnedWordBtnClicked",s,S.learned),e.classList.remove("bin-svg--active"))})),t.append(e)}))},this.removeDictElem=t=>{document.getElementById(t).remove()},this.addDictBtnListener=()=>{const t=o("js-textbook-dictionary");t.disabled=!1,t.addEventListener("click",(()=>{this.onDictPage=!0,this.emit.call(this.textBookView,"dictBtnClicked")}))},this.addBackToTextBookListenerBtn=()=>{o("textbook-title-btn").addEventListener("click",(()=>{this.onDictPage=!1,b.currUserSettings.currWord="",this.textBookView.drawTextBook()}))},this.makeStarBtnActive=()=>{[...document.getElementsByClassName("star-svg")].forEach((t=>t.classList.add("star-svg--active")))},this.checkStarBtnActive=()=>{this.textBookModel.difficultWords.length>0&&!this.onDictPage?this.textBookModel.wordsChunk.forEach((t=>{const e=JSON.stringify(this.textBookModel.difficultWords),s=this.textBookView.textBookViewUtils.getStarBtn(t.id);e.includes(t.id)?s.classList.add("star-svg--active"):s.classList.remove("star-svg--active")})):0!==this.textBookModel.difficultWords.length||this.onDictPage||[...document.getElementsByClassName("star-svg")].forEach((t=>t.classList.remove("star-svg--active")))},this.checkBinBtnActive=()=>{this.textBookModel.learnedWords.length>0?this.textBookModel.wordsChunk.forEach((t=>{const e=JSON.stringify(this.textBookModel.learnedWords),s=this.textBookView.textBookViewUtils.getBinBtn(t.id);e.includes(t.id)?s.classList.add("bin-svg--active"):s.classList.remove("bin-svg--active")})):[...document.getElementsByClassName("bin-svg")].forEach((t=>t.classList.remove("bin-svg--active")))},this.markPagesLearned=()=>{for(let t=0;t<30;t++)20===this.textBookModel.learnedWords.filter((e=>e.page===t)).length&&this.markPageLearned(t,!0)},this.markPageLearned=(t,e)=>{const s=o(`page-${t}`),n=o("textbook-words");e?(s.classList.add("learned-page"),n.classList.add("textbook-words--learned")):(s.classList.remove("learned-page"),n.classList.remove("textbook-words--learned"))},this.updateMarkedPages=()=>{const t=b.currUserSettings.currPage;20===this.textBookModel.learnedWords.filter((e=>e.page===t)).length?this.markPageLearned(t,!0):this.markPageLearned(t,!1)},this.checkGameBtnsActive=()=>{const t=o(`page-${b.currUserSettings.currPage}`),e=document.getElementsByClassName("textbook-games-btn");t.classList.contains("learned-page")?[...e].forEach((t=>t.disabled=!0)):[...e].forEach((t=>t.disabled=!1))},this.addWordDescriptionGamesBlock=()=>{o(" word-description__text-example-translate").insertAdjacentHTML("afterend","\n<h4 class='word-description__stats-title'>Слово было угадано в играх:</h4>\n<div class='word-description__stats-block'>\n  <div class='word-description__game-stats-block'>\n    <p>Аудиовызов:</p>\n    <p class='word-description__challenge-stats'></p>\n  </div>\n  <div class='word-description__game-stats-block'>\n    <p>Спринт:</p>\n    <p class='word-description__sprint-stats'></p>\n  </div>\n</div>\n")},this.addDataWordDescriptionGamesBlock=()=>{const t=o("word-description__challenge-stats"),e=o("word-description__sprint-stats"),s=o("words-btns__btn--active"),n=[...this.textBookModel.difficultWords,...this.textBookModel.learnedWords,...this.textBookModel.newWords].find((t=>t.id===s.id));if(n){const s=+n.userWord.optional.correctAnswersChallenge+ +n.userWord.optional.incorrectAnswersChallenge,i=+n.userWord.optional.correctAnswersSprint+ +n.userWord.optional.incorrectAnswersSprint;t.textContent=`${+n.userWord.optional.correctAnswersChallenge} из ${s}`,e.textContent=`${+n.userWord.optional.correctAnswersSprint} из ${i}`}else t.textContent="0 из 0",e.textContent="0 из 0"},this.textBookModel=t,this.textBookView=e,this.onDictPage=!1}}class P extends A.TypedEmitter{constructor(t,e){super(),this.createTextBookMain=t=>{const e=o("main__wrapper");e.innerHTML="",e.insertAdjacentHTML("afterbegin",t),e.classList.add("textbook-wrapper")},this.addReadMeListeners=()=>{const t=o("textbook-instructions-btn"),e=o("textbook-readme-block");t.addEventListener("click",(()=>{e.classList.toggle("hide"),e.classList.toggle("overlay")})),o("close-readme-btn").addEventListener("click",(()=>{e.classList.toggle("hide"),e.classList.toggle("overlay")}))},this.checkGamesBtnsColor=()=>{const t=`group-${b.currUserSettings.currGroup}`;[...document.getElementsByClassName("textbook-games-btn")].forEach((e=>e.classList.add(t)))},this.checkWordDescriptionGamesBlockColor=()=>{const t=`group-${b.currUserSettings.currGroup}`;[...document.getElementsByClassName("word-description__game-stats-block")].forEach((e=>e.classList.add(t)))},this.getCurrCollection=()=>this.textBookView.userTextBookView.onDictPage?this.textBookModel.difficultWords:this.textBookModel.wordsChunk,this.checkActiveWordsBtns=(t="")=>{const e=document.getElementsByClassName("words-btns__btn--active");e.length>0&&[...e].forEach((t=>t.classList.remove("words-btns__btn--active")));const s=this.getCurrCollection(),n=document.getElementsByClassName("words-btns__btn");if(t){const e=s.map((t=>t.id)).indexOf(`${t}`);n[e].classList.add("words-btns__btn--active"),this.textBookView.createWordCard(s[e])}else n[0].classList.add("words-btns__btn--active"),this.textBookView.createWordCard(s[0])},this.checkActiveDifficultyBtn=t=>{const e=document.getElementsByClassName("textbook-difficulty-group__btn--active");e.length>0&&[...e].forEach((t=>t.classList.remove("textbook-difficulty-group__btn--active"))),document.getElementsByClassName("textbook-difficulty-group__btn")[t].classList.add("textbook-difficulty-group__btn--active")},this.checkActivePage=t=>{const e=document.getElementsByClassName("pagination__page-btn--active");e.length>0&&[...e].forEach((t=>t.classList.remove("pagination__page-btn--active"))),document.getElementsByClassName("pagination__page-btn")[t].classList.add("pagination__page-btn--active")},this.disableDictBtn=()=>{o("js-textbook-dictionary").disabled=!0},this.getStarBtn=t=>document.getElementById(t).childNodes[2].firstElementChild,this.getBinBtn=t=>document.getElementById(t).childNodes[3].firstElementChild,this.addGameBtnsListeners=()=>{o("textbook-games-btn-challenge").addEventListener("click",(()=>{k.push("/audiochallenge-pages")})),o("textbook-games-btn-sprint").addEventListener("click",(()=>{k.push("/sprint-pages")}))},this.textBookModel=t,this.textBookView=e}}class U extends A.TypedEmitter{constructor(t){super(),this.drawTextBook=()=>{this.textBookViewUtils.createTextBookMain("\n<div class='textbook-title-wrapper'>\n  <button class='textbook-instructions-btn js-textbook-instructions-btn'>Readme</button>\n  <h2 class='textbook-title'>Учебник</h2>\n  <button class='textbook-dictionary js-textbook-dictionary' disabled>Сложные слова</button>\n</div>\n<div class='textbook-readme-block hide'>\n  <button class='close-readme-btn'>Зыкрыть</button>\n  <h2 class='instructions-title'>Руководство</h2>\n  <p class='instructions-svg-block'>\n    <?xml version='1.0' encoding='iso-8859-1'?>\n    <svg class=\"instructions-bin\" fill=\"#ff0000\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 463 463\">\n    <path d=\"M375.5,48H295V31.5C295,14.131,280.869,0,263.5,0h-64C182.131,0,168,14.131,168,31.5V48H87.5C65.72,48,48,65.72,48,87.5v24  c0,4.142,3.357,7.5,7.5,7.5H64v288.5c0,10.336,6.71,19.128,16,22.266v9.734c0,12.958,10.542,23.5,23.5,23.5h256  c12.958,0,23.5-10.542,23.5-23.5v-9.734c9.29-3.138,16-11.93,16-22.266V119h8.5c4.143,0,7.5-3.358,7.5-7.5v-24  C415,65.72,397.28,48,375.5,48z M183,31.5c0-9.098,7.402-16.5,16.5-16.5h64c9.098,0,16.5,7.402,16.5,16.5V48h-97V31.5z M79,159.5  c0-4.687,3.813-8.5,8.5-8.5s8.5,3.813,8.5,8.5V416h-8.5c-4.687,0-8.5-3.813-8.5-8.5V159.5z M359.5,448h-256  c-4.687,0-8.5-3.813-8.5-8.5V431h273v8.5C368,444.187,364.187,448,359.5,448z M168,416h-17V159.5c0-4.687,3.813-8.5,8.5-8.5  s8.5,3.813,8.5,8.5V416z M240,416h-17V159.5c0-4.687,3.813-8.5,8.5-8.5s8.5,3.813,8.5,8.5V416z M312,416h-17V159.5  c0-4.687,3.813-8.5,8.5-8.5s8.5,3.813,8.5,8.5V416z M384,407.5c0,4.687-3.813,8.5-8.5,8.5H367V159.5c0-4.687,3.813-8.5,8.5-8.5  s8.5,3.813,8.5,8.5V407.5z M384,137.597c-2.638-1.027-5.503-1.597-8.5-1.597c-12.958,0-23.5,10.542-23.5,23.5V416h-25V159.5  c0-12.958-10.542-23.5-23.5-23.5S280,146.542,280,159.5V416h-25V159.5c0-12.958-10.542-23.5-23.5-23.5S208,146.542,208,159.5V416  h-25V159.5c0-12.958-10.542-23.5-23.5-23.5S136,146.542,136,159.5V416h-25V159.5c0-12.958-10.542-23.5-23.5-23.5  c-2.997,0-5.862,0.57-8.5,1.597V119h305V137.597z M400,104H63V87.5C63,73.991,73.99,63,87.5,63h288c13.51,0,24.5,10.991,24.5,24.5  V104z\"/>\n    </svg>\n    <span><b><i>Добавить слово в изученные.</i></b> <br><br>\n      Если слово добавлено в изученные, оно не будет появляться в играх, которые запускаются со страницы\n      учебника, но будет присутствовать в играх, которые запускаются из меню. В последнем случае, \n      если в слове будет допущена ошибка, оно автоматически удаляется из изученных. <br><br>\n      Кроме того, слово автоматически попадает в изученные, если пользователь правильно угадает его в \n      играх 3 раза подряд. Если же пользователь ошибётся на изученном слове, то оно будет удалено из\n      этой категории. <br><br>\n      Если все слова на странице являются изученными, то в пагинации учебника данная страница зачёркивается,\n      и игры на этой страницы становятся недоступны. <br><br>\n      Если отметить изученное слово, как сложное, оно автоматически удалится из изученных.<br><br><br>\n      </span>\n  </p>\n  \n  <p class='instructions-svg-block'>\n    <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n    <svg class='instructions-star' fill=\"#fffc00\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 105 105\">\n    <path d=\"M54,5 86,105 1,43H107L22,105\"/></svg>\n    <span><b><i>Добавить слово в сложные.</i></b> <br><br>\n      Все слова, добавленные в сложные, дополнительно отображаются в разделе \"Сложные слова\". <br><br>\n      Сложное слово автоматически попадает в изученные, если пользователь правильно угадает его в \n      играх 5 раза подряд. <br><br>\n      Если отметить сложное слово, как изученное, оно автоматически удалится из раздела \"Сложные слова\".\n    </span>\n  </p>\n  <h2 class='instructions-goodluck'>Удачи в обучении!</h2>\n</div>\n<p class='textbook-subtitle'>Уровни сложности:</p>\n<div class='textbook-difficulty-group js-textbook-difficulty-group'></div>\n<div class='textbook-games-block'>\n  <h2 class='textbook-games-title'>Игры:</h2>\n  <button class='textbook-games-btn textbook-games-btn-challenge'>Аудиовызов</button>\n  <button class='textbook-games-btn textbook-games-btn-sprint'>Спринт</button>\n</div>\n<h2 class='words-title'>Слова для изучения:</h2>\n<div class='textbook-words js-textbook-words'>\n  <section class='words-btns js-words-btns'></section>\n  <article class='word-description js-word-description'></article>\n</div>\n<div class='pagination js-pagination'></div>\n"),this.textBookViewUtils.addReadMeListeners(),this.createWordsGroupBtns(),this.textBookViewUtils.checkActiveDifficultyBtn(b.currUserSettings.currGroup),this.textBookViewUtils.addGameBtnsListeners(),this.appendWordsBtns(),this.textBookViewUtils.checkActiveWordsBtns(b.currUserSettings.currWord),this.createPagination(),this.textBookViewUtils.checkActivePage(b.currUserSettings.currPage),b.currUserSettings.userId&&(this.textBookViewUtils.checkGamesBtnsColor(),this.userTextBookView.drawUserTextBookElems(),this.userTextBookView.markPagesLearned(),this.userTextBookView.checkGameBtnsActive())},this.createWordsGroupBtns=()=>{const t=o("textbook-difficulty-group"),e=["Beginner/Elementary","Pre Intermediate","Intermediate","Upper Intermediate","Advanced","Proficient"];for(let s=0;s<e.length;s++){const n=r("button",["textbook-difficulty-group__btn",`group-${s}`,"js-textbook-difficulty-group__btn"]);n.addEventListener("click",(()=>this.emit("groupBtnClicked",s)));const i=r("h3");i.textContent=e[s],n.append(i),t.append(n)}},this.appendWordsBtns=()=>{const t=o("js-words-btns");this.textBookViewUtils.getCurrCollection().forEach((e=>{t.append(this.createWordsBtns({id:e.id,word:e.word,wordTranslate:e.wordTranslate,group:e.group}))}))},this.createWordsBtns=({id:t,word:e,wordTranslate:s,group:n})=>{const i=r("div",["words-btns__btn",`group-${n}`]);i.id=t,i.addEventListener("click",(()=>{b.currUserSettings.currWord!==t&&(this.emit("wordBtnClicked",t,this.userTextBookView.onDictPage),this.textBookViewUtils.checkActiveWordsBtns(t))}));const a=r("h3","word-btn-title");a.textContent=e;const o=r("p","word-btn-translate");return o.textContent=s,i.append(a,o),i},this.createWordCard=t=>{o("js-word-description").innerHTML="\n    <img class='word-description__word-image' src='' alt='word image'>\n    <div class='word-description__text-container'>\n      <div class='title-audio-block'>\n        <h3 class='word-description__word-title'></h3>\n      </div>\n      <p class='word-description__word-translate'></p>\n      <p class='word-description__word-transcript'></p>\n      <div class='title-audio-block'>\n        <h4 class='word-description__word-meaning-title'>Значение</h4>\n      </div>\n      <p class='word-description__text-meaning'></p>\n      <p class='word-description__text-meaning-translate'></p>\n      <div class='title-audio-block'>\n        <h4 class='word-description__word-example-title'>Пример</h4>\n      </div>\n      <p class='word-description__text-example'></p>\n      <p class='word-description__text-example-translate'></p>\n  \n    </div> ",o("word-description__word-image").src=l+t.image;const e=o("word-description__word-title");e.textContent=t.word,e.after(this.createAudioBtn(t.audio)),o("word-description__word-translate").textContent=t.wordTranslate,o("word-description__word-transcript").innerHTML=`<b>${t.transcription}</b>`,o("word-description__word-meaning-title").after(this.createAudioBtn(t.audioMeaning)),o("word-description__text-meaning").innerHTML=t.textMeaning,o("word-description__text-meaning-translate").innerHTML=t.textMeaningTranslate,o("word-description__word-example-title").after(this.createAudioBtn(t.audioExample)),o("word-description__text-example").innerHTML=t.textExample,o("word-description__text-example-translate").innerHTML=t.textExampleTranslate,b.currUserSettings.userId&&(this.userTextBookView.addWordDescriptionGamesBlock(),this.userTextBookView.addDataWordDescriptionGamesBlock(),this.textBookViewUtils.checkWordDescriptionGamesBlockColor())},this.createAudioBtn=t=>{const e=r("button",["audio-btn","js-audio-btn"]);return e.addEventListener("click",(()=>{(()=>{return e=this,s=void 0,i=function*(){const e=new Audio(l+t);yield e.play()},new((n=void 0)||(n=Promise))((function(t,a){function r(t){try{c(i.next(t))}catch(t){a(t)}}function o(t){try{c(i.throw(t))}catch(t){a(t)}}function c(e){var s;e.done?t(e.value):(s=e.value,s instanceof n?s:new n((function(t){t(s)}))).then(r,o)}c((i=i.apply(e,s||[])).next())}));var e,s,n,i})().catch((t=>console.error(t)))})),e},this.createPagination=()=>{for(let t=1;t<=30;t++){const e=r("button",["pagination__page-btn","page-"+(t-1)]);e.textContent=`${t}`,e.addEventListener("click",(()=>this.emit("pageBtnClicked",t-1))),o("js-pagination").append(e)}},this.textBookModel=t,this.userTextBookView=new D(t,this),this.textBookViewUtils=new P(t,this),this.textBookModel.on("getTextBookList",(()=>this.drawTextBook())).on("getWordCardData",(t=>this.createWordCard(t))).on("getUserDict",(()=>this.userTextBookView.drawDict())).on("removeDifficultWordElem",(t=>this.userTextBookView.removeDictElem(t))).on("updateMarkedPages",(()=>this.userTextBookView.updateMarkedPages())).on("updateMarkedPages",(()=>this.userTextBookView.checkGameBtnsActive()))}}var V=function(t,e,s,n){return new(s||(s=Promise))((function(i,a){function r(t){try{c(n.next(t))}catch(t){a(t)}}function o(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,o)}c((n=n.apply(t,e||[])).next())}))};const $=(0,f.lX)();class H extends A.TypedEmitter{constructor(){super(),this.render=()=>this.games,this.bind=()=>{this.games.addEventListener("click",(t=>{t.preventDefault();const e=t.target.closest("a");if(e){const t=e.pathname;$.push(t)}}))},this.games=r("section","games-section"),this.games.innerHTML='\n<h2 class="games-title">Игры</h1>\n<div class="img-x5 position-left">\n  <img src="./assets/bubbles.svg" alt="bubbles"/>\n</div>\n<article class="games-wrapper">\n  <a href="/audiochallenge" class="games-link games-link__audiochallenge">\n    <figure class="games-figure">\n      <p>\n        <img\n          src="../../assets/games/headphones.svg"\n          alt="headphones"\n          class="games-figure__image"\n        />\n      </p>\n      <figcaption class="games-figcaption">Аудиовызов</figcaption>\n    </figure>\n  </a>\n  <a href="/sprint" class="games-link games-link__sprint">\n    <figure class="games-figure">\n      <p>\n        <img\n          src="../../assets/games/fish.svg"\n          alt="fish"\n          class="games-figure__image games-figure__image_fish"\n        />\n      </p>\n      <figcaption class="games-figcaption">Спринт</figcaption>\n    </figure>\n  </a>\n</article>\n<div class="img-x5 position-right">\n  <img src="./assets/bubbles.svg" alt="bubbles" />\n</div>\n',this.bind()}}class O{constructor(t,e){this.getWordsList=()=>{return t=this,e=void 0,n=function*(){const t=this.getRandomPage(),e=`words?group=${g.level}&page=${t}`;yield this.audioChallengeModel.getWordsList(e)},new((s=void 0)||(s=Promise))((function(i,a){function r(t){try{c(n.next(t))}catch(t){a(t)}}function o(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,o)}c((n=n.apply(t,e||[])).next())}));var t,e,s,n},this.getRandomPage=()=>{const t=31*Math.random();return Math.floor(t)},this.turnGamePage=()=>{this.audioChallengeModel.turnGamePage()},this.changeWord=()=>{this.audioChallengeModel.changeWord()},this.getWordData=t=>{this.audioChallengeModel.getWordData(t)},this.audioChallengeModel=t,this.audioChallengeView=e,this.audioChallengeView.on("nextBtnClicked",(()=>this.turnGamePage())).on("wordOfShakedArrCountAdded",(()=>this.changeWord())).on("pressedContinueGameBtn",(()=>this.getWordsList())).on("rightAnswerClicked",(t=>this.getWordData(t)))}}var G=function(t,e,s,n){return new(s||(s=Promise))((function(i,a){function r(t){try{c(n.next(t))}catch(t){a(t)}}function o(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,o)}c((n=n.apply(t,e||[])).next())}))};class j extends A.TypedEmitter{constructor(){super(),this.getWordsList=t=>G(this,void 0,void 0,(function*(){const e=yield fetch(l+t);this.wordsChunk=yield e.json(),this.shakedWordChunk=this.shakeWordsArr()})),this.getWordsListFromTextbook=t=>{this.wordsChunk=t,this.shakedWordChunk=this.shakeWordsArr()},this.shakeWordsArr=()=>{const t=JSON.parse(JSON.stringify(this.wordsChunk));for(let e=this.wordsChunk.length-1;e>0;e--){const s=Math.floor(Math.random()*(e+1));[t[e],t[s]]=[t[s],t[e]]}return t},this.turnGamePage=()=>{g.wordCount+=g.wordsPerPage,this.emit("drawGameBtns")},this.changeWord=()=>{g.wordOfShakedArrCount<20&&(g.wordOfShakedArrCount+=1)},this.getWordData=t=>G(this,void 0,void 0,(function*(){b.currUserSettings.userId;const t=`users/${b.currUserSettings.userId}/aggregatedWords?group=${b.currUserSettings.currGroup}&wordsPerPage=600"}`;yield this.getUserWords(t)})),this.getUserWords=t=>G(this,void 0,void 0,(function*(){try{const e=yield W(l+t,{method:"GET",headers:{Authorization:`Bearer ${b.currUserSettings.token}`,Accept:"application/json","Content-Type":"application/json"}}),s=yield e.json();console.log(s)}catch(t){console.error(t)}})),this.wordsChunk=[],this.shakedWordChunk=[]}}var R=function(t,e,s,n){return new(s||(s=Promise))((function(i,a){function r(t){try{c(n.next(t))}catch(t){a(t)}}function o(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,o)}c((n=n.apply(t,e||[])).next())}))};class N extends A.TypedEmitter{constructor(t){super(),this.drawAudioChallengeGame=()=>{const t=o("body");t.innerHTML="",t.insertAdjacentHTML("afterbegin",'\n<div class="fixed-window-wrapper">\n      <div class="fixed-window">\n        <div class=\'game-progress\'>\n          <div class=\'game-progress__fill\'></div>\n          <span class=\'game-progress__text\'>0%</span>\n        </div>\n        <div class="game-operations-group"></div>\n        <section class="game-section">\n          <div class="game-section__speaker-wrapper"></div>\n          <div class="game-section__answer-wrapper hidden"></div>\n          <div class="game-section__words-wrapper"></div>\n          <div class="game-section__skip-btn-wrapper"></div>\n          <div class="game-section__next-btn-wrapper hidden"></div>\n        </section>\n      </div>\n      <div class="fixed-result-window hidden">\n        <section class="result-section">\n          <div class="result-section__words">\n            <div class="result-section__learned-words"></div>\n            <div class="result-section__unlearned-words"></div>\n          </div>\n          <div class="result-section__operation-panel"></div>\n        </section>\n      </div> \n    </div>\n'),this.createSoundsBtns(),this.createCloseBtn(),this.updateWordBtnsWrapper(),this.createContinueBtn(),this.createSkipBtn(),this.enableWordSounding();const e=o("fixed-window");e.classList.contains("hidden")&&e.classList.remove("hidden")},this.updateWordBtnsWrapper=()=>{const t=o("game-section__words-wrapper");t.innerHTML="";const e=this.shakeWordsForCurrentGamePage();for(let s=0;s<e.length;s+=1)e[s]?t.append(this.createWordsBtns({wordTranslate:e[s].wordTranslate,id:e[s].id,group:e[s].group,word:e[s].word})):(this.stopTheGame(),this.showGameResults());if(this.audioChallengeModel.shakedWordChunk[g.wordOfShakedArrCount]){const t=this.audioChallengeModel.shakedWordChunk[g.wordOfShakedArrCount].word;this.createAnswerWrapper(t),this.createSpeakerWrapper(t),this.emit("wordOfShakedArrCountAdded")}return t},this.shakeWordsForCurrentGamePage=()=>{const t=[];for(t.push(this.audioChallengeModel.shakedWordChunk[g.wordOfShakedArrCount]);t.length<g.wordsPerPage;){const e=this.audioChallengeModel.shakedWordChunk[Math.floor(Math.random()*this.audioChallengeModel.shakedWordChunk.length)];t.includes(e)||t.push(e)}for(let e=t.length-1;e>0;e--){const s=Math.floor(Math.random()*(e+1));[t[e],t[s]]=[t[s],t[e]]}return t},this.createCloseBtn=()=>{const t=o("game-operations-group"),e=r("div","game-operations-group__close-btn"),s=r("img",["game-operations-group__cross-img","game-operations-group__cross-img_light"]);s.src="./assets/games/cross.svg",e.append(s),e.addEventListener("click",(()=>{!1===g.startFromTextbook||k.push("/textbook"),window.location.reload()})),t.append(e)},this.createSoundsBtns=()=>{const t=o("game-operations-group"),e=r("div","game-operations-group__sound-btns-wrapper"),s=this.createSoundBtn(),n=this.createStopSoundBtn();e.append(s,n),e.addEventListener("click",(t=>{!s.classList.contains("hidden")&&n.classList.contains("hidden")?(s.classList.add("hidden"),n.classList.remove("hidden")):s.classList.contains("hidden")&&!n.classList.contains("hidden")&&(s.classList.remove("hidden"),n.classList.add("hidden"))})),t.append(e)},this.createSoundBtn=()=>{const t=r("div",["game-operations-group__btn-wrapper","game-operations-group__btn-wrapper_green"]),e=r("img","game-operations-group__green-sound");return e.src="./assets/games/sound.svg",t.append(e),t},this.createStopSoundBtn=()=>{const t=r("div",["game-operations-group__btn-wrapper","game-operations-group__btn-wrapper_red","hidden"]),e=r("img","game-operations-group__red-sound");return e.src="./assets/games/no-sound.svg",t.append(e),t},this.turnOnCorrectAnswerSound=()=>{const t=new Audio;t.src="./assets/games-sounds/correct-answer.mp3",t.autoplay=!0},this.turnOnWrongAnswerSound=()=>{const t=new Audio;t.src="./assets/games-sounds/wrong-answer.mp3",t.autoplay=!0},this.createSpeakerWrapper=t=>{const e=o("game-section__speaker-wrapper");e.innerHTML="";const s=this.audioChallengeModel.wordsChunk.find((e=>e.word===t));if(s){const t=this.createSpeaker(s,"game-section__speaker-img");t.classList.add("game-section__speaker-img_big"),e.append(t)}},this.createSpeaker=(t,e)=>{const s=r("img",`${e}`);return s.src="./assets/games/speaker.svg",s.addEventListener("click",(()=>{(()=>R(this,void 0,void 0,(function*(){const e=new Audio(l+t.audio);yield e.play()})))().catch()})),s},this.enableWordSounding=()=>R(this,void 0,void 0,(function*(){const t=this.getRightAnswer(),e=this.audioChallengeModel.wordsChunk.find((e=>e.word===t));if(e){const t=new Audio(l+e.audio);yield t.play().catch()}})),this.createAnswerWrapper=t=>{const e=o("game-section__answer-wrapper");e.innerHTML="";const s=this.audioChallengeModel.wordsChunk.find((e=>e.word===t)),n=r("div","game-section__word-wrapper"),i=r("span","game-section__selected-word"),a=r("div","game-section__answer-speaker-wrapper");if(s){const t=this.createSpeaker(s,"game-section__speaker-img");t.classList.add("game-section__speaker-img_small"),a.append(t)}const c=r("game-section__answer-image-wrapper"),d=r("img","game-section__answer-img");d.src=l+(null==s?void 0:s.image),d.alt="word image",c.append(d),i.innerText=t,n.append(a,i),e.append(c,n)},this.createWordsBtns=({word:t,id:e,wordTranslate:s,group:n})=>{const i=r("div","game-section__answer-word-wrapper"),a=r("button",["game-section__word",`game-section__word-group-${n}`,`game-section__word-${t}`]);return a.addEventListener("click",(()=>{this.showRightAnswer(),this.hideSkipBtn(),this.showSign(t),this.makeWordsTransparent(t),this.crossWrongWord(t),this.wordsBtnsDisable(),this.checkRightAnswer(t),this.countBarProgress()})),a.textContent=s,i.append(this.createAnswerSigns(t),a),i},this.createAnswerSigns=t=>{const e=r("div",["game-section__answer-signs-wrapper",`game-section__answer-signs-wrapper-${t}`]),s=r("div",["game-section__default-sign-wrapper",`game-section__default-sign-wrapper-${t}`]),n=r("div",["game-section__correct-sign-wrapper",`game-section__correct-sign-wrapper-${t}`,"hidden"]),i=r("div",["game-section__wrong-sign-wrapper",`game-section__wrong-sign-wrapper-${t}`,"hidden"]),a=r("img","game-section__default-sign-img");a.src=" ./assets/games/dot.svg",s.append(a);const o=r("img","game-section__correct-sign-img");o.src=" ./assets/games/right-sign.svg",n.append(o);const c=r("img","game-section__wrong-sign-img");return c.src=" ./assets/games/wrong-sign.svg",i.append(c),e.append(s,n,i),e},this.createContinueBtn=()=>{const t=o("game-section__next-btn-wrapper"),e=r("button",["game-section__next-btn","game-start-btn"]);e.innerText="⟶";const s=o("fixed-window");e.addEventListener("click",(()=>{this.emit("nextBtnClicked"),this.hideRightAnswer(),this.showSkipBtn(),s.classList.contains("hidden")||this.enableWordSounding()})),t.append(e)},this.createSkipBtn=()=>{const t=o("game-section__skip-btn-wrapper"),e=r("button",["game-section__skip-btn","game-start-btn"]);e.innerText="Не знаю",e.addEventListener("click",(()=>{const t=this.getRightAnswer();this.showRightAnswer(),this.hideSkipBtn(),this.showSign(t),this.makeWordsTransparent(t),this.wordsBtnsDisable(),this.countBarProgress(),g.unlearnedWords.includes(t)||g.learnedWords.includes(t)||g.unlearnedWords.push(t)})),t.append(e)},this.getRightAnswer=()=>o("game-section__selected-word").innerHTML,this.showRightAnswer=()=>{const t=o("game-section__answer-wrapper");t.classList.contains("hidden")&&t.classList.remove("hidden");const e=o("game-section__speaker-wrapper");e.classList.contains("hidden")||e.classList.add("hidden")},this.hideRightAnswer=()=>{const t=o("game-section__answer-wrapper");t.classList.contains("hidden")||t.classList.add("hidden");const e=o("game-section__speaker-wrapper");e.classList.contains("hidden")&&e.classList.remove("hidden")},this.hideSkipBtn=()=>{const t=o("game-section__skip-btn-wrapper");t.classList.contains("hidden")||t.classList.add("hidden");const e=o("game-section__next-btn-wrapper");e.classList.contains("hidden")&&e.classList.remove("hidden")},this.showSkipBtn=()=>{const t=o("game-section__skip-btn-wrapper");t.classList.contains("hidden")&&t.classList.remove("hidden");const e=o("game-section__next-btn-wrapper");e.classList.contains("hidden")||e.classList.add("hidden")},this.showSign=t=>{const e=this.getRightAnswer(),s=o(`game-section__correct-sign-wrapper-${t}`),n=o(`game-section__wrong-sign-wrapper-${t}`),i=o(`game-section__default-sign-wrapper-${t}`),a=o(`game-section__default-sign-wrapper-${e}`),r=o(`game-section__correct-sign-wrapper-${e}`);t===e?s&&s.classList.contains("hidden")&&s.classList.remove("hidden"):(n&&n.classList.contains("hidden")&&n.classList.remove("hidden"),a&&!a.classList.contains("hidden")&&a.classList.add("hidden")),r&&r.classList.contains("hidden")&&r.classList.remove("hidden"),i&&!i.classList.contains("hidden")&&i.classList.add("hidden")},this.makeWordsTransparent=t=>{Array.from(document.getElementsByClassName("game-section__word")).forEach((e=>{e.classList.contains(`game-section__word-${t}`)||e.classList.add("semitransparent")}))},this.crossWrongWord=t=>{const e=this.getRightAnswer(),s=o(`game-section__word-${t}`);t!==e&&(s.classList.contains("strikethrough")||s.classList.add("strikethrough"))},this.wordsBtnsDisable=()=>{Array.from(document.getElementsByClassName("game-section__word")).forEach((t=>{t.disabled=!0}))},this.checkRightAnswer=t=>{const e=this.getRightAnswer(),s=o("game-operations-group__btn-wrapper_green");t===e?(this.emit("rightAnswerClicked",t),g.learnedWords.includes(e)||g.unlearnedWords.includes(e)||g.learnedWords.push(e),s.classList.contains("hidden")||this.turnOnCorrectAnswerSound()):(this.emit("wrongAnswerClicked",t),g.learnedWords.includes(e)||g.unlearnedWords.includes(e)||g.unlearnedWords.push(e),s.classList.contains("hidden")||this.turnOnWrongAnswerSound())},this.stopTheGame=()=>{const t=o("fixed-window");t.classList.contains("hidden")||t.classList.add("hidden")},this.showGameResults=()=>{const t=o("fixed-result-window");t.classList.contains("hidden")&&t.classList.remove("hidden"),o("result-section").style.height="50vh",this.updateUnlearnedResultWordsWrapper(),this.updateLearnedResultWordsWrapper(),this.showOperationPanel()},this.closeGameResults=()=>{const t=o("fixed-result-window"),e=o("result-section__operation-panel");t.classList.contains("hidden")||t.classList.add("hidden"),e.classList.contains("hidden")||e.classList.add("hidden"),o("result-section").style.height="0"},this.updateUnlearnedResultWordsWrapper=()=>{const t=o("result-section__unlearned-words");t.innerHTML="";const e=r("h2","result-section__header"),s=r("span",["result-section__span","result-section__span_errors"]);s.textContent=`${g.unlearnedWords.length}`,e.textContent="Ошибок ",e.append(s),t.append(e);for(let e=0;e<g.unlearnedWords.length;e+=1){const s=this.audioChallengeModel.wordsChunk.find((t=>t.word===g.unlearnedWords[e]));s&&t.append(this.createResultWordsBtns({wordTranslate:s.wordTranslate,word:s.word}))}return t},this.updateLearnedResultWordsWrapper=()=>{const t=o("result-section__learned-words");t.innerHTML="";const e=r("h2","result-section__header"),s=r("span",["result-section__span","result-section__span_correct"]);s.textContent=`${g.learnedWords.length}`,e.textContent="Знаю ",e.append(s),t.append(e);for(let e=0;e<g.learnedWords.length;e+=1){const s=this.audioChallengeModel.wordsChunk.find((t=>t.word===g.learnedWords[e]));s&&t.append(this.createResultWordsBtns({wordTranslate:s.wordTranslate,word:s.word}))}return t},this.createResultWordsBtns=({word:t,wordTranslate:e})=>{const s=r("div","result-section__word-wrapper"),n=r("span",["result-section__word",`result-section__word-${t}`]);n.textContent=`${t} - ${e}`;const i=this.audioChallengeModel.wordsChunk.find((e=>e.word===t));if(i){const t=this.createSpeaker(i,"result-section__speaker-img");t.classList.add("result-section__speaker-img_small"),s.append(t)}return s.append(n),s},this.showOperationPanel=()=>{const t=o("result-section__operation-panel"),e=this.createResultsCloseBtn(),s=o("result-section__close-btn-wrapper");o("result-section__continue-btn"),s||t.append(e)},this.createResultsCloseBtn=()=>{const t=r("div","result-section__close-btn-wrapper"),e=r("button",["game-start-btn","result-section__close-btn"]);return e.textContent="Завершить игру",e.addEventListener("click",(()=>{!1===g.startFromTextbook||k.push("/textbook"),window.location.reload()})),t.append(e),t},this.keyPressMethod=(()=>{document.addEventListener("keydown",(t=>this.checkPressedBtn(t)))})(),this.checkPressedBtn=t=>{const e=t.code,s=o("fixed-window");if(s&&!s.classList.contains("hidden"))switch(e){case"Digit1":case"Digit2":case"Digit3":case"Digit4":case"Digit5":case"Numpad1":case"Numpad2":case"Numpad3":case"Numpad4":case"Numpad5":this.handlePressedNumber(e);break;case"Space":this.handlePressedSpace(e);break;case"Enter":this.handlePressedEnter(e)}},this.handlePressedNumber=t=>{const e=document.getElementsByClassName("game-section__word"),s=+t.slice(-1)-1,n=e[s].textContent,i=this.audioChallengeModel.wordsChunk.find((t=>t.wordTranslate===n)),a=null==i?void 0:i.word;a&&!0!==e[s].disabled&&(this.showRightAnswer(),this.hideSkipBtn(),this.showSign(a),this.makeWordsTransparent(a),this.crossWrongWord(a),this.wordsBtnsDisable(),this.checkRightAnswer(a),this.countBarProgress())},this.handlePressedSpace=t=>{const e=this.getRightAnswer(),s=this.audioChallengeModel.wordsChunk.find((t=>t.word===e));s&&(()=>R(this,void 0,void 0,(function*(){const t=new Audio(l+s.audio);yield t.play()})))().catch()},this.handlePressedEnter=t=>{const e=o("game-section__skip-btn-wrapper"),s=o("game-section__next-btn-wrapper"),n=o("fixed-window"),i=o("game-operations-group__btn-wrapper_green");if(e.classList.contains("hidden")&&!s.classList.contains("hidden"))this.emit("nextBtnClicked"),this.hideRightAnswer(),this.showSkipBtn(),n.classList.contains("hidden")||this.enableWordSounding();else if(!e.classList.contains("hidden")&&s.classList.contains("hidden")){const t=this.getRightAnswer();this.showRightAnswer(),this.hideSkipBtn(),this.showSign(t),this.makeWordsTransparent(t),this.wordsBtnsDisable(),this.countBarProgress(),g.unlearnedWords.includes(t)||g.learnedWords.includes(t)||g.unlearnedWords.push(t),i.classList.contains("hidden")||this.turnOnWrongAnswerSound()}},this.countBarProgress=()=>{const t=Math.round(100*g.wordOfShakedArrCount/this.audioChallengeModel.shakedWordChunk.length);this.updateProgressBar(t)},this.updateProgressBar=t=>{const e=o("game-progress__fill"),s=o("game-progress__text");e.style.width=`${t}%`,s.textContent=`${t}%`},this.audioChallengeModel=t,this.audioChallengeModel.on("drawGameBtns",(()=>this.updateWordBtnsWrapper()))}}class I extends A.TypedEmitter{constructor(t){super(),this.buildSprintHTML=()=>{const t=r("div","game-entrance"),e=r("div","game-entrance__wrapper"),s=r("div","game-entrance__text-box");return s.append(this.createSprintDescription(),this.createSelect(),this.createSprintStartButton()),e.append(this.createSprintTitle(),s),t.append(e,this.createSprintImage()),t},this.buildAudioChallengeHTML=()=>{const t=r("div","game-entrance"),e=r("div","game-entrance__wrapper"),s=r("div","game-entrance__text-box");return s.append(this.createAudioChallengeDescription(),this.createSelect(),this.createAudioChallengeStartButton()),e.append(this.createAudioChallengeTitle(),s),t.append(e,this.createAudioChallengeImage()),t},this.createSelect=()=>{const t=r("select","select-input");for(let e=0;e<6;e+=1){const s=r("option",`game-option-${e+1}`);s.textContent=(e+1).toString()+" уровень",s.addEventListener("select",(()=>this.emit("gameOptionClicked",e))),t.append(s)}return t.addEventListener("change",(()=>{const e=parseInt(t.value.slice(0,1));return this.emit("gameOptionClicked",e)})),t},this.createAudioChallengeTitle=()=>{const t=r("h1",["game-entrance__title","game-entrance__title_audiochallenge"]);return t.textContent="Аудиовызов",t},this.createSprintTitle=()=>{const t=r("h1",["game-entrance__title","game-entrance__title_sprint"]);return t.textContent="Спринт",t},this.createSprintStartButton=()=>{const t=r("button",["game-start-btn","game-start-btn_sprint"]);return t.textContent="Начать",t.addEventListener("click",(()=>{this.emit("sprintGameStarted")})),t},this.createAudioChallengeStartButton=()=>{const t=r("button",["game-start-btn","game-start-btn_audio-challenge"]);return t.textContent="Начать",t.addEventListener("click",(()=>{this.emit("audioChallengeGameStarted")})),t},this.createSprintDescription=()=>{const t=r("div");return t.innerHTML="\n    <p>Тренировка 'Спринт' позволяет повторять слова из вашего словаря.</p>\n    <ul>Чтобы выбрать:\n      <li>Можно использовать мышь.</li>\n      <li>Можно имспользовать клавиши влево и вправо</li>\n    </ul>\n    <p>Выберите уровень сложности:",t},this.createAudioChallengeDescription=()=>{const t=r("div");return t.innerHTML="\n    <p>Тренировка 'Аудиовызов' улучшает восприятие речи на слух.</p>\n      <ul>Чтобы играть с помощью клавиатуры, используй клавиши:\n        <li><strong>1, 2, 3, 4, 5</strong> - чтобы выбрать ответ,</li>\n        <li><strong>Space</strong> - для воспроизведения звука,</li>\n        <li><strong>Enter</strong> - для получения подсказки или перехода к следующему вопросу.</li>\n      </ul>\n      <p class='bold'>Выберите уровень сложности:</p>\n    ",t},this.createSprintImage=()=>{const t=r("div","img-x15");return t.innerHTML="<img src='./assets/games/delphins.svg' alt='delphins' />",t},this.createAudioChallengeImage=()=>{const t=r("div","img-x15");return t.innerHTML="<img src='./assets/games/tail.svg' alt='whale tail' />",t},this.gamesEntranceModel=t}}class F extends A.TypedEmitter{constructor(){super(),this.addGameLevel=t=>{g.level=t-1,p.level=t-1}}}class z extends A.TypedEmitter{constructor(){super(),this.getWordsList=t=>{return e=this,s=void 0,i=function*(){const e=yield fetch(l+t);this.wordsChunk=yield e.json(),this.shakedWordChunk=this.shakeWordsArr()},new((n=void 0)||(n=Promise))((function(t,a){function r(t){try{c(i.next(t))}catch(t){a(t)}}function o(t){try{c(i.throw(t))}catch(t){a(t)}}function c(e){var s;e.done?t(e.value):(s=e.value,s instanceof n?s:new n((function(t){t(s)}))).then(r,o)}c((i=i.apply(e,s||[])).next())}));var e,s,n,i},this.shakeWordsArr=()=>{const t=JSON.parse(JSON.stringify(this.wordsChunk));for(let e=this.wordsChunk.length-1;e>0;e--){const s=Math.floor(Math.random()*(e+1));[t[e],t[s]]=[t[s],t[e]]}return t},this.wordsChunk=[],this.shakedWordChunk=[]}}class J extends A.TypedEmitter{constructor(t){super(),this.buildBeReadyHTML=()=>{const t=o("body");t.innerHTML="",t.insertAdjacentHTML("afterbegin",'\n<div class="fixed-sprint-wrapper">\n  <div class="fixed-be-ready-window">\n    <div class="game-operations-group"></div>\n      <section class="be-ready">\n        <div class="be-ready__num-wrapper"><span class="be-ready__num">3</span></div>\n        <span class="be-ready__text">Приготовьтесь</span>  \n      </section>\n  </div> \n</div>\n'),this.createSoundsBtns(),this.createCloseBtn();let e=3;const s=o("be-ready__num"),n=setInterval((function(){e-=1,s&&(s.textContent=e.toString(),e<=0&&clearInterval(n))}),1e3);setTimeout(this.drawSprintGame,4e3)},this.drawSprintGame=()=>{const t=o("body");t.innerHTML="",t.insertAdjacentHTML("afterbegin",'\n<div class="fixed-sprint-wrapper">\n      <div class="fixed-window">\n        <div class="game-operations-group"></div>\n        <div class="game-points-wrapper"><span class="game-points">0</span></div>\n        <div class="game-timer-wrapper"><span class="game-timer">60</span></div>\n        <section class="spint-game-wrapper">\n        <div class="game-text-btns-group"></div>\n        <div class="game-arrow-btns-group"></div>\n        </section>\n      </div>\n      <div class="fixed-result-window hidden">\n        <section class="result-section">\n          <div class="result-section__words">\n            <div class="result-section__learned-words"></div>\n            <div class="result-section__unlearned-words"></div>\n          </div>\n          <div class="result-section__operation-panel"></div>\n        </section>\n      </div> \n    </div>\n'),this.createSoundsBtns(),this.createCloseBtn()},this.createCloseBtn=()=>{const t=o("game-operations-group"),e=r("div","game-operations-group__close-btn"),s=r("img",["game-operations-group__cross-img","game-operations-group__cross-img_dark"]);s.src="./assets/games/cross.svg",e.append(s),e.addEventListener("click",(()=>{!1===p.startFromTextbook||k.push("/textbook"),window.location.reload()})),t.append(e)},this.createSoundsBtns=()=>{const t=o("game-operations-group"),e=r("div","game-operations-group__sound-btns-wrapper"),s=this.createSoundBtn(),n=this.createStopSoundBtn();e.append(s,n),e.addEventListener("click",(t=>{!s.classList.contains("hidden")&&n.classList.contains("hidden")?(s.classList.add("hidden"),n.classList.remove("hidden")):s.classList.contains("hidden")&&!n.classList.contains("hidden")&&(s.classList.remove("hidden"),n.classList.add("hidden"))})),t.append(e)},this.createSoundBtn=()=>{const t=r("div",["game-operations-group__btn-wrapper","game-operations-group__btn-wrapper_green"]),e=r("img","game-operations-group__green-sound");return e.src="./assets/games/sound.svg",t.append(e),t},this.createStopSoundBtn=()=>{const t=r("div",["game-operations-group__btn-wrapper","game-operations-group__btn-wrapper_red","hidden"]),e=r("img","game-operations-group__red-sound");return e.src="./assets/games/no-sound.svg",t.append(e),t},this.sprintModel=t}}class q{constructor(t,e){this.getWordsList=()=>{return t=this,e=void 0,n=function*(){const t=this.getRandomPage(),e=`words?group=${p.level}&page=${t}`;yield this.sprintModel.getWordsList(e)},new((s=void 0)||(s=Promise))((function(i,a){function r(t){try{c(n.next(t))}catch(t){a(t)}}function o(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,o)}c((n=n.apply(t,e||[])).next())}));var t,e,s,n},this.getRandomPage=()=>{const t=31*Math.random();return Math.floor(t)},this.sprintModel=t,this.sprintView=e}}var Q=function(t,e,s,n){return new(s||(s=Promise))((function(i,a){function r(t){try{c(n.next(t))}catch(t){a(t)}}function o(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,o)}c((n=n.apply(t,e||[])).next())}))},K=function(t,e,s,n){return new(s||(s=Promise))((function(i,a){function r(t){try{c(n.next(t))}catch(t){a(t)}}function o(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,o)}c((n=n.apply(t,e||[])).next())}))};const X=(t,e,s)=>({datasets:[{label:t,data:e,borderColor:"#a8eee4",backgroundColor:"rgb(168 238 228 / 50%)"}],labels:s}),Z=t=>({type:"line",data:t,options:{responsive:!0,plugins:{legend:{position:"top",labels:{color:"white"}},title:{display:!1,color:"white"}},scales:{x:{ticks:{color:"white"}},y:{ticks:{color:"white"}}}}});var Y=s(512);Y.kL.register(...Y.zX);class tt{constructor(){this.render=t=>{const e=o("main__wrapper");e.innerHTML="",e.insertAdjacentHTML("afterbegin",(t=>{const{userName:e}=b.currUserSettings,{audiochallenge:s,sprint:n}=t,i=s.learnedWordsPerDay+n.learnedWordsPerDay,a=s.newWordsPerDay+n.newWordsPerDay,r=Math.round((s.correctAnswers+n.correctAnswers)/(s.correctAnswers+n.correctAnswers+s.incorrectAnswers+n.incorrectAnswers)*100)||0,o=Math.round(s.correctAnswers/(s.correctAnswers+s.incorrectAnswers)*100)||0,c=Math.round(n.correctAnswers/(n.correctAnswers+n.incorrectAnswers)*100)||0;return`\n  <div class="main__container statistics">\n  <div class="statistic__article">\n    <div class="bubbles-top img-x3">\n      <img src="./assets/bubbles.svg" alt="">\n    </div>\n    <div class="skat img-x15">\n      <img src="./assets/skat.svg" alt="">\n    </div>\n    <p>Привет, ${e} ! </p>\n    <div class="statistic__title"><h2 class="article__title">Статистика </h2><span class="statistic__sub-title accent">за сегодня</span></div>\n    <div class="statistic__today">\n      <div class="statistic__words">\n        <h3 class="stat-words-data"> <span><b> ${i} </b></span> слов изучено</h3>\n        <h3 class="stat-words-data"> <span><b> ${a} </b></span> новых слов</h3>\n        <h3 class="stat-words-data"> <span><b> ${r} % </b></span> правильных ответов</h3>\n      </div>\n      <div class="statistic__games">\n      <div class="stat-game-card audiochallenge">\n        <h4 class="stat-game-card__name">Аудиовызов</h4>\n        <div class="stat-game-card__data">\n          <p class="stat-game-card__learned-words">Новых слов: <span class="stat-game-card__accent ">${s.newWordsPerDay}</span></p>\n          <p class="stat-game-card__right-answers">Процент правильных ответов:<span class="stat-game-card__accent "> ${o}\n              %</span></p>\n          <p class="stat-game-card__responses-series">Cамая длинная серия правильных ответов: <span\n              class="stat-game-card__accent">${s.longestSeries}</span></p>\n        </div>\n      </div>\n      <div class="stat-game-card sprint">\n        <h4 class="stat-game-card__name">Спринт</h4>\n        <div class="stat-game-card__data">\n          <p class="stat-game-card__learned-words">Новых слов: <span class="stat-game-card__accent ">${n.newWordsPerDay}</span></p>\n          <p class="stat-game-card__right-answers">Процент правильных ответов:<span class="stat-game-card__accent"> ${c}\n              %</span></p>\n          <p class="stat-game-card__responses-series">Cамая длинная серия правильных ответов: <span\n              class="stat-game-card__accent ">${n.longestSeries}</span></p>\n        </div>\n        </div>\n      </div>\n    </div>\n    <div class="statistic__title"><span class="statistic__sub-title accent"> за всё время</span></div> \n    <div class="statistic__all-time">\n      <div class="all-time__card all-time-words">\n        <h4 class="all-time__card__name">Количество новых слов</h4>\n        <div class="all-time__card__chart">\n<div>\n  <canvas class="newWordsChart" ></canvas>\n</div>\n</div>\n      </div>\n      <div class="all-time__card all-time-dynamics">\n        <h4 class="all-time__card__name"> Общее количество изученных слов</h4>\n        <div class="all-time__card__chart">\n<div>\n  <canvas class="learnedWordsChart" ></canvas>\n</div>\n</div>\n      </div>\n    </div>\n    <div class="bubbles img-x5">\n      <img src="./assets/bubbles.svg" alt="">\n    </div>\n    <div class="whale img-x20">\n      <img src="./assets/whale.svg" alt="">\n    </div>\n  </div>\n</div>\n`})(t))}}}var et=function(t,e,s,n){return new(s||(s=Promise))((function(i,a){function r(t){try{c(n.next(t))}catch(t){a(t)}}function o(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,o)}c((n=n.apply(t,e||[])).next())}))};var st=function(t,e,s,n){return new(s||(s=Promise))((function(i,a){function r(t){try{c(n.next(t))}catch(t){a(t)}}function o(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,o)}c((n=n.apply(t,e||[])).next())}))};const nt=new class{constructor(){this.init=()=>{this.model.mount().catch((t=>console.error(t))),this.view.render()},this.model=new L,this.view=new class{constructor(){this.render=()=>{const t=r("div","modal");this.nav.render(),this.main.append(this.mainWrapper,t),this.footer.insertAdjacentHTML("afterbegin",'<div class="wrapper footer__wrapper">\n<div class="footer__copyright">\n    <span class="copyright">©</span>\n    <span class="year">2022</span>\n</div>\n<div class="footer__info">\n    <a class="github-username" href="https://github.com/ddd-fx" target="_blank" rel="noopener noreferrer">Дмитрий</a>\n    <a class="github-username" href="https://github.com/orla90" target="_blank" rel="noopener noreferrer">Ольга</a>\n    <a class="github-username" href="https://github.com/OutLaw0" target="_blank" rel="noopener noreferrer">Валентин</a>\n</div>\n<a href="https://rs.school/js/" class="rss" target="_blank"> Rolling Scopes School </a>\n</div>'),document.body.append(this.header,this.main,this.footer),this.bind()},this.renderMainTemplate=()=>{this.mainWrapper.innerHTML="",this.mainWrapper.insertAdjacentHTML("afterbegin",'\n\n<div class="main__container">\n<div class="article main__article">\n<div class="bubbles-top img-x3">\n<img src="./assets/bubbles.svg" alt="">\n</div>\n<div class="skat img-x15">\n    <img src="./assets/skat.svg" alt="">\n  </div>\n<h2 class="article__title">Погрузись в <span class="accent">океан</span> знаний вместе с RS Lang</h2>\n<p class="article__text">Добро пожаловать на образовательную игровую площадку, которая помогает детям выучить английский язык.\n  Также, у нас есть миниигры игры, которые помогают улучшить навыки мышления у детей.</p>\n  <a href="/textbook" class="btn btn-article" data-btn="textbook"> Начать </a>\n  <div class="article__bottom-nav"><button class="btn btn-bottom-nav advantages"> О приложении <img class="advantages" src="./assets/icon-right.svg" alt=""></button></div>\n  </div>\n  <div class="bubbles img-x5">\n  <img src="./assets/bubbles.svg" alt="">\n</div>\n<div class="whale img-x20">\n\n    <img src="./assets/whale.svg" alt="">\n  </div>\n  </div>\n  \x3c!--<div class="main__container advantages-screen">\n  <h2 class="article__title">Наши преимущества </h2>\n  </div>\n  <div class="main__container about-us-screen">\n  <h2 class="article__title">О нас </h2>\n  </div>--\x3e\n\n')},this.renderCustomTemplate=t=>{this.mainWrapper.style.opacity="0",setTimeout((()=>{this.mainWrapper.innerHTML="",this.mainWrapper.insertAdjacentHTML("afterbegin",t()),this.mainWrapper.style.opacity="1"}),250)},this.bind=()=>{o("main__wrapper").addEventListener("click",(t=>{t.target.classList.contains("btn-article")&&k.push("/textbook"),t.target.classList.contains("main")&&this.renderCustomTemplate(n),t.target.classList.contains("advantages")&&this.renderCustomTemplate(i),t.target.classList.contains("team")&&this.renderCustomTemplate(a)})),document.addEventListener("click",this.nav.closeNav)},this.header=r("header","header"),this.main=r("main","main"),this.mainWrapper=r("div",["wrapper","main__wrapper"]),this.footer=r("footer"),this.nav=new x(this.header)}}}};nt.init();const it="| rs lang",at=new class{constructor(){this.loginHandler=t=>et(this,void 0,void 0,(function*(){const e=t.email.value,s=t.password.value;if(0===e.length)c("Введите почту!");else if(s.length<8)c("Пароль более 8 символов!");else{const t={email:e,password:s},i=yield(n=t,v(void 0,void 0,void 0,(function*(){try{const t=yield fetch(`${l}signin`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)});return[t.status,yield t.json()]}catch(t){return["404"]}})));200===i[0]?(c("Успешная авторизация!"),this.setUserSettings(t.email,i[1]),window.location.replace("/"),new x(o("header")).render()):c("Неверный логин или пароль!")}var n})),this.authHandler=t=>et(this,void 0,void 0,(function*(){const e=t.username.value,s=t.email.value,n=t.password.value;if(0===s.length)c("Введите почту!");else if(n.length<8)c("Пароль более 8 символов!");else{const t={name:e,email:s,password:n},a=yield(i=t,v(void 0,void 0,void 0,(function*(){const t=yield fetch(`${l}users`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)});return[t.status,yield t.json()]})));200===a[0]?(c("Успешная регистрация!"),k.push("/login")):c(a[1].error.errors[0].message)}var i})),this.setUserSettings=(t,e)=>{const{token:s,refreshToken:n,userId:i,name:a}=e,r=w(s)-3e5;b.currUserSettings.userId=i,b.currUserSettings.userEmail=t,b.currUserSettings.userName=a,b.currUserSettings.token=s,b.currUserSettings.refreshToken=n,b.currUserSettings.expireOn=r,b.isAuth=!0,b.setLSData(b.currUserID,b.currUserSettings)},this.view=new class{constructor(t,e){this.renderLoginForm=()=>{const t=o("main__wrapper"),e=new class{constructor(t){this.render=()=>this.regForm,this.bind=t=>{this.regForm.addEventListener("click",(t=>{if(t.target.classList.contains("register__link-link")){t.preventDefault();const e=t.target.pathname;k.push(e)}})),this.regForm.addEventListener("submit",(e=>{e.preventDefault();const s=document.forms.namedItem("loginForm");t(s).catch((t=>console.error(t)))}))},this.regForm=r("div","register"),this.regForm.innerHTML='\n<div class="register__images">\n<div class="bubbles img-x5">\n<img src="./assets/bubbles.svg" alt="">\n</div>\n<div class="whale img-x20">\n  <img src="./assets/whale.svg" alt="">\n</div>\n</div>\n<form class="form register__form" id="loginForm" name="loginForm" >\n<h2 class="register__title">Авторизация</h2>\n  <label>\n   <span class="input-title">Почта</span>\n    <input class="input" type="email" name="email" id="email" placeholder="elon@musk.com" autocomplete="email" required="required" autofocus>\n  </label>\n  <label>\n  <span class="input-title">Пароль</span>\n  <input class="input" type="password" name="password" id="password" placeholder="Qweasdzxc123" minlength="8" autocomplete="current-password" required="required">\n</label>\n  <button class="btn btn-register" type="submit">Вход</button>\n  \n  <div class="register__link"><span>Нет аккаунта? </span> <a class="register__link-link" href="/auth"> Регистрация </a></div>\n</form>\n',this.bind(t)}}(this.handleLogin);t.innerHTML="",t.append(e.render())},this.renderRegForm=()=>{const t=o("main__wrapper"),e=new class{constructor(t){this.render=()=>this.regForm,this.bind=t=>{this.regForm.addEventListener("click",(t=>{if(t.target.classList.contains("register__link-link")){t.preventDefault();const e=t.target.pathname;k.push(e)}})),this.regForm.addEventListener("submit",(e=>{e.preventDefault(),console.log(e.target);const s=document.forms.namedItem("registerForm");t(s).catch((t=>console.error(t)))}))},this.regForm=r("div","register"),this.regForm.innerHTML='\n<div class="register__images">\n<div class="bubbles img-x5">\n<img src="./assets/bubbles.svg" alt="">\n</div>\n<div class="whale img-x20">\n  <img src="./assets/whale.svg" alt="">\n</div>\n</div>\n<form class="form register__form" id="registerForm" name="registerForm" action="/apply/" method="POST">\n<h2 class="register__title">Создать аккаунт</h2>\n  <label>\n <span class="input-title">Имя</span>\n    <input class="input" type="text" name="username" id="username" placeholder="Илон Маск" autocomplete="username" autofocus>\n  </label>\n  <label>\n   <span class="input-title">Почта*</span>\n    <input class="input" type="email" name="email" id="email" placeholder="elon@musk.com" autocomplete="email" required="required">\n  </label>\n  <label>\n  <span class="input-title">Пароль*</span>\n  <input class="input" type="password" name="password" id="password" placeholder="Qweasdzxc123" minlength="8" autocomplete="new-password" required="required">\n</label>\n  <button class="btn btn-register" type="submit" >Регистрация</button>\n  \n  <div class="register__link"><span>Есть аккаунт? </span><a class="register__link-link" href="/login"> Войти </a></div>\n</form>\n',this.bind(t)}}(this.handleAuth);t.innerHTML="",t.append(e.render())},this.handleLogin=t,this.handleAuth=e}}(this.loginHandler,this.authHandler)}},rt=new class{constructor(){this.init=()=>V(this,void 0,void 0,(function*(){this.textBookView.userTextBookView.onDictPage?this.textBookView.userTextBookView.drawDict():yield this.textBookModel.getTextBookList()})),this.changeTextBookPage=t=>{b.currUserSettings.currPage=t,b.currUserSettings.currWord="",b.setLSData(b.currUserID,b.currUserSettings),this.textBookModel.getTextBookList()},this.changeTextBookGroup=t=>{b.currUserSettings.currPage=0,b.currUserSettings.currWord="",b.currUserSettings.currGroup=t,b.setLSData(b.currUserID,b.currUserSettings),this.textBookModel.getTextBookList()},this.getWordCardData=(t,e)=>{b.currUserSettings.currWord=t,b.setLSData(b.currUserID,b.currUserSettings),this.textBookModel.getWordCardData(t,e)},this.getUserDictWords=()=>{this.textBookModel.getUserDictWords()},this.addUserWord=(t,e)=>V(this,void 0,void 0,(function*(){const s=this.textBookView.userTextBookView.onDictPage;if(this.isWordDifficult(t))yield this.textBookModel.updateUserWord(t,s,e,!1,!1),this.textBookView.userTextBookView.checkStarBtnActive();else if(this.isWordLearned(t))yield this.textBookModel.updateUserWord(t,s,e,!1,!1),this.textBookView.userTextBookView.checkBinBtnActive();else if(this.isWordNew(t))this.isWordNew(t)&&(yield this.textBookModel.updateUserWord(t,s,e,!0,!1));else{const s={difficulty:e,optional:{correctAnswersChallenge:"0",incorrectAnswersChallenge:"0",correctAnswersSprint:"0",incorrectAnswersSprint:"0"}};yield this.textBookModel.addUserWord(s,t)}})),this.makeWordNew=(t,e)=>V(this,void 0,void 0,(function*(){const s=this.textBookView.userTextBookView.onDictPage;yield this.textBookModel.updateUserWord(t,s,e,!1,!0)})),this.isWordNew=t=>JSON.stringify(this.textBookModel.newWords).includes(t),this.isWordDifficult=t=>JSON.stringify(this.textBookModel.difficultWords).includes(t),this.isWordLearned=t=>JSON.stringify(this.textBookModel.learnedWords).includes(t),this.getGamesWordCollection=t=>V(this,void 0,void 0,(function*(){if(!b.currUserID)return this.textBookModel.wordsChunk;const e=yield this.textBookModel.getWordsForGames();if(e){const s=e.filter((t=>t.page<=b.currUserSettings.currPage));return 0===b.currUserSettings.currPage?this.textBookModel.mapUserWordsID(s):s.length>20&&t===T.audioChallenge?this.textBookModel.mapUserWordsID(s.slice(-20)):this.textBookModel.mapUserWordsID(s)}throw new Error("collection gathering failed")})),this.textBookModel=new E,this.textBookView=new U(this.textBookModel),this.textBookView.on("pageBtnClicked",(t=>this.changeTextBookPage(t))).on("groupBtnClicked",(t=>this.changeTextBookGroup(t))).on("wordBtnClicked",((t,e)=>this.getWordCardData(t,e))).on("dictBtnClicked",(()=>this.getUserDictWords())).on("addDifficultWordBtnClicked",((t,e)=>this.addUserWord(t,e))).on("deleteDifficultWordBtnClicked",((t,e)=>this.makeWordNew(t,e))).on("addLearnedWordBtnClicked",((t,e)=>this.addUserWord(t,e))).on("deleteLearnedWordBtnClicked",((t,e)=>this.makeWordNew(t,e)))}},ot=new class{constructor(){this.startAudioChallengeGame=()=>Q(this,void 0,void 0,(function*(){g.startFromTextbook=!1;const t=new j,e=new N(t),s=new O(t,e);yield s.getWordsList(),e.drawAudioChallengeGame()})),this.startAudioChallengeFromTextBook=t=>{g.startFromTextbook=!0;const e=new j,s=new N(e);new O(e,s),e.getWordsListFromTextbook(t),s.drawAudioChallengeGame()},this.startSprintGame=()=>Q(this,void 0,void 0,(function*(){p.startFromTextbook=!1;const t=new z,e=new J(t),s=new q(t,e);yield s.getWordsList(),e.buildBeReadyHTML()})),this.startSprintGameFromTextBook=t=>{g.startFromTextbook=!0},this.addGameLevel=t=>{this.gamesEntranceModel.addGameLevel(t)},this.gamesEntranceModel=new F,this.gamesEntranceView=new I(this.gamesEntranceModel),this.gamesEntranceView.on("sprintGameStarted",(()=>this.startSprintGame())).on("audioChallengeGameStarted",(()=>this.startAudioChallengeGame())).on("gameOptionClicked",(t=>this.addGameLevel(t)))}},ct=new class{constructor(){this.render=()=>{const t=o("main__wrapper"),e=(new H).render();t.innerHTML="",t.append(e)},this.mount=()=>{const t=o("main__wrapper"),e=document.getElementsByClassName("games-link__audiochallenge")[0],s=document.getElementsByClassName("games-link__sprint")[0];e.addEventListener("click",(()=>{t.innerHTML="",k.push("/audiochallenge")})),s.addEventListener("click",(()=>{t.innerHTML="",k.push("/sprint")}))}}},dt=new class{constructor(){this.init=()=>{return t=this,e=void 0,n=function*(){yield this.model.mount();const{dayData:t,allDaysData:e}=this.model.state;this.view.render(t),new Y.kL(o("newWordsChart"),Z(X("Количество новых слов",e.newWords,e.labels))),new Y.kL(o("learnedWordsChart"),Z(X("Количество изученных слов",e.learnedWords,e.labels)))},new((s=void 0)||(s=Promise))((function(i,a){function r(t){try{c(n.next(t))}catch(t){a(t)}}function o(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,o)}c((n=n.apply(t,e||[])).next())}));var t,e,s,n},this.model=new class{constructor(){this.mount=()=>K(this,void 0,void 0,(function*(){b.isAuth&&(yield this.getStatData())})),this.getStatData=()=>K(this,void 0,void 0,(function*(){const{userId:t,token:e}=b.currUserSettings,s=yield((t,e)=>{return s=void 0,n=void 0,a=function*(){try{const s=yield fetch(`${l}users/${t}/statistics`,{method:"GET",headers:{Authorization:"Bearer "+e,Accept:"application/json","Content-Type":"application/json"}});return console.log(s.status),yield yield s.json()}catch(t){console.error(t)}},new((i=void 0)||(i=Promise))((function(t,e){function r(t){try{c(a.next(t))}catch(t){e(t)}}function o(t){try{c(a.throw(t))}catch(t){e(t)}}function c(e){var s;e.done?t(e.value):(s=e.value,s instanceof i?s:new i((function(t){t(s)}))).then(r,o)}c((a=a.apply(s,n||[])).next())}));var s,n,i,a})(t,e),n=s.optional,i=d();console.log(i);const a=Object.keys(n);i in n&&(this.state.dayData=n[i]);const r=[],o=[];let c=0;if(0!==a.length){for(const t in n)r.push(n[t].audiochallenge.newWordsPerDay+n[t].sprint.newWordsPerDay),c+=n[t].audiochallenge.learnedWordsPerDay+n[t].sprint.learnedWordsPerDay,o.push(c);this.state.allDaysData={labels:a,learnedWords:o,newWords:r}}})),this.state=m}},this.view=new tt}},lt=o("main__wrapper");new class{constructor(t){this.render=t=>{return e=this,s=void 0,i=function*(){yield this.router.resolve(t.pathname).catch((()=>{}))},new((n=void 0)||(n=Promise))((function(t,a){function r(t){try{c(i.next(t))}catch(t){a(t)}}function o(t){try{c(i.throw(t))}catch(t){a(t)}}function c(e){var s;e.done?t(e.value):(s=e.value,s instanceof n?s:new n((function(t){t(s)}))).then(r,o)}c((i=i.apply(e,s||[])).next())}));var e,s,n,i},this.setRouter=()=>{k.listen((({location:t})=>{this.render(t).catch((t=>console.error(t)))}))},this.routes=t,this.router=new C.Z(t),this.setRouter()}}([{path:"",action:()=>{nt.view.renderMainTemplate(),document.title=`Главная ${it}`}},{path:"/textbook",action:()=>{rt.init().catch((t=>console.error(t))),document.title=`Учебник ${it}`}},{path:"/games",action:()=>{ct.render(),ct.mount(),document.title=`Миниигры ${it}`}},{path:"/audiochallenge",action:()=>{lt.innerHTML="",lt.append(ot.gamesEntranceView.buildAudioChallengeHTML()),document.title=`Игра Аудиовызов ${it}`}},{path:"/audiochallenge-pages",action:()=>st(void 0,void 0,void 0,(function*(){const t=yield rt.getGamesWordCollection(T.audioChallenge);console.log("audiochallenge",t),ot.startAudioChallengeFromTextBook(t),document.title=`Игра Аудиовызов ${it}`}))},{path:"/sprint",action:()=>{lt.innerHTML="",lt.append(ot.gamesEntranceView.buildSprintHTML()),document.title=`Игра Спринт ${it}`}},{path:"/sprint-pages",action:()=>st(void 0,void 0,void 0,(function*(){const t=yield rt.getGamesWordCollection(T.sprint);console.log("sprint",t),ot.startSprintGameFromTextBook(t),document.title=`Игра Спринт ${it}`}))},{path:"/stat",action:()=>{dt.init().catch((t=>console.error(t))),document.title=`Статистика ${it}`}},{path:"/login",action:()=>{at.view.renderLoginForm(),document.title=`Авторизация ${it}`}},{path:"/logout",action:()=>{b.setLSData(u,h),b.isAuth=!1,window.location.replace("/"),new x(o("header")).render(),document.title=`Выход ${it}`}},{path:"/auth",action:()=>{at.view.renderRegForm(),document.title=`Регистрация ${it}`}}]).render(k.location).catch((t=>console.error(t)))}},s={};function n(t){var i=s[t];if(void 0!==i)return i.exports;var a=s[t]={exports:{}};return e[t](a,a.exports,n),a.exports}n.m=e,t=[],n.O=(e,s,i,a)=>{if(!s){var r=1/0;for(l=0;l<t.length;l++){for(var[s,i,a]=t[l],o=!0,c=0;c<s.length;c++)(!1&a||r>=a)&&Object.keys(n.O).every((t=>n.O[t](s[c])))?s.splice(c--,1):(o=!1,a<r&&(r=a));if(o){t.splice(l--,1);var d=i();void 0!==d&&(e=d)}}return e}a=a||0;for(var l=t.length;l>0&&t[l-1][2]>a;l--)t[l]=t[l-1];t[l]=[s,i,a]},n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={179:0};n.O.j=e=>0===t[e];var e=(e,s)=>{var i,a,[r,o,c]=s,d=0;if(r.some((e=>0!==t[e]))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(c)var l=c(n)}for(e&&e(s);d<r.length;d++)a=r[d],n.o(t,a)&&t[a]&&t[a][0](),t[r[d]]=0;return n.O(l)},s=self.webpackChunkstandart=self.webpackChunkstandart||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var i=n.O(void 0,[102],(()=>n(481)));i=n.O(i)})();