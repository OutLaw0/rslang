(()=>{"use strict";var e,t={588:(e,t,s)=>{const n=()=>'\n\n<div class="main__container">\n<div class="article main__article">\n<div class="bubbles-top img-x3">\n<img src="./assets/bubbles.svg" alt="">\n</div>\n<div class="skat img-x15">\n    <img src="./assets/skat.svg" alt="">\n  </div>\n<h2 class="article__title">Погрузись в <span class="accent">океан</span> знаний вместе с RS Lang</h2>\n<p class="article__text">Добро пожаловать на образовательную игровую площадку, которая помогает детям выучить английский язык.\n  Также, у нас есть миниигры, которые помогают улучшить навыки мышления у детей.</p>\n  <a href="/textbook" class="btn btn-article" data-btn="textbook"> Начать </a>\n  <div class="article__bottom-nav"><button class="btn btn-bottom-nav advantages"> О приложении <img class="advantages" src="./assets/icon-right.svg" alt=""></button></div>\n  </div>\n  <div class="bubbles img-x5">\n  <img src="./assets/bubbles.svg" alt="">\n</div>\n<div class="whale img-x20">\n\n    <img src="./assets/whale.svg" alt="">\n  </div>\n  </div>\n  \x3c!--<div class="main__container advantages-screen">\n  <h2 class="article__title">Наши преимущества </h2>\n  </div>\n  <div class="main__container about-us-screen">\n  <h2 class="article__title">О нас </h2>\n  </div>--\x3e\n\n',r='<div class="loader">\n<div class="loading">\n  <h2>rslang fetching</h2>\n  <span></span>\n  <span></span>\n  <span></span>\n  <span></span>\n  <span></span>\n  <span></span>\n  <span></span>\n</div>\n</div>',i=()=>'\n<div class="main__container advantages">\n  <div class="article main__article">\n    <div class="bubbles-top img-x3">\n      <img src="./assets/bubbles.svg" alt="">\n    </div>\n    <div class="skat img-x15">\n      <img src="./assets/skat.svg" alt="">\n    </div>\n    <h2 class="article__title">О приложении </h2>\n    <div class="advantages__content">\n      <div class="advantages__item">\n        <img src="assets/textbook-img.jpg" alt="textbook-img">\n        <h4 class="advantages-title">Электронный учебник</h4>\n        <p class="advantages-text">База из более 3500 слов. Шесть уровней сложности. Удобная навигация. Запоминание\n          прогресса.</p>\n      </div>\n      <div class="advantages__item">\n        <h4 class="advantages-title second">Обучающие игры</h4>\n        <p class="advantages-text second">Игра "Аудиовызов" - поможет лучше воспринимать английский язык на слух.\n          Игра "Спринт" - развивает реакцию и интуитивное понимание языка.</p>\n        <img class="second" src="assets/games-img.jpg" alt="games-img">\n      </div>\n      <div class="advantages__item">\n        <img src="assets/stat-img.jpg" alt="stat-img">\n        <h4 class="advantages-title">Статистика</h4>\n        <p class="advantages-text">Мы собираем информацию о вашем прогрессе по дням и за весь период обучения!</p>\n      </div>\n    </div>\n    <div class="article__bottom-nav bottom-nav">\n      <span class="bottom-nav__back"> <img class="main" src="./assets/icon-left.svg" alt=""></span>\n      <button class="btn btn-bottom-nav team"> Разработчики <img class="team" src="./assets/icon-right.svg"\n          alt=""></button>\n    </div>\n  </div>\n  <div class="bubbles img-x5">\n    <img src="./assets/bubbles.svg" alt="">\n  </div>\n  <div class="whale img-x20">\n    <img src="./assets/whale.svg" alt="">\n  </div>\n',a=()=>'\n<div class="main__container advantages">\n<div class="article main__article">\n<div class="bubbles-top img-x3">\n<img src="./assets/bubbles.svg" alt="">\n</div>\n<div class="skat img-x15">\n    <img src="./assets/skat.svg" alt="">\n  </div>\n  <h2 class="article__title">Разработчики </h2>\n<div class="advantages__content">\n                            <div class="advantages__item">\n                                <img class="avatar" src="assets/ddd-fx-avatar.jpg" alt="ddd-fx-avatar">\n                                <h4 class="team__title"><a href="https://github.com/ddd-fx" class="github-logo"><img src="assets/github-logo.png" alt="github-logo"></a>Дмитрий</h4>\n                                <ul class="team__list" >\n                                <li class="team__list-item">Электронный учебник</li>\n                                <li class="team__list-item">Список слов</li>\n                                <li class="team__list-item">Игра Спринт</li>\n                              </ul>\n                            </div>\n                            <div class="advantages__item">\n                            <img class="avatar" src="assets/orla-avatar.jpg" alt="orla-avatar">\n                            <h4 class="team__title"><a href="https://github.com/orla90" class="github-logo"><img src="assets/github-logo.png" alt="github-logo"></a>Ольга</h4>\n                            <ul class="team__list" >\n                            <li class="team__list-item">Игра Аудиовызов</li>\n                            <li class="team__list-item">Игра Спринт</li>\n                            <li class="team__list-item">Страница игр</li>\n                          </ul>\n                        </div>\n                            <div class="advantages__item">\n                            <img class="avatar outlaw" src="assets/outlaw-avatar.jpg" alt="outlaw-avatar">\n                            <h4 class="team__title"><a href="https://github.com/OutLaw0" class="github-logo"><img src="assets/github-logo.png" alt="github-logo"></a>Валентин</h4>\n                            <ul class="team__list" >\n                            <li class="team__list-item">Главная страница</li>\n                            <li class="team__list-item">Авторизация </li>\n                            <li class="team__list-item">Статистика</li>\n                          </ul>\n                        </div>\n                    </div>\n  <div class="article__bottom-nav bottom-nav">\n  <span class="bottom-nav__back"> <img class="advantages" src="./assets/icon-left.svg" alt=""></span>\n  <button class="btn btn-bottom-nav main"> Главная <img class="main" src="./assets/icon-right.svg" alt=""></button></div>\n  </div>\n  <div class="bubbles img-x5">\n  <img src="./assets/bubbles.svg" alt="">\n</div>\n<div class="whale img-x20">\n    <img src="./assets/whale.svg" alt="">\n  </div>\n',o=(e,t)=>{const s=document.createElement(e);return t&&(Array.isArray(t)?s.classList.add(...t):s.classList.add(t)),s},d=e=>document.getElementsByClassName(e)[0],c=e=>{const t=d("modal");t.innerHTML=e,t.style.opacity="1",t.style.display="block",setTimeout((()=>{t.style.opacity="0",t.style.display="none"}),3e3)},l=()=>(new Date).toLocaleDateString().replace(/\./g,"-"),h=["assets/landing-background.jpg","assets/outlaw-avatar.jpg","assets/orla-avatar.jpg","assets/ddd-fx-avatar.jpg","assets/textbook-img.jpg","assets/games-img.jpg","assets/stat-img.jpg","assets/bubbles.svg","assets/whale.svg","assets/skat.svg","assets/github-logo.png","assets/games/headphones.svg","assets/games/fish.svg"],u="https://react-rslang-be-13.herokuapp.com/",p={userEmail:"",userName:"User name",avatarURL:"",token:"",refreshToken:"",expireOn:0,currPage:0,currGroup:0,currWord:"",userId:""},g="default-user",m={level:0,wordsPerPage:5,gamePage:0,textbookPage:0,wordCount:0,soundingWordId:"",learnedWords:[],unlearnedWords:[],startFromTextbook:!1,wordOfShakedArrCount:0,shakedWordsArray:[],sequenceOfCorrectAnswers:0,tempSequenceOfCorrectAnswers:0,learnedPerGame:0,newWords:0},w={level:0,startFromTextbook:!1,learnedWords:[],unlearnedWords:[],sequenceOfCorrectAnswers:0,tempSequenceOfCorrectAnswers:0,learnedPerGame:0,newWords:0},v={audiochallenge:{newWordsPerDay:0,learnedWordsPerDay:0,longestSeries:0,correctAnswers:0,incorrectAnswers:0},sprint:{newWordsPerDay:0,learnedWordsPerDay:0,longestSeries:0,correctAnswers:0,incorrectAnswers:0}},_={dayData:v,allDaysData:{labels:[l()],learnedWords:[0],newWords:[0]}};var f=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function a(e){try{d(n.next(e))}catch(e){i(e)}}function o(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,o)}d((n=n.apply(e,t||[])).next())}))};const b=e=>1e3*+JSON.parse(atob(e.split(".")[1])).exp,k=e=>!!e&&Date.now()>e;class x{}x.createLocalKey=e=>`rsl13-${e}`,x.loadData=e=>{return t=void 0,s=void 0,r=function*(){return fetch(e).then((e=>e.json()))},new((n=void 0)||(n=Promise))((function(e,i){function a(e){try{d(r.next(e))}catch(e){i(e)}}function o(e){try{d(r.throw(e))}catch(e){i(e)}}function d(t){var s;t.done?e(t.value):(s=t.value,s instanceof n?s:new n((function(e){e(s)}))).then(a,o)}d((r=r.apply(t,s||[])).next())}));var t,s,n,r},x.setLSData=(e,t)=>{const s=JSON.stringify(t);window.localStorage.setItem(x.createLocalKey(e),s)},x.removeLSData=e=>{window.localStorage.removeItem(x.createLocalKey(e))},x.getLSData=e=>{const t=window.localStorage.getItem(x.createLocalKey(e));if(t)return JSON.parse(t);const s=window.localStorage.getItem(x.createLocalKey(g));return s?JSON.parse(s):p},x.initLS=e=>{const t=x.getLSData(x.createLocalKey(e));x.currUserID=e,x.currUserSettings=t,""!==x.currUserSettings.token&&(x.isAuth=!0)},x.saveToken=(e,t)=>{x.currUserSettings.token=e,x.currUserSettings.refreshToken=t,x.currUserSettings.expireOn=b(e)-3e5,x.setLSData(g,x.currUserSettings)},x.currUserID="",x.isAuth=!1,x.currUserSettings=p;var W=s(682);const y=(0,W.lX)(),C=class{constructor(e){this.render=()=>{const e=x.isAuth;this.nav.innerHTML=(e=>`\n<a href="/"><h1>RS Lang</h1></a>\n<nav class="nav">\n<ul class="nav__list">\n<li>\n<a href="/"><button class="btn" data-btn="main"> Главная </button></a>\n</li>\n<li>\n  <a href="/textbook"><button class="btn js-menu-textbook-btn" data-btn="textbook"> Учебник </button></a>\n</li>\n<li>\n  <a href="/games" ><button class="btn" data-btn="games"> Миниигры </button></a>\n</li>\n<li>\n  <a href="/stat"><button  class="btn" data-btn="stat"> Статистика </button></a>\n</li>\n<li>\n${e?'<a href="/logout"><button class="btn btn-logout " data-btn="login"> Выйти </button></a>':'<a href="/login"><button class="btn btn-login" data-btn="login"> Войти </button></a>'}\n</ul>\n</nav>\n\x3c!--<div class="shadow"></div>--\x3e\n<div class="hamburger" id="hamburger-1">\n<span class="line"></span> \n<span class="line"></span> \n<span class="line"></span>\n</div>\n`)(e),this.parent.innerHTML="",this.parent.append(this.nav)},this.bind=()=>{this.nav.addEventListener("click",(e=>{e.preventDefault(),"hamburger"!==e.target.classList[0]&&"line"!==e.target.classList[0]||this.openNav();const t=e.target.closest("a");if(t){const e=t.pathname;y.push(e)}}))},this.openNav=()=>{d("hamburger").classList.toggle("is-active"),d("nav").classList.toggle("is-active")},this.closeNav=e=>{const t=d("hamburger");if(t){const s=d("nav"),n=e.target,r=n.classList.contains("nav__list"),i=n===t||t.contains(n);!s.classList.contains("is-active")||i||r||(t.classList.remove("is-active"),s.classList.remove("is-active"))}},this.nav=o("div",["wrapper","header__wrapper"]),this.parent=e,this.bind()}};var S=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function a(e){try{d(n.next(e))}catch(e){i(e)}}function o(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,o)}d((n=n.apply(e,t||[])).next())}))};const B=()=>S(void 0,void 0,void 0,(function*(){const{userId:e,refreshToken:t,expireOn:s}=x.currUserSettings;if(k(s)){if(!k(b(t))){const s=yield((e,t)=>f(void 0,void 0,void 0,(function*(){try{const s=yield fetch(`${u}users/${e}/tokens`,{method:"GET",headers:{Authorization:"Bearer "+t,Accept:"application/json","Content-Type":"application/json"}});return yield yield s.json()}catch(e){console.error(e)}})))(e,t);return x.saveToken(s.token,s.refreshToken),!0}x.isAuth=!1,x.setLSData(g,p),window.location.replace("/login")}return!1}));class A{constructor(){this.mount=()=>S(this,void 0,void 0,(function*(){x.initLS(g),x.isAuth&&(yield B())}))}}const L=(e,t)=>S(void 0,void 0,void 0,(function*(){return(yield B())&&(t.headers.Authorization=`Bearer ${x.currUserSettings.token}`),fetch(e,t)}));var T=s(33);var M,P,E,U,D=s(527);!function(e){e.learned="0",e.difficult="1",e.new="2"}(M||(M={})),function(e){e.audioChallenge="audiochallenge",e.sprint="sprint"}(P||(P={})),function(e){e[e.learnedForNew=3]="learnedForNew",e[e.learnedForDifficult=5]="learnedForDifficult"}(E||(E={})),function(e){e.get="GET",e.post="POST",e.put="PUT",e.del="DELETE"}(U||(U={}));var O=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function a(e){try{d(n.next(e))}catch(e){i(e)}}function o(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,o)}d((n=n.apply(e,t||[])).next())}))};class $ extends D.TypedEmitter{constructor(){super(),this.getTextBookList=()=>O(this,void 0,void 0,(function*(){const e=`words?group=${x.currUserSettings.currGroup}&page=${x.currUserSettings.currPage}`,t=yield fetch(u+e).catch();this.wordsChunk=yield t.json(),x.currUserSettings.userId&&(yield this.updateAllCollections()),this.emit("getTextBookList")})),this.getWordCardData=(e,t)=>{const s=t?this.difficultWords.filter((t=>t.id===e))[0]:this.wordsChunk.filter((t=>t.id===e))[0];this.emit("getWordCardData",s)},this.getAggregatedWordsForCurrGroup=e=>O(this,void 0,void 0,(function*(){const t=`users/${x.currUserSettings.userId}/aggregatedWords?group=${x.currUserSettings.currGroup}&wordsPerPage=600&filter={"userWord.difficulty":"${e}"}`;yield this.getAggregatedWords(t,e)})),this.getUserDictWords=()=>O(this,void 0,void 0,(function*(){yield this.updateUserWordsCollection(M.difficult),this.emit("getUserDict")})),this.updateUserWordsCollection=e=>O(this,void 0,void 0,(function*(){const t=`users/${x.currUserSettings.userId}/aggregatedWords?wordsPerPage=600&filter={"userWord.difficulty":"${e}"}`;yield this.getAggregatedWords(t,e)})),this.getAggregatedWords=(e,t)=>O(this,void 0,void 0,(function*(){try{const s=yield L(u+e,{method:"GET",headers:this.API_USER_REQ_HEADER}),n=(yield s.json())[0].paginatedResults.slice();t===M.difficult&&(this.difficultWords=this.mapUserWordsID(n)),t===M.learned&&(this.learnedWords=this.mapUserWordsID(n),d("pagination ")&&this.emit("updateMarkedPages")),t===M.new&&(this.newWords=this.mapUserWordsID(n))}catch(e){console.error(e)}})),this.addUserWord=(e,t)=>O(this,void 0,void 0,(function*(){const s=`users/${x.currUserSettings.userId}/words/${t}`;try{yield L(u+s,{method:"POST",headers:this.API_USER_REQ_HEADER,body:JSON.stringify(e)}),e.difficulty===M.learned&&(yield this.updateUserWordsCollection(M.learned)),e.difficulty===M.difficult&&(yield this.updateUserWordsCollection(M.difficult))}catch(e){console.error(e)}})),this.updateUserWord=(e,t,s,n,r)=>O(this,void 0,void 0,(function*(){const i=r?this.getAggregatedUserWordOptionsForNew(e,s):this.getAggregatedUserWordOptions(e,s,n),a=`users/${x.currUserSettings.userId}/words/${e}`;try{yield L(u+a,{method:"PUT",headers:this.API_USER_REQ_HEADER,body:JSON.stringify(i)}),t&&this.emit("removeDifficultWordElem",e),yield this.updateAllCollections()}catch(e){console.error(e)}})),this.getAggregatedUserWordOptions=(e,t,s)=>{if(s){const s=this.newWords.find((t=>t.id===e)).userWord;return s.difficulty=t,s}if(t===M.difficult&&!s){const s=this.learnedWords.find((t=>t.id===e)).userWord;return s.difficulty=t,s}if(t===M.learned&&!s){const s=this.difficultWords.find((t=>t.id===e)).userWord;return s.difficulty=t,s}},this.getAggregatedUserWordOptionsForNew=(e,t)=>{if(t===M.difficult){const t=this.difficultWords.find((t=>t.id===e)).userWord;return t.difficulty=M.new,t}if(t===M.learned){const t=this.learnedWords.find((t=>t.id===e)).userWord;return t.difficulty=M.new,t}},this.mapUserWordsID=e=>e.map((e=>{var{_id:t}=e,s=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s}(e,["_id"]);return Object.assign({id:t},s)})),this.updateAllCollections=()=>O(this,void 0,void 0,(function*(){yield this.getAggregatedWordsForCurrGroup(M.new),yield this.getAggregatedWordsForCurrGroup(M.learned),yield this.getAggregatedWordsForCurrGroup(M.difficult)})),this.getWordsForGames=()=>O(this,void 0,void 0,(function*(){const e=`users/${x.currUserSettings.userId}/aggregatedWords?group=${x.currUserSettings.currGroup}&wordsPerPage=600&filter={"$or":[{"userWord.difficulty":"${M.difficult}"},{"userWord.difficulty":"${M.new}"},{"userWord":null}]}`;try{const t=yield L(u+e,{method:"GET",headers:this.API_USER_REQ_HEADER});return(yield t.json())[0].paginatedResults.slice()}catch(e){console.error(e)}})),this.API_USER_REQ_HEADER={Authorization:`Bearer ${x.currUserSettings.token}`,Accept:"application/json","Content-Type":"application/json"},this.wordsChunk=[],this.difficultWords=[],this.learnedWords=[],this.newWords=[]}}const I='\n  <button class=\'close-readme-btn\'>Закрыть</button>\n  <h2 class=\'instructions-title\'>Руководство</h2>\n  <p class=\'instructions-svg-block\'>\n    <?xml version="1.0" encoding="utf-8"?>\n    <svg class="instructions-bin" fill="#069b00" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 1000 1000" xml:space="preserve">\n    <g><g transform="translate(0.000000,511.000000) scale(0.100000,-0.100000)"><path d="M8388.5,4309c-130-26-290-94-396.1-164c-64-44-844.1-892.1-2288.4-2496.4C4497.9,312.4,3487.7-807.8,3457.7-837.8l-54-58l-698.1,604.1c-782.1,674.1-880.1,740.1-1170.2,782.1c-306,44-652.1-66-868.1-276C229.2-207.7,75.2-509.7,103.2-893.8c22-292,132-496.1,406.1-758.1c610.1-582.1,2448.4-2242.4,2554.4-2306.4c180-110,308.1-144,544.1-144c156,0,230,12,336,48c290,98,190-12,3104.5,3378.5c1840.3,2142.3,2706.4,3160.5,2740.4,3234.5c150,304,148,688.1-4,978.1c-64,122-384.1,446.1-572.1,580.1c-176,126-376.1,194-584.1,204C8540.5,4325,8432.5,4319,8388.5,4309z"/></g></g>\n    </svg>\n    <span><b><i>Добавить слово в изученные.</i></b> <br><br>\n      Если слово добавлено в изученные, оно не будет появляться в играх, которые запускаются со страницы\n      учебника, но будет присутствовать в играх, которые запускаются из меню. В последнем случае, \n      если в слове будет допущена ошибка, оно автоматически удаляется из изученных. <br><br>\n      Кроме того, слово автоматически попадает в изученные, если пользователь правильно угадает его в \n      играх 3 раза подряд. Если же пользователь ошибётся на изученном слове, то оно будет удалено из\n      этой категории. <br><br>\n      Если все слова на странице являются изученными, то в пагинации учебника данная страница зачёркивается,\n      и игры на этой страницы становятся недоступны. <br><br>\n      Если отметить изученное слово, как сложное, оно автоматически удалится из изученных.<br><br><br>\n      </span>\n  </p>\n  \n  <p class=\'instructions-svg-block\'>\n    <?xml version="1.0" encoding="UTF-8"?>\n    <svg class=\'instructions-star\' fill="#fffc00" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 105 105">\n    <path d="M54,5 86,105 1,43H107L22,105"/></svg>\n    <span><b><i>Добавить слово в сложные.</i></b> <br><br>\n      Все слова, добавленные в сложные, дополнительно отображаются в разделе "Сложные слова". <br><br>\n      Сложное слово автоматически попадает в изученные, если пользователь правильно угадает его в \n      играх 5 раза подряд. <br><br>\n      Если отметить сложное слово, как изученное, оно автоматически удалится из раздела "Сложные слова".\n    </span>\n  </p> <br><br>\n  <div class=\'other-instructions\'>\n    <p>Если игра запускается со страницы учебника, то в неё попадают только слова с текущей страницы. Если пользователь авторизован,\n    то в игру будут попадать только неизученные слова с текущей или предыдущих страниц учебника.\n    </p>\n    <p>Игры и дополнительный функционал на странице учебника недоступны неавторизованным пользователям.</p>\n  </div>\n  <h2 class=\'instructions-goodluck\'>Удачи в обучении!</h2>\n';class R extends D.TypedEmitter{constructor(e,t){super(),this.drawDict=()=>{this.textBookView.textBookViewUtils.createTextBookMain(`\n  <div class='textbook-title-wrapper'>\n    <button class='textbook-instructions-btn js-textbook-instructions-btn'>Readme</button>\n    <button class='textbook-title-btn'>Вернуться в учебник</button>\n    <button class='textbook-dictionary js-textbook-dictionary' disabled>Сложные слова</button>\n  </div>\n  <div class='textbook-readme-block hide'>\n    ${I}\n  </div>\n  \n  <h2 class='words-title'>Сложные слова:</h2>\n  <div class='textbook-words js-textbook-words'>\n    <section class='words-btns js-words-btns user-words js-user-words'></section>\n    <article class='word-description js-word-description'></article>\n  </div>\n`),this.textBookView.textBookViewUtils.addReadMeListeners(),this.addBackToTextBookListenerBtn(),this.textBookModel.difficultWords.length>0?(this.textBookView.appendWordsBtns(),this.drawUserTextBookElems(),this.textBookView.textBookViewUtils.disableDictBtn(),this.textBookView.textBookViewUtils.checkActiveWordsBtns(x.currUserSettings.currWord=""),this.makeStarBtnActive()):d("words-title").innerHTML+=" вы не добавляли сложные слова"},this.drawUserTextBookElems=()=>{this.createStarBtn(),this.createBinBtn(),this.addDictBtnListener(),this.checkStarBtnActive(),this.onDictPage||this.checkBinBtnActive()},this.createStarBtn=()=>{[...document.getElementsByClassName("words-btns__btn")].forEach((e=>{const t=o("div","word-btn__star");t.innerHTML='<?xml version="1.0" encoding="UTF-8"?>\n<svg class="star-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">\n<path d="M54,5 86,105 1,43H107L22,105"/>\n </svg>',t.addEventListener("click",(e=>{e.stopPropagation();const t=e.currentTarget.firstElementChild,s=t.closest(".words-btns__btn").id;s&&!t.classList.contains("star-svg--active")?(this.emit.call(this.textBookView,"addDifficultWordBtnClicked",s,M.difficult),t.classList.add("star-svg--active")):(this.emit.call(this.textBookView,"deleteDifficultWordBtnClicked",s,M.difficult),t.classList.remove("star-svg--active"))})),e.append(t)}))},this.createBinBtn=()=>{[...document.getElementsByClassName("words-btns__btn")].forEach((e=>{const t=o("div","word-btn__bin");t.innerHTML='<?xml version="1.0" encoding="utf-8"?>\n<svg class="bin-svg" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve">\n<g><g transform="translate(0.000000,511.000000) scale(0.100000,-0.100000)"><path d="M8388.5,4309c-130-26-290-94-396.1-164c-64-44-844.1-892.1-2288.4-2496.4C4497.9,312.4,3487.7-807.8,3457.7-837.8l-54-58l-698.1,604.1c-782.1,674.1-880.1,740.1-1170.2,782.1c-306,44-652.1-66-868.1-276C229.2-207.7,75.2-509.7,103.2-893.8c22-292,132-496.1,406.1-758.1c610.1-582.1,2448.4-2242.4,2554.4-2306.4c180-110,308.1-144,544.1-144c156,0,230,12,336,48c290,98,190-12,3104.5,3378.5c1840.3,2142.3,2706.4,3160.5,2740.4,3234.5c150,304,148,688.1-4,978.1c-64,122-384.1,446.1-572.1,580.1c-176,126-376.1,194-584.1,204C8540.5,4325,8432.5,4319,8388.5,4309z"/></g></g>\n</svg>\n',t.addEventListener("click",(e=>{e.stopPropagation();const t=e.currentTarget.firstElementChild,s=t.closest(".words-btns__btn").id;s&&!t.classList.contains("bin-svg--active")?(this.emit.call(this.textBookView,"addLearnedWordBtnClicked",s,M.learned),t.classList.add("bin-svg--active")):(this.emit.call(this.textBookView,"deleteLearnedWordBtnClicked",s,M.learned),t.classList.remove("bin-svg--active"))})),e.append(t)}))},this.removeDictElem=e=>{document.getElementById(e).remove()},this.addDictBtnListener=()=>{const e=d("js-textbook-dictionary");e.disabled=!1,e.addEventListener("click",(()=>{this.onDictPage=!0,this.emit.call(this.textBookView,"dictBtnClicked")}))},this.addBackToTextBookListenerBtn=()=>{d("textbook-title-btn").addEventListener("click",(()=>{this.onDictPage=!1,x.currUserSettings.currWord="",this.textBookView.drawTextBook()}))},this.makeStarBtnActive=()=>{[...document.getElementsByClassName("star-svg")].forEach((e=>e.classList.add("star-svg--active")))},this.checkStarBtnActive=()=>{this.textBookModel.difficultWords.length>0&&!this.onDictPage?this.textBookModel.wordsChunk.forEach((e=>{const t=JSON.stringify(this.textBookModel.difficultWords),s=this.textBookView.textBookViewUtils.getStarBtn(e.id);t.includes(e.id)?s.classList.add("star-svg--active"):s.classList.remove("star-svg--active")})):0!==this.textBookModel.difficultWords.length||this.onDictPage||[...document.getElementsByClassName("star-svg")].forEach((e=>e.classList.remove("star-svg--active")))},this.checkBinBtnActive=()=>{this.textBookModel.learnedWords.length>0?this.textBookModel.wordsChunk.forEach((e=>{const t=JSON.stringify(this.textBookModel.learnedWords),s=this.textBookView.textBookViewUtils.getBinBtn(e.id);t.includes(e.id)?s.classList.add("bin-svg--active"):s.classList.remove("bin-svg--active")})):[...document.getElementsByClassName("bin-svg")].forEach((e=>e.classList.remove("bin-svg--active")))},this.markPagesLearned=()=>{for(let e=0;e<30;e++)20===this.textBookModel.learnedWords.filter((t=>t.page===e)).length&&this.markPageLearned(e,!0)},this.markPageLearned=(e,t)=>{const s=d(`page-${e}`),n=d("textbook-words");t?(s.classList.add("learned-page"),n.classList.add("textbook-words--learned")):(s.classList.remove("learned-page"),n.classList.remove("textbook-words--learned"))},this.updateMarkedPages=()=>{const e=x.currUserSettings.currPage;20===this.textBookModel.learnedWords.filter((t=>t.page===e)).length?this.markPageLearned(e,!0):this.markPageLearned(e,!1)},this.checkGameBtnsActive=()=>{const e=d(`page-${x.currUserSettings.currPage}`),t=document.getElementsByClassName("textbook-games-btn");e.classList.contains("learned-page")?[...t].forEach((e=>e.disabled=!0)):[...t].forEach((e=>e.disabled=!1))},this.addWordDescriptionGamesBlock=()=>{d(" word-description__text-example-translate").insertAdjacentHTML("afterend","\n<h4 class='word-description__stats-title'>Слово было угадано в играх:</h4>\n<div class='word-description__stats-block'>\n  <div class='word-description__game-stats-block'>\n    <p>Аудиовызов:</p>\n    <p class='word-description__challenge-stats'></p>\n  </div>\n  <div class='word-description__game-stats-block'>\n    <p>Спринт:</p>\n    <p class='word-description__sprint-stats'></p>\n  </div>\n</div>\n")},this.addDataWordDescriptionGamesBlock=()=>{const e=d("word-description__challenge-stats"),t=d("word-description__sprint-stats"),s=d("words-btns__btn--active"),n=[...this.textBookModel.difficultWords,...this.textBookModel.learnedWords,...this.textBookModel.newWords].find((e=>e.id===s.id));if(n){const s=+n.userWord.optional.correctAnswersChallenge+ +n.userWord.optional.incorrectAnswersChallenge,r=+n.userWord.optional.correctAnswersSprint+ +n.userWord.optional.incorrectAnswersSprint;e.textContent=`${+n.userWord.optional.correctAnswersChallenge} из ${s}`,t.textContent=`${+n.userWord.optional.correctAnswersSprint} из ${r}`}else e.textContent="0 из 0",t.textContent="0 из 0"},this.textBookModel=e,this.textBookView=t,this.onDictPage=!1}}class N extends D.TypedEmitter{constructor(e,t){super(),this.createTextBookMain=e=>{const t=d("main__wrapper");t.innerHTML="",t.insertAdjacentHTML("afterbegin",e)},this.addReadMeListeners=()=>{const e=d("textbook-instructions-btn"),t=d("textbook-readme-block");e.addEventListener("click",(()=>{t.classList.toggle("hide"),t.classList.toggle("overlay")})),d("close-readme-btn").addEventListener("click",(()=>{t.classList.toggle("hide"),t.classList.toggle("overlay")}))},this.checkGamesBtnsColor=()=>{const e=`group-${x.currUserSettings.currGroup}`;[...document.getElementsByClassName("textbook-games-btn")].forEach((t=>t.classList.add(e)))},this.checkWordDescriptionGamesBlockColor=()=>{const e=`group-${x.currUserSettings.currGroup}`;[...document.getElementsByClassName("word-description__game-stats-block")].forEach((t=>t.classList.add(e)))},this.getCurrCollection=()=>this.textBookView.userTextBookView.onDictPage?this.textBookModel.difficultWords:this.textBookModel.wordsChunk,this.checkActiveWordsBtns=(e="")=>{const t=document.getElementsByClassName("words-btns__btn--active");t.length>0&&[...t].forEach((e=>e.classList.remove("words-btns__btn--active")));const s=this.getCurrCollection(),n=document.getElementsByClassName("words-btns__btn");if(e){const t=s.map((e=>e.id)).indexOf(`${e}`);n[t].classList.add("words-btns__btn--active"),this.textBookView.createWordCard(s[t])}else n[0].classList.add("words-btns__btn--active"),this.textBookView.createWordCard(s[0])},this.checkActiveDifficultyBtn=e=>{const t=document.getElementsByClassName("textbook-difficulty-group__btn--active");t.length>0&&[...t].forEach((e=>e.classList.remove("textbook-difficulty-group__btn--active"))),document.getElementsByClassName("textbook-difficulty-group__btn")[e].classList.add("textbook-difficulty-group__btn--active")},this.checkActivePage=e=>{const t=document.getElementsByClassName("pagination__page-btn--active");t.length>0&&[...t].forEach((e=>e.classList.remove("pagination__page-btn--active"))),document.getElementsByClassName("pagination__page-btn")[e].classList.add("pagination__page-btn--active")},this.disableDictBtn=()=>{d("js-textbook-dictionary").disabled=!0},this.getStarBtn=e=>document.getElementById(e).childNodes[2].firstElementChild,this.getBinBtn=e=>document.getElementById(e).childNodes[3].firstElementChild,this.addGameBtnsListeners=()=>{d("textbook-games-btn-challenge").addEventListener("click",(()=>{y.push("/audiochallenge-pages")})),d("textbook-games-btn-sprint").addEventListener("click",(()=>{y.push("/sprint-pages")}))},this.textBookModel=e,this.textBookView=t}}class j extends D.TypedEmitter{constructor(e){super(),this.drawTextBook=()=>{this.textBookViewUtils.createTextBookMain(`\n<div class='textbook-title-wrapper'>\n  <button class='textbook-instructions-btn js-textbook-instructions-btn'>Readme</button>\n  <h2 class='textbook-title'>Учебник</h2>\n  <button class='textbook-dictionary js-textbook-dictionary' disabled>Сложные слова</button>\n</div>\n<div class='textbook-readme-block hide'>\n  ${I}\n</div>\n<p class='textbook-subtitle'>Уровни сложности:</p>\n<div class='textbook-difficulty-group js-textbook-difficulty-group'></div>\n<div class='textbook-games-block'>\n  <h2 class='textbook-games-title'>Игры:</h2>\n  <button class='textbook-games-btn textbook-games-btn-challenge'>Аудиовызов</button>\n  <button class='textbook-games-btn textbook-games-btn-sprint'>Спринт</button>\n</div>\n<h2 class='words-title'>Слова для изучения:</h2>\n<div class='textbook-words js-textbook-words'>\n  <section class='words-btns js-words-btns'></section>\n  <article class='word-description js-word-description'></article>\n</div>\n<div class='pagination js-pagination'></div>\n`),this.textBookViewUtils.addReadMeListeners(),this.createWordsGroupBtns(),this.textBookViewUtils.checkActiveDifficultyBtn(x.currUserSettings.currGroup),this.textBookViewUtils.addGameBtnsListeners(),this.appendWordsBtns(),this.textBookViewUtils.checkActiveWordsBtns(x.currUserSettings.currWord),this.createPagination(),this.textBookViewUtils.checkActivePage(x.currUserSettings.currPage),x.currUserSettings.userId&&(this.textBookViewUtils.checkGamesBtnsColor(),this.userTextBookView.drawUserTextBookElems(),this.userTextBookView.markPagesLearned(),this.userTextBookView.updateMarkedPages(),this.userTextBookView.checkGameBtnsActive())},this.createWordsGroupBtns=()=>{const e=d("textbook-difficulty-group"),t=["Beginner/Elementary","Pre Intermediate","Intermediate","Upper Intermediate","Advanced","Proficient"];for(let s=0;s<t.length;s++){const n=o("button",["textbook-difficulty-group__btn",`group-${s}`,"js-textbook-difficulty-group__btn"]);n.addEventListener("click",(()=>this.emit("groupBtnClicked",s)));const r=o("h3");r.textContent=t[s],n.append(r),e.append(n)}},this.appendWordsBtns=()=>{const e=d("js-words-btns");this.textBookViewUtils.getCurrCollection().forEach((t=>{e.append(this.createWordsBtns({id:t.id,word:t.word,wordTranslate:t.wordTranslate,group:t.group}))}))},this.createWordsBtns=({id:e,word:t,wordTranslate:s,group:n})=>{const r=o("div",["words-btns__btn",`group-${n}`]);r.id=e,r.addEventListener("click",(()=>{x.currUserSettings.currWord!==e&&(this.emit("wordBtnClicked",e,this.userTextBookView.onDictPage),this.textBookViewUtils.checkActiveWordsBtns(e))}));const i=o("h3","word-btn-title");i.textContent=t;const a=o("p","word-btn-translate");return a.textContent=s,r.append(i,a),r},this.createWordCard=e=>{d("js-word-description").innerHTML="\n    <img class='word-description__word-image' src='' alt='word image'>\n    <div class='word-description__text-container'>\n      <div class='title-audio-block'>\n        <h3 class='word-description__word-title'></h3>\n      </div>\n      <p class='word-description__word-translate'></p>\n      <p class='word-description__word-transcript'></p>\n      <div class='title-audio-block'>\n        <h4 class='word-description__word-meaning-title'>Значение</h4>\n      </div>\n      <p class='word-description__text-meaning'></p>\n      <p class='word-description__text-meaning-translate'></p>\n      <div class='title-audio-block'>\n        <h4 class='word-description__word-example-title'>Пример</h4>\n      </div>\n      <p class='word-description__text-example'></p>\n      <p class='word-description__text-example-translate'></p>\n  \n    </div> ",d("word-description__word-image").src=u+e.image;const t=d("word-description__word-title");t.textContent=e.word,t.after(this.createAudioBtn(e.audio)),d("word-description__word-translate").textContent=e.wordTranslate,d("word-description__word-transcript").innerHTML=`<b>${e.transcription}</b>`,d("word-description__word-meaning-title").after(this.createAudioBtn(e.audioMeaning)),d("word-description__text-meaning").innerHTML=e.textMeaning,d("word-description__text-meaning-translate").innerHTML=e.textMeaningTranslate,d("word-description__word-example-title").after(this.createAudioBtn(e.audioExample)),d("word-description__text-example").innerHTML=e.textExample,d("word-description__text-example-translate").innerHTML=e.textExampleTranslate,x.currUserSettings.userId&&(this.userTextBookView.addWordDescriptionGamesBlock(),this.userTextBookView.addDataWordDescriptionGamesBlock(),this.textBookViewUtils.checkWordDescriptionGamesBlockColor())},this.createAudioBtn=e=>{const t=o("button",["audio-btn","js-audio-btn"]);return t.addEventListener("click",(()=>{(()=>{return t=this,s=void 0,r=function*(){const t=new Audio(u+e);yield t.play()},new((n=void 0)||(n=Promise))((function(e,i){function a(e){try{d(r.next(e))}catch(e){i(e)}}function o(e){try{d(r.throw(e))}catch(e){i(e)}}function d(t){var s;t.done?e(t.value):(s=t.value,s instanceof n?s:new n((function(e){e(s)}))).then(a,o)}d((r=r.apply(t,s||[])).next())}));var t,s,n,r})().catch((e=>console.error(e)))})),t},this.createPagination=()=>{for(let e=1;e<=30;e++){const t=o("button",["pagination__page-btn","page-"+(e-1)]);t.textContent=`${e}`,t.addEventListener("click",(()=>this.emit("pageBtnClicked",e-1))),d("js-pagination").append(t)}},this.textBookModel=e,this.userTextBookView=new R(e,this),this.textBookViewUtils=new N(e,this),this.textBookModel.on("getTextBookList",(()=>this.drawTextBook())).on("getWordCardData",(e=>this.createWordCard(e))).on("getUserDict",(()=>this.userTextBookView.drawDict())).on("removeDifficultWordElem",(e=>this.userTextBookView.removeDictElem(e))).on("updateMarkedPages",(()=>this.userTextBookView.updateMarkedPages())).on("updateMarkedPages",(()=>this.userTextBookView.checkGameBtnsActive()))}}var G=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function a(e){try{d(n.next(e))}catch(e){i(e)}}function o(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,o)}d((n=n.apply(e,t||[])).next())}))};const V=(0,W.lX)();class H extends D.TypedEmitter{constructor(){super(),this.render=()=>this.games,this.bind=()=>{this.games.addEventListener("click",(e=>{e.preventDefault();const t=e.target.closest("a");if(t){const e=t.pathname;V.push(e)}}))},this.games=o("section","games-section"),this.games.innerHTML='\n<h2 class="games-title">Игры</h2>\n<div class="img-x5 position-left">\n  <img src="./assets/bubbles.svg" alt="bubbles"/>\n</div>\n<article class="games-wrapper">\n  <a href="/audiochallenge" class="games-link games-link__audiochallenge">\n    <figure class="games-figure">\n      <p>\n        <img\n          src="../../assets/games/headphones.svg"\n          alt="headphones"\n          class="games-figure__image"\n        />\n      </p>\n      <figcaption class="games-figcaption">Аудиовызов</figcaption>\n    </figure>\n  </a>\n  <a href="/sprint" class="games-link games-link__sprint">\n    <figure class="games-figure">\n      <p>\n        <img\n          src="../../assets/games/fish.svg"\n          alt="fish"\n          class="games-figure__image games-figure__image_fish"\n        />\n      </p>\n      <figcaption class="games-figcaption">Спринт</figcaption>\n    </figure>\n  </a>\n</article>\n<div class="img-x5 position-right">\n  <img src="./assets/bubbles.svg" alt="bubbles" />\n</div>\n',this.bind()}}var F=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function a(e){try{d(n.next(e))}catch(e){i(e)}}function o(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,o)}d((n=n.apply(e,t||[])).next())}))};class q{constructor(e,t){this.getWordsList=()=>F(this,void 0,void 0,(function*(){const e=this.getRandomPage(),t=`words?group=${m.level}&page=${e}`;yield this.audioChallengeModel.getWordsList(t)})),this.getRandomPage=()=>{const e=31*Math.random();return Math.floor(e)},this.turnGamePage=()=>{this.audioChallengeModel.turnGamePage()},this.changeWord=()=>{this.audioChallengeModel.changeWord()},this.getWordData=(e,t)=>{this.audioChallengeModel.getWordData(e,t)},this.getNewWordData=e=>F(this,void 0,void 0,(function*(){const t=this.getRandomPage(),s=`words?group=${m.level}&page=${t}`;yield this.audioChallengeModel.getNewWordData(s,e)})),this.audioChallengeModel=e,this.audioChallengeView=t,this.audioChallengeView.on("nextBtnClicked",(()=>this.turnGamePage())).on("wordOfShakedArrCountAdded",(()=>this.changeWord())).on("pressedContinueGameBtn",(()=>this.getWordsList())).on("rightAnswerClicked",((e,t)=>this.getWordData(e,t))).on("wrongAnswerClicked",((e,t)=>this.getWordData(e,t)))}}var J=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function a(e){try{d(n.next(e))}catch(e){i(e)}}function o(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,o)}d((n=n.apply(e,t||[])).next())}))};const Q=(e,t)=>J(void 0,void 0,void 0,(function*(){try{const s=yield fetch(`${u}users/${e}/statistics`,{method:"GET",headers:{Authorization:"Bearer "+t,Accept:"application/json","Content-Type":"application/json"}});return yield yield s.json()}catch(e){return null}})),z=(e,t,s)=>J(void 0,void 0,void 0,(function*(){try{const n=yield fetch(`${u}users/${e}/statistics`,{method:"PUT",headers:{Authorization:"Bearer "+t,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)});return yield yield n.json()}catch(e){console.error(e)}}));var K=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function a(e){try{d(n.next(e))}catch(e){i(e)}}function o(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,o)}d((n=n.apply(e,t||[])).next())}))};class X extends D.TypedEmitter{constructor(){super(),this.getWordsList=e=>K(this,void 0,void 0,(function*(){const t=yield fetch(u+e);this.wordsChunk=yield t.json(),this.shakedWordChunk=this.shakeWordsArr()})),this.getWordsListFromTextbook=e=>{this.wordsChunk=e.slice(),this.shakedWordChunk=this.shakeWordsArr()},this.shakeWordsArr=()=>{const e=JSON.parse(JSON.stringify(this.wordsChunk));for(let t=this.wordsChunk.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e},this.turnGamePage=()=>{m.wordCount+=m.wordsPerPage,this.emit("drawGameBtns")},this.changeWord=()=>{m.wordOfShakedArrCount<20&&(m.wordOfShakedArrCount+=1)},this.getWordData=(e,t)=>K(this,void 0,void 0,(function*(){if(this.checkChainOfCorrectAnswers(t),x.currUserSettings.userId){const s=this.wordsChunk.find((t=>t.id===e));s&&(s.userWord||(s.userWord={difficulty:M.new,optional:{correctAnswersChallenge:"0",incorrectAnswersChallenge:"0",correctSequenceChallenge:"0",correctAnswersSprint:"0",incorrectAnswersSprint:"0",correctSequenceSprint:"0"}},yield this.updateWordOnChallengeAnswer(s,U.post)),t?yield this.checkChallengeCorrectAnswer(s):t||(yield this.checkChallengeIncorrectAnswer(s)))}})),this.checkChallengeCorrectAnswer=e=>K(this,void 0,void 0,(function*(){const t=JSON.parse(JSON.stringify(e));0==+t.userWord.optional.correctAnswersSprint&&0==+t.userWord.optional.incorrectAnswersSprint&&0==+t.userWord.optional.correctAnswersChallenge&&0==+t.userWord.optional.incorrectAnswersChallenge&&(m.newWords+=1,console.log(m.newWords)),t.userWord.optional.correctAnswersChallenge=""+(+t.userWord.optional.correctAnswersChallenge+1),t.userWord.optional.correctSequenceChallenge=""+(+t.userWord.optional.correctSequenceChallenge+1),(t.userWord.difficulty===M.difficult&&+t.userWord.optional.correctAnswersChallenge%E.learnedForDifficult==0||t.userWord.difficulty===M.new&&+t.userWord.optional.correctAnswersChallenge%E.learnedForNew==0)&&(t.userWord.difficulty=M.learned,m.learnedPerGame+=1),yield this.updateWordOnChallengeAnswer(t,U.put)})),this.checkChallengeIncorrectAnswer=e=>K(this,void 0,void 0,(function*(){const t=JSON.parse(JSON.stringify(e));0==+t.userWord.optional.correctAnswersSprint&&0==+t.userWord.optional.incorrectAnswersSprint&&0==+t.userWord.optional.correctAnswersChallenge&&0==+t.userWord.optional.incorrectAnswersChallenge&&(m.newWords+=1),t.userWord.optional.incorrectAnswersChallenge=""+(+t.userWord.optional.incorrectAnswersChallenge+1),t.userWord.optional.correctSequenceChallenge="0",t.userWord.difficulty===M.learned&&(t.userWord.difficulty=M.difficult),yield this.updateWordOnChallengeAnswer(t,U.put)})),this.updateWordOnChallengeAnswer=(e,t)=>K(this,void 0,void 0,(function*(){const s=`users/${x.currUserSettings.userId}/words/${e.id}`;try{yield L(u+s,{method:`${t}`,headers:{Authorization:`Bearer ${x.currUserSettings.token}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e.userWord)})}catch(e){console.error(e)}})),this.getUserWords=e=>K(this,void 0,void 0,(function*(){try{const t=yield L(u+e,{method:"GET",headers:{Authorization:`Bearer ${x.currUserSettings.token}`,Accept:"application/json","Content-Type":"application/json"}});return(yield t.json())[0]}catch(e){console.error(e)}})),this.getNewWordData=(e,t)=>K(this,void 0,void 0,(function*(){const s=yield fetch(u+e),n=yield s.json();for(let e=0;e<t;e+=1)m.shakedWordsArray.push(n[Math.floor(Math.random()*(n.length-1))])})),this.checkChainOfCorrectAnswers=e=>{e?(m.tempSequenceOfCorrectAnswers+=1,m.tempSequenceOfCorrectAnswers>m.sequenceOfCorrectAnswers&&(m.sequenceOfCorrectAnswers=m.tempSequenceOfCorrectAnswers)):e||(m.tempSequenceOfCorrectAnswers=0)},this.closeBtnModel=()=>K(this,void 0,void 0,(function*(){yield this.setStatistics(P.audioChallenge),m.startFromTextbook?(y.push("/textbook"),window.location.reload()):window.location.reload()})),this.getStatistics=()=>K(this,void 0,void 0,(function*(){if(x.isAuth){const{userId:e,token:t}=x.currUserSettings,s=yield Q(e,t);s&&delete s.id,this.userStat=s;const n=l();this.userStat||(this.userStat={learnedWords:0,optional:{[n]:JSON.parse(JSON.stringify(v))}}),n in this.userStat.optional||(this.userStat.optional[n]=JSON.parse(JSON.stringify(v)))}})),this.setStatistics=e=>K(this,void 0,void 0,(function*(){if(x.isAuth&&this.userStat){const t=l(),{userId:s,token:n}=x.currUserSettings,r=this.userStat.optional[t][e],{newWords:i,learnedWords:a,unlearnedWords:o,sequenceOfCorrectAnswers:d,learnedPerGame:c}=m,h={newWordsPerDay:i+r.newWordsPerDay,learnedWordsPerDay:c+r.learnedWordsPerDay,longestSeries:d+r.longestSeries,correctAnswers:a.length+r.correctAnswers,incorrectAnswers:o.length+r.incorrectAnswers};this.userStat.optional[t][e]=h,yield z(s,n,this.userStat)}})),this.wordsChunk=[],this.shakedWordChunk=[],this.userStat=null}}var Z=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function a(e){try{d(n.next(e))}catch(e){i(e)}}function o(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,o)}d((n=n.apply(e,t||[])).next())}))};class Y extends D.TypedEmitter{constructor(e){super(),this.drawAudioChallengeGame=()=>{const e=d("body");e.innerHTML="",e.insertAdjacentHTML("afterbegin",'\n<div class="fixed-window-wrapper">\n      <div class="fixed-window">\n        <div class=\'game-progress\'>\n          <div class=\'game-progress__fill\'></div>\n          <span class=\'game-progress__text\'>0%</span>\n        </div>\n        <div class="game-operations-group"></div>\n        <section class="game-section">\n          <div class="game-section__speaker-wrapper"></div>\n          <div class="game-section__answer-wrapper hidden"></div>\n          <div class="game-section__words-wrapper"></div>\n          <div class="game-section__skip-btn-wrapper"></div>\n          <div class="game-section__next-btn-wrapper hidden"></div>\n        </section>\n      </div>\n      <div class="fixed-result-window hidden">\n        <section class="result-section">\n          <div class="result-section__words">\n            <div class="result-section__learned-words"></div>\n            <div class="result-section__unlearned-words"></div>\n          </div>\n          <div class="result-section__operation-panel"></div>\n        </section>\n      </div> \n    </div>\n'),this.createSoundsBtns(),this.createCloseBtn(),this.updateWordBtnsWrapper(),this.createContinueBtn(),this.createSkipBtn(),this.enableWordSounding();const t=d("fixed-window");t.classList.contains("hidden")&&t.classList.remove("hidden")},this.updateWordBtnsWrapper=()=>{const e=d("game-section__words-wrapper");e.innerHTML="";const t=this.shakeWordsForCurrentGamePage();for(let s=0;s<t.length;s+=1)t[s]?e.append(this.createWordsBtns({wordTranslate:t[s].wordTranslate,id:t[s].id,group:t[s].group,word:t[s].word})):(this.stopTheGame(),this.showGameResults().catch((e=>console.error(e))));if(t.length<5&&this.createAdditionalWordBtns(),this.audioChallengeModel.shakedWordChunk[m.wordOfShakedArrCount]){const e=this.audioChallengeModel.shakedWordChunk[m.wordOfShakedArrCount].word;this.createAnswerWrapper(e),this.createSpeakerWrapper(e),this.emit("wordOfShakedArrCountAdded")}return e},this.createAdditionalWordBtns=()=>{const e=d("game-section__words-wrapper");for(let t=0;t<m.shakedWordsArray.length;t+=1)m.shakedWordsArray[t]&&e.append(this.createWordsBtns({wordTranslate:m.shakedWordsArray[t].wordTranslate,id:m.shakedWordsArray[t].id,group:m.shakedWordsArray[t].group,word:m.shakedWordsArray[t].word}))},this.shakeWordsForCurrentGamePage=()=>{const e=[];if(e.push(this.audioChallengeModel.shakedWordChunk[m.wordOfShakedArrCount]),this.audioChallengeModel.shakedWordChunk.length>=m.wordsPerPage)for(;e.length<m.wordsPerPage;){const t=this.audioChallengeModel.shakedWordChunk[Math.floor(Math.random()*this.audioChallengeModel.shakedWordChunk.length)];e.includes(t)||e.push(t)}else for(;e.length<this.audioChallengeModel.shakedWordChunk.length;){const t=this.audioChallengeModel.shakedWordChunk[Math.floor(Math.random()*this.audioChallengeModel.shakedWordChunk.length)];e.includes(t)||e.push(t)}for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e},this.createCloseBtn=()=>{const e=d("game-operations-group"),t=o("div","game-operations-group__close-btn"),s=o("img",["game-operations-group__cross-img","game-operations-group__cross-img_light"]);s.src="./assets/games/cross.svg",t.append(s),t.addEventListener("click",(()=>{this.audioChallengeModel.closeBtnModel().catch((e=>console.error(e)))})),e.append(t)},this.createSoundsBtns=()=>{const e=d("game-operations-group"),t=o("div","game-operations-group__sound-btns-wrapper"),s=this.createSoundBtn(),n=this.createStopSoundBtn();t.append(s,n),t.addEventListener("click",(()=>{!s.classList.contains("hidden")&&n.classList.contains("hidden")?(s.classList.add("hidden"),n.classList.remove("hidden")):s.classList.contains("hidden")&&!n.classList.contains("hidden")&&(s.classList.remove("hidden"),n.classList.add("hidden"))})),e.append(t)},this.createSoundBtn=()=>{const e=o("div",["game-operations-group__btn-wrapper","game-operations-group__btn-wrapper_green"]),t=o("img","game-operations-group__green-sound");return t.src="./assets/games/sound.svg",e.append(t),e},this.createStopSoundBtn=()=>{const e=o("div",["game-operations-group__btn-wrapper","game-operations-group__btn-wrapper_red","hidden"]),t=o("img","game-operations-group__red-sound");return t.src="./assets/games/no-sound.svg",e.append(t),e},this.turnOnCorrectAnswerSound=()=>{const e=new Audio;e.src="./assets/games-sounds/correct-answer.mp3",e.autoplay=!0},this.turnOnWrongAnswerSound=()=>{const e=new Audio;e.src="./assets/games-sounds/wrong-answer.mp3",e.autoplay=!0},this.createSpeakerWrapper=e=>{const t=d("game-section__speaker-wrapper");t.innerHTML="";const s=this.audioChallengeModel.wordsChunk.find((t=>t.word===e));if(s){const e=this.createSpeaker(s,"game-section__speaker-img");e.classList.add("game-section__speaker-img_big"),t.append(e)}},this.createSpeaker=(e,t)=>{const s=o("img",`${t}`);return s.src="./assets/games/speaker.svg",s.addEventListener("click",(()=>{(()=>Z(this,void 0,void 0,(function*(){const t=new Audio(u+e.audio);yield t.play()})))().catch()})),s},this.enableWordSounding=()=>Z(this,void 0,void 0,(function*(){const e=this.getRightAnswer(),t=this.audioChallengeModel.wordsChunk.find((t=>t.word===e));if(t){const e=new Audio(u+t.audio);yield e.play().catch()}})),this.createAnswerWrapper=e=>{const t=d("game-section__answer-wrapper");t.innerHTML="";const s=this.audioChallengeModel.wordsChunk.find((t=>t.word===e)),n=o("div","game-section__word-wrapper"),r=o("span","game-section__selected-word"),i=o("div","game-section__answer-speaker-wrapper"),a=o("game-section__answer-image-wrapper"),c=o("img","game-section__answer-img");if(s){const e=this.createSpeaker(s,"game-section__speaker-img");e.classList.add("game-section__speaker-img_small"),i.append(e),c.src=`${u}${s.image}`,c.alt="word image",a.append(c)}r.innerText=e,n.append(i,r),t.append(a,n)},this.createWordsBtns=({word:e,wordTranslate:t,group:s})=>{const n=o("div","game-section__answer-word-wrapper"),r=o("button",["game-section__word",`game-section__word-group-${s}`,`game-section__word-${e}`]);return r.addEventListener("click",(()=>{this.showRightAnswer(),this.hideSkipBtn(),this.showSign(e),this.makeWordsTransparent(e),this.crossWrongWord(e),this.wordsBtnsDisable(),this.checkRightAnswer(e),this.countBarProgress()})),r.textContent=t,n.append(this.createAnswerSigns(e),r),n},this.createAnswerSigns=e=>{const t=o("div",["game-section__answer-signs-wrapper",`game-section__answer-signs-wrapper-${e}`]),s=o("div",["game-section__default-sign-wrapper",`game-section__default-sign-wrapper-${e}`]),n=o("div",["game-section__correct-sign-wrapper",`game-section__correct-sign-wrapper-${e}`,"hidden"]),r=o("div",["game-section__wrong-sign-wrapper",`game-section__wrong-sign-wrapper-${e}`,"hidden"]),i=o("img","game-section__default-sign-img");i.src=" ./assets/games/dot.svg",s.append(i);const a=o("img","game-section__correct-sign-img");a.src=" ./assets/games/right-sign.svg",n.append(a);const d=o("img","game-section__wrong-sign-img");return d.src=" ./assets/games/wrong-sign.svg",r.append(d),t.append(s,n,r),t},this.createContinueBtn=()=>{const e=d("game-section__next-btn-wrapper"),t=o("button",["btn","game-section__next-btn","game-start-btn"]);t.innerText="⟶";const s=d("fixed-window");t.addEventListener("click",(()=>{this.emit("nextBtnClicked"),this.hideRightAnswer(),this.showSkipBtn(),s.classList.contains("hidden")||this.enableWordSounding()})),e.append(t)},this.createSkipBtn=()=>{const e=d("game-section__skip-btn-wrapper"),t=o("button",["btn","game-section__skip-btn","game-start-btn"]);t.innerText="Не знаю",t.addEventListener("click",(()=>{const e=this.getRightAnswer(),t=this.audioChallengeModel.wordsChunk.find((t=>t.word===e));this.emit("skipAnswerBtnClicked"),this.emit("wrongAnswerClicked",t.id,!1),this.showRightAnswer(),this.hideSkipBtn(),this.showSign(e),this.makeWordsTransparent(e),this.wordsBtnsDisable(),this.countBarProgress(),m.unlearnedWords.includes(e)||m.learnedWords.includes(e)||m.unlearnedWords.push(e)})),e.append(t)},this.getRightAnswer=()=>{const e=d("game-section__selected-word");return e?e.innerHTML:""},this.showRightAnswer=()=>{const e=d("game-section__answer-wrapper");e.classList.contains("hidden")&&e.classList.remove("hidden");const t=d("game-section__speaker-wrapper");t.classList.contains("hidden")||t.classList.add("hidden")},this.hideRightAnswer=()=>{const e=d("game-section__answer-wrapper");e.classList.contains("hidden")||e.classList.add("hidden");const t=d("game-section__speaker-wrapper");t.classList.contains("hidden")&&t.classList.remove("hidden")},this.hideSkipBtn=()=>{const e=d("game-section__skip-btn-wrapper");e.classList.contains("hidden")||e.classList.add("hidden");const t=d("game-section__next-btn-wrapper");t.classList.contains("hidden")&&t.classList.remove("hidden")},this.showSkipBtn=()=>{const e=d("game-section__skip-btn-wrapper");e.classList.contains("hidden")&&e.classList.remove("hidden");const t=d("game-section__next-btn-wrapper");t.classList.contains("hidden")||t.classList.add("hidden")},this.showSign=e=>{const t=this.getRightAnswer(),s=d(`game-section__correct-sign-wrapper-${e}`),n=d(`game-section__wrong-sign-wrapper-${e}`),r=d(`game-section__default-sign-wrapper-${e}`),i=d(`game-section__default-sign-wrapper-${t}`),a=d(`game-section__correct-sign-wrapper-${t}`);e===t?s&&s.classList.contains("hidden")&&s.classList.remove("hidden"):(n&&n.classList.contains("hidden")&&n.classList.remove("hidden"),i&&!i.classList.contains("hidden")&&i.classList.add("hidden")),a&&a.classList.contains("hidden")&&a.classList.remove("hidden"),r&&!r.classList.contains("hidden")&&r.classList.add("hidden")},this.makeWordsTransparent=e=>{Array.from(document.getElementsByClassName("game-section__word")).forEach((t=>{t.classList.contains(`game-section__word-${e}`)||t.classList.add("semitransparent")}))},this.crossWrongWord=e=>{const t=this.getRightAnswer(),s=d(`game-section__word-${e}`);e!==t&&(s.classList.contains("strikethrough")||s.classList.add("strikethrough"))},this.wordsBtnsDisable=()=>{Array.from(document.getElementsByClassName("game-section__word")).forEach((e=>{e.disabled=!0}))},this.checkRightAnswer=e=>{const t=this.getRightAnswer(),s=this.audioChallengeModel.wordsChunk.find((e=>e.word===t));if(s){const n=s.id,r=d("game-operations-group__btn-wrapper_green");e===t?(this.emit("rightAnswerClicked",n,!0),m.learnedWords.includes(t)||m.unlearnedWords.includes(t)||m.learnedWords.push(t),r.classList.contains("hidden")||this.turnOnCorrectAnswerSound()):(this.emit("wrongAnswerClicked",n,!1),m.learnedWords.includes(t)||m.unlearnedWords.includes(t)||m.unlearnedWords.push(t),r.classList.contains("hidden")||this.turnOnWrongAnswerSound())}},this.stopTheGame=()=>{const e=d("fixed-window");e.classList.contains("hidden")||e.classList.add("hidden"),this.emit("theGameIsOver")},this.showGameResults=()=>Z(this,void 0,void 0,(function*(){const e=d("fixed-result-window");e.classList.contains("hidden")&&e.classList.remove("hidden"),d("result-section").style.height="50vh",this.updateUnlearnedResultWordsWrapper(),this.updateLearnedResultWordsWrapper(),this.showOperationPanel(),yield this.audioChallengeModel.setStatistics(P.audioChallenge)})),this.closeGameResults=()=>{const e=d("fixed-result-window"),t=d("result-section__operation-panel");e.classList.contains("hidden")||e.classList.add("hidden"),t.classList.contains("hidden")||t.classList.add("hidden"),d("result-section").style.height="0"},this.updateUnlearnedResultWordsWrapper=()=>{const e=d("result-section__unlearned-words");e.innerHTML="";const t=o("h2","result-section__header"),s=o("span",["result-section__span","result-section__span_errors"]);s.textContent=`${m.unlearnedWords.length}`,t.textContent="Ошибок ",t.append(s),e.append(t);for(let t=0;t<m.unlearnedWords.length;t+=1){const s=this.audioChallengeModel.wordsChunk.find((e=>e.word===m.unlearnedWords[t]));s&&e.append(this.createResultWordsBtns({wordTranslate:s.wordTranslate,word:s.word}))}return e},this.updateLearnedResultWordsWrapper=()=>{const e=d("result-section__learned-words");e.innerHTML="";const t=o("h2","result-section__header"),s=o("span",["result-section__span","result-section__span_correct"]);s.textContent=`${m.learnedWords.length}`,t.textContent="Знаю ",t.append(s),e.append(t);for(let t=0;t<m.learnedWords.length;t+=1){const s=this.audioChallengeModel.wordsChunk.find((e=>e.word===m.learnedWords[t]));s&&e.append(this.createResultWordsBtns({wordTranslate:s.wordTranslate,word:s.word}))}return e},this.createResultWordsBtns=({word:e,wordTranslate:t})=>{const s=o("div","result-section__word-wrapper"),n=o("span",["result-section__word",`result-section__word-${e}`]);n.textContent=`${e} - ${t}`;const r=this.audioChallengeModel.wordsChunk.find((t=>t.word===e));if(r){const e=this.createSpeaker(r,"result-section__speaker-img");e.classList.add("result-section__speaker-img_small"),s.append(e)}return s.append(n),s},this.showOperationPanel=()=>{const e=d("result-section__operation-panel"),t=this.createResultsCloseBtn();d("result-section__close-btn-wrapper")||e.append(t)},this.createResultsCloseBtn=()=>{const e=o("div","result-section__close-btn-wrapper"),t=o("button",["game-start-btn","result-section__close-btn"]);return t.textContent="Завершить игру",t.addEventListener("click",(()=>{m.startFromTextbook?(y.push("/textbook"),window.location.reload()):window.location.reload()})),e.append(t),e},this.keyPressMethod=(()=>{document.addEventListener("keyup",(e=>this.checkPressedBtn(e)))})(),this.checkPressedBtn=e=>{const t=e.code,s=d("fixed-window");if(s&&!s.classList.contains("hidden"))switch(t){case"Digit1":case"Digit2":case"Digit3":case"Digit4":case"Digit5":case"Numpad1":case"Numpad2":case"Numpad3":case"Numpad4":case"Numpad5":this.handlePressedNumber(t);break;case"Space":this.handlePressedSpace();break;case"Enter":this.handlePressedEnter()}},this.handlePressedNumber=e=>{const t=document.getElementsByClassName("game-section__word"),s=+e.slice(-1)-1,n=t[s].textContent,r=this.audioChallengeModel.wordsChunk.find((e=>e.wordTranslate===n)),i=null==r?void 0:r.word;i&&!t[s].disabled&&(this.showRightAnswer(),this.hideSkipBtn(),this.showSign(i),this.makeWordsTransparent(i),this.crossWrongWord(i),this.wordsBtnsDisable(),r&&this.checkRightAnswer(i),this.countBarProgress())},this.handlePressedSpace=()=>{const e=this.getRightAnswer(),t=this.audioChallengeModel.wordsChunk.find((t=>t.word===e));t&&(()=>Z(this,void 0,void 0,(function*(){const e=new Audio(u+t.audio);yield e.play()})))().catch((e=>console.error(e)))},this.handlePressedEnter=()=>{const e=d("game-section__skip-btn-wrapper"),t=d("game-section__next-btn-wrapper"),s=d("fixed-window"),n=this.getRightAnswer(),r=this.audioChallengeModel.wordsChunk.find((e=>e.word===n)),i=d("game-operations-group__btn-wrapper_green");e.classList.contains("hidden")&&!t.classList.contains("hidden")?(this.emit("nextBtnClicked"),this.hideRightAnswer(),this.showSkipBtn(),s.classList.contains("hidden")||this.enableWordSounding()):!e.classList.contains("hidden")&&t.classList.contains("hidden")&&(this.emit("skipAnswerBtnClicked"),this.emit("wrongAnswerClicked",r.id,!1),this.showRightAnswer(),this.hideSkipBtn(),this.showSign(n),this.makeWordsTransparent(n),this.wordsBtnsDisable(),this.countBarProgress(),m.unlearnedWords.includes(n)||m.learnedWords.includes(n)||m.unlearnedWords.push(n),i.classList.contains("hidden")||this.turnOnWrongAnswerSound())},this.countBarProgress=()=>{const e=Math.round(100*m.wordOfShakedArrCount/this.audioChallengeModel.shakedWordChunk.length);this.updateProgressBar(e)},this.updateProgressBar=e=>{const t=d("game-progress__fill"),s=d("game-progress__text");t.style.width=`${e}%`,s.textContent=`${e}%`},this.audioChallengeModel=e,this.audioChallengeModel.on("drawGameBtns",(()=>this.updateWordBtnsWrapper()))}}class ee extends D.TypedEmitter{constructor(e){super(),this.buildSprintHTML=()=>{const e=o("div","game-entrance"),t=o("div","game-entrance__wrapper"),s=o("div","game-entrance__text-box");return s.append(this.createSprintDescription(),this.createSelect(),this.createSprintStartButton()),t.append(this.createSprintTitle(),s),e.append(t,this.createSprintImage()),e},this.buildAudioChallengeHTML=()=>{const e=o("div","game-entrance"),t=o("div","game-entrance__wrapper"),s=o("div","game-entrance__text-box");return s.append(this.createAudioChallengeDescription(),this.createSelect(),this.createAudioChallengeStartButton()),t.append(this.createAudioChallengeTitle(),s),e.append(t,this.createAudioChallengeImage()),e},this.createSelect=()=>{const e=o("select","select-input");for(let t=0;t<6;t+=1){const s=o("option",`game-option-${t+1}`);s.textContent=(t+1).toString()+" уровень",s.addEventListener("select",(()=>this.emit("gameOptionClicked",t))),e.append(s)}return e.addEventListener("change",(()=>{const t=parseInt(e.value.slice(0,1));return this.emit("gameOptionClicked",t)})),e},this.createAudioChallengeTitle=()=>{const e=o("h2",["game-entrance__title","game-entrance__title_audiochallenge"]);return e.textContent="Аудиовызов",e},this.createSprintTitle=()=>{const e=o("h2",["game-entrance__title","game-entrance__title_sprint"]);return e.textContent="Спринт",e},this.createSprintStartButton=()=>{const e=o("button",["btn","game-start-btn","game-start-btn_sprint"]);return e.textContent="Начать",e.addEventListener("click",(()=>{this.emit("sprintGameStarted")})),e},this.createAudioChallengeStartButton=()=>{const e=o("button",["btn","game-start-btn","game-start-btn_audio-challenge"]);return e.textContent="Начать",e.addEventListener("click",(()=>{this.emit("audioChallengeGameStarted")})),e},this.createSprintDescription=()=>{const e=o("div");return e.innerHTML="\n    <p>Тренировка 'Спринт' позволяет повторять слова из вашего словаря.</p>\n    <ul>Чтобы выбрать:\n      <li>Можно использовать мышь.</li>\n      <li>Можно имспользовать клавиши влево и вправо</li>\n    </ul>\n    <p>Выберите уровень сложности:",e},this.createAudioChallengeDescription=()=>{const e=o("div");return e.innerHTML="\n    <p>Тренировка 'Аудиовызов' улучшает восприятие речи на слух.</p>\n      <ul>Чтобы играть с помощью клавиатуры, используй клавиши:\n        <li><strong>1, 2, 3, 4, 5</strong> - чтобы выбрать ответ,</li>\n        <li><strong>Space</strong> - для воспроизведения звука,</li>\n        <li><strong>Enter</strong> - для получения подсказки или перехода к следующему вопросу.</li>\n      </ul>\n      <p class='bold'>Выберите уровень сложности:</p>\n    ",e},this.createSprintImage=()=>{const e=o("div","img-x15");return e.innerHTML="<img src='./assets/games/delphins.svg' alt='dolphins' />",e},this.createAudioChallengeImage=()=>{const e=o("div","img-x15");return e.innerHTML="<img src='./assets/games/tail.svg' alt='whale tail' />",e},this.renderPreloader=e=>{const t=d("main__wrapper");t.innerHTML="",t.insertAdjacentHTML("afterbegin",r),e?t.classList.add(`${e}`):t.classList.remove("textbook")},this.gamesEntranceModel=e}}class te extends D.TypedEmitter{constructor(){super(...arguments),this.addGameLevel=e=>{m.level=e-1,w.level=e-1}}}var se=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function a(e){try{d(n.next(e))}catch(e){i(e)}}function o(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,o)}d((n=n.apply(e,t||[])).next())}))};class ne extends D.TypedEmitter{constructor(){super(),this.getWordsList=e=>se(this,void 0,void 0,(function*(){const t=yield fetch(u+e);this.wordsChunk=yield t.json(),this.shakedWordChunk=this.shakeWordsArr()})),this.getUserWordsForSprint=()=>se(this,void 0,void 0,(function*(){const e=`users/${x.currUserSettings.userId}/aggregatedWords?group=${w.level}&wordsPerPage=600`;try{const t=yield L(u+e,{method:"GET",headers:this.API_USER_REQ_HEADER}),s=yield t.json();this.wordsChunk=this.mapUserWordsID(s[0].paginatedResults.slice()),this.allPageChunk=this.wordsChunk.slice(),this.shakedWordChunk=this.shakeWordsArr().slice(0,100)}catch(e){console.error(e)}})),this.getDefaultWordsForSprint=()=>se(this,void 0,void 0,(function*(){for(let e=0;e<5;e+=1){const t=`words?group=${w.level}&page=${e}`,s=yield fetch(u+t),n=yield s.json();this.wordsChunk=this.wordsChunk.concat(n)}this.allPageChunk=this.wordsChunk.slice(),this.shakedWordChunk=this.shakeWordsArr()})),this.getPageChunk=()=>se(this,void 0,void 0,(function*(){const e=`words?group=${x.currUserSettings.currGroup}&page=${x.currUserSettings.currPage}`,t=yield fetch(u+e);this.allPageChunk=yield t.json()})),this.shakeWordsArr=()=>{const e=JSON.parse(JSON.stringify(this.wordsChunk));for(let t=this.wordsChunk.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e},this.getWordsListFromTextbook=e=>{this.wordsChunk=e.slice(),this.shakedWordChunk=this.shakeWordsArr().slice()},this.updateWordOnSprintAnswer=(e,t)=>se(this,void 0,void 0,(function*(){const s=`users/${x.currUserSettings.userId}/words/${e.id}`;try{yield L(u+s,{method:`${t}`,headers:this.API_USER_REQ_HEADER,body:JSON.stringify(e.userWord)}),this.emit("drawNextSprintQuestion")}catch(e){console.error(e)}})),this.API_USER_REQ_HEADER={Authorization:`Bearer ${x.currUserSettings.token}`,Accept:"application/json","Content-Type":"application/json"},this.mapUserWordsID=e=>e.map((e=>{var{_id:t}=e,s=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s}(e,["_id"]);return Object.assign({id:t},s)})),this.closeBtnModel=()=>se(this,void 0,void 0,(function*(){yield this.setStatistics(P.sprint),w.startFromTextbook?(y.push("/textbook"),window.location.reload()):window.location.reload()})),this.getStatistics=()=>se(this,void 0,void 0,(function*(){if(x.isAuth){const{userId:e,token:t}=x.currUserSettings,s=yield Q(e,t);s&&delete s.id,this.userStat=s;const n=l();this.userStat||(this.userStat={learnedWords:0,optional:{[n]:JSON.parse(JSON.stringify(v))}}),n in this.userStat.optional||(this.userStat.optional[n]=JSON.parse(JSON.stringify(v)))}})),this.setStatistics=e=>se(this,void 0,void 0,(function*(){if(x.isAuth&&this.userStat){const t=l(),{userId:s,token:n}=x.currUserSettings,r=this.userStat.optional[t][e],{newWords:i,learnedWords:a,unlearnedWords:o,sequenceOfCorrectAnswers:d,learnedPerGame:c}=w,h={newWordsPerDay:i+r.newWordsPerDay,learnedWordsPerDay:c+r.learnedWordsPerDay,longestSeries:d+r.longestSeries,correctAnswers:a.length+r.correctAnswers,incorrectAnswers:o.length+r.incorrectAnswers};this.userStat.optional[t][e]=h,yield z(s,n,this.userStat)}})),this.allPageChunk=[],this.wordsChunk=[],this.shakedWordChunk=[],this.userStat=null}}const re={info:{color:"green"},warning:{color:"orange",threshold:30},alert:{color:"red",threshold:15}};let ie=0,ae=60,oe=0;const de=`\n<div class="base-timer">\n  <svg class="base-timer__svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n    <g class="base-timer__circle">\n      <circle class="base-timer__path-elapsed" cx="50" cy="50" r="45"></circle>\n      <path\n        id="base-timer-path-remaining"\n        stroke-dasharray="283"\n        class="base-timer__path-remaining ${re.info.color}"\n        d="\n          M 50, 50\n          m -45, 0\n          a 45,45 0 1,0 90,0\n          a 45,45 0 1,0 -90,0\n        "\n      ></path>\n    </g>\n  </svg>\n  <span id="base-timer-label" class="base-timer__label">60</span>\n</div>\n`;function ce(){oe=window.setInterval((()=>{ie=ie+=1,ae=60-ie;const e=document.getElementById("base-timer-label");e?e.innerHTML=""+ae%60:window.clearInterval(oe),function(){var e;const t=`${(283*function(){const e=ae/60;return e-1/60*(1-e)}()).toFixed(0)} 283`;null===(e=document.getElementById("base-timer-path-remaining"))||void 0===e||e.setAttribute("stroke-dasharray",t)}(),function(e){var t,s,n,r;const{alert:i,warning:a,info:o}=re;e<=i.threshold?(null===(t=document.getElementById("base-timer-path-remaining"))||void 0===t||t.classList.remove(a.color),null===(s=document.getElementById("base-timer-path-remaining"))||void 0===s||s.classList.add(i.color)):e<=a.threshold&&(null===(n=document.getElementById("base-timer-path-remaining"))||void 0===n||n.classList.remove(o.color),null===(r=document.getElementById("base-timer-path-remaining"))||void 0===r||r.classList.add(a.color))}(ae),0===ae&&clearInterval(oe)}),1e3)}class le{constructor(e,t){this.buildBeReadyHTML=()=>{const e=d("body");e.innerHTML="",e.insertAdjacentHTML("afterbegin",'\n<div class="fixed-sprint-wrapper">\n  <div class="fixed-be-ready-window">\n    <div class="game-operations-group"></div>\n      <section class="be-ready">\n        <div class="be-ready__num-wrapper"><span class="be-ready__num">3</span></div>\n        <span class="be-ready__text">Приготовьтесь</span>  \n      </section>\n  </div> \n</div>\n'),this.createSoundsBtns(),this.createCloseBtn();let t=3;const s=d("be-ready__num"),n=setInterval((function(){t-=1,s&&(s.textContent=t.toString())}),1e3);t<=0&&clearInterval(n),setTimeout((()=>this.sprintView.drawSprintGame()),4e3)},this.createCloseBtn=()=>{const e=d("game-operations-group"),t=o("div","game-operations-group__close-btn"),s=o("img",["game-operations-group__cross-img","game-operations-group__cross-img_dark"]);s.src="./assets/games/cross.svg",t.append(s),t.addEventListener("click",(()=>{this.sprintModel.closeBtnModel().catch((e=>console.error(e)))})),e.append(t)},this.createSoundsBtns=()=>{const e=d("game-operations-group"),t=o("div","game-operations-group__sound-btns-wrapper"),s=this.createSoundBtn(),n=this.createStopSoundBtn();t.append(s,n),t.addEventListener("click",(()=>{!s.classList.contains("hidden")&&n.classList.contains("hidden")?(s.classList.add("hidden"),n.classList.remove("hidden")):s.classList.contains("hidden")&&!n.classList.contains("hidden")&&(s.classList.remove("hidden"),n.classList.add("hidden"))})),e.append(t)},this.createSoundBtn=()=>{const e=o("div",["game-operations-group__btn-wrapper","game-operations-group__btn-wrapper_green"]),t=o("img","game-operations-group__green-sound");return t.src="./assets/games/sound.svg",e.append(t),e},this.createStopSoundBtn=()=>{const e=o("div",["game-operations-group__btn-wrapper","game-operations-group__btn-wrapper_red","hidden"]),t=o("img","game-operations-group__red-sound");return t.src="./assets/games/no-sound.svg",e.append(t),e},this.generateRandomIndex=e=>{const t=Math.floor(this.sprintModel.allPageChunk.length*Math.random());return t!==e?t:this.generateRandomIndex(e)},this.sprintModel=e,this.sprintView=t}}var he=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function a(e){try{d(n.next(e))}catch(e){i(e)}}function o(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,o)}d((n=n.apply(e,t||[])).next())}))};class ue extends D.TypedEmitter{constructor(e){super(),this.drawSprintGame=()=>{const e=d("body");e.innerHTML="",e.insertAdjacentHTML("afterbegin",'\n<div class="fixed-sprint-wrapper">\n      <div class="fixed-window">\n        <div class="game-operations-group"></div>\n        <div class="game-points-wrapper"><span class="game-points">0</span></div>\n        <div class="game-timer-wrapper"><span class="game-timer">60</span></div>\n        <section class="sprint-game-wrapper">\n        <div class="sprint-question"></div>\n        <div class="sprint-answer">\n          <button class=\'sprint-answer__incorrect\'>Неверно</button>\n          <button class=\'sprint-answer__correct\'>Верно</button>\n        </div>\n        </section>\n      </div>\n      <div class="fixed-result-window hidden">\n        <section class="result-section">\n          <div class="result-section__words">\n            <div class="result-section__learned-words"></div>\n            <div class="result-section__unlearned-words"></div>\n          </div>\n          <div class="result-section__operation-panel"></div>\n        </section>\n      </div> \n    </div>\n'),this.sprintViewUtils.createSoundsBtns(),this.sprintViewUtils.createCloseBtn(),d("sprint-game-wrapper").insertAdjacentHTML("afterbegin",de),ce(),this.addSprintAnswerListeners(),setTimeout((()=>{this.isSprintRunning=!1,this.showResults().catch((e=>console.error(e)))}),6e4),this.drawNextSprintQuestion()},this.createSprintQuestion=e=>{const t=d("sprint-question");t.innerHTML="";const s=this.sprintModel.shakedWordChunk[e];this.gameCurrWord=s;const n=o("div","sprint-english-word");n.textContent=s.word;const r=o("div","sprint-word-translate"),i=this.sprintViewUtils.generateRandomIndex(e),a=this.sprintModel.allPageChunk[i].wordTranslate,c=[this.sprintModel.shakedWordChunk[e].wordTranslate,a],l=Math.floor(c.length*Math.random());r.textContent=c[l],this.isAnswerCorrect=c[l]===s.wordTranslate,t.append(n,r)},this.addSprintAnswerListeners=()=>{d("sprint-answer__correct").addEventListener("click",(()=>this.addCorrectBtnEvents())),window.addEventListener("keyup",(e=>{e.preventDefault(),"ArrowRight"===e.code&&this.addCorrectBtnEvents()})),d("sprint-answer__incorrect").addEventListener("click",(()=>this.addIncorrectBtnEvents())),window.addEventListener("keyup",(e=>{e.preventDefault(),"ArrowLeft"===e.code&&this.addIncorrectBtnEvents()}))},this.addCorrectBtnEvents=()=>{const e=d("game-operations-group__btn-wrapper_green");this.isAnswerCorrect?(this.flashBG(!0),e.classList.contains("hidden")||this.turnOnCorrectAnswerSound(),x.currUserSettings.userId?this.emit("sprintCorrectAnswerClicked",this.gameCurrWord):(this.drawNextSprintQuestion(),this.emit("sprintUnauthCorrectAnswerClicked",this.gameCurrWord))):(this.flashBG(!1),e.classList.contains("hidden")||this.turnOnWrongAnswerSound(),x.currUserSettings.userId?this.emit("sprintIncorrectAnswerClicked",this.gameCurrWord):(this.drawNextSprintQuestion(),this.emit("sprintUnauthIncorrectAnswerClicked",this.gameCurrWord)))},this.addIncorrectBtnEvents=()=>{const e=d("game-operations-group__btn-wrapper_green");this.isAnswerCorrect?(this.flashBG(!1),e.classList.contains("hidden")||this.turnOnWrongAnswerSound(),x.currUserSettings.userId?this.emit("sprintIncorrectAnswerClicked",this.gameCurrWord):(this.drawNextSprintQuestion(),this.emit("sprintUnauthIncorrectAnswerClicked",this.gameCurrWord))):(this.flashBG(!0),e.classList.contains("hidden")||this.turnOnCorrectAnswerSound(),x.currUserSettings.userId?this.emit("sprintCorrectAnswerClicked",this.gameCurrWord):(this.drawNextSprintQuestion(),this.emit("sprintUnauthCorrectAnswerClicked",this.gameCurrWord)))},this.drawNextSprintQuestion=()=>{this.isSprintRunning&&this.currIndex<this.sprintModel.shakedWordChunk.length?(this.createSprintQuestion(this.currIndex),this.currIndex+=1):(window.addEventListener("keyup",(e=>e.stopImmediatePropagation()),!0),this.showResults().catch((e=>console.error(e))))},this.showResults=()=>he(this,void 0,void 0,(function*(){const e=d("body"),t=o("div","fixed-sprint-window-wrapper"),s=o("div","fixed-result-window"),n=o("section","result-section"),r=o("div","result-section__words"),i=this.updateLearnedResultWordsWrapper();n.style.height="50vh";const a=this.updateUnlearnedResultWordsWrapper();r.append(i,a);const c=this.createOperationPanel();n.append(r,c),s.append(n),t.append(s),e.append(t),yield this.sprintModel.setStatistics(P.sprint)})),this.flashBG=e=>{const t=d("sprint-game-wrapper");e?(t.classList.add("sprint-game-wrapper--correct"),setTimeout((()=>t.classList.remove("sprint-game-wrapper--correct")),300)):(t.classList.add("sprint-game-wrapper--incorrect"),setTimeout((()=>t.classList.remove("sprint-game-wrapper--incorrect")),300))},this.updateUnlearnedResultWordsWrapper=()=>{const e=o("div","result-section__unlearned-words"),t=o("h2","result-section__header"),s=o("span",["result-section__span","result-section__span_errors"]);s.textContent=`${w.unlearnedWords.length}`,t.textContent="Ошибок ",t.append(s),e.append(t);for(let t=0;t<w.unlearnedWords.length;t+=1){const s=this.sprintModel.shakedWordChunk.find((e=>e.word===w.unlearnedWords[t]));s&&e.append(this.createResultWordsBtns({wordTranslate:s.wordTranslate,word:s.word}))}return e},this.updateLearnedResultWordsWrapper=()=>{const e=o("div","result-section__learned-words"),t=o("h2","result-section__header"),s=o("span",["result-section__span","result-section__span_correct"]);s.textContent=`${w.learnedWords.length}`,t.textContent="Знаю ",t.append(s),e.append(t);for(let t=0;t<w.learnedWords.length;t+=1){const s=this.sprintModel.shakedWordChunk.find((e=>e.word===w.learnedWords[t]));s&&e.append(this.createResultWordsBtns({wordTranslate:s.wordTranslate,word:s.word}))}return e},this.createResultWordsBtns=({word:e,wordTranslate:t})=>{const s=o("div","result-section__word-wrapper"),n=o("span",["result-section__word",`result-section__word-${e}`]);n.textContent=`${e} - ${t}`;const r=this.sprintModel.shakedWordChunk.find((t=>t.word===e));if(r){const e=this.createSpeaker(r,"result-section__speaker-img");e.classList.add("result-section__speaker-img_small"),s.append(e)}return s.append(n),s},this.createOperationPanel=()=>{const e=o("div","result-section__operation-panel"),t=this.createResultsCloseBtn();return e.append(t),e},this.createResultsCloseBtn=()=>{const e=o("div","result-section__close-btn-wrapper"),t=o("button",["game-start-btn","result-section__close-btn"]);return t.textContent="Завершить игру",t.addEventListener("click",(()=>{w.startFromTextbook?(y.push("/textbook"),window.location.reload()):window.location.reload()})),e.append(t),e},this.createSpeaker=(e,t)=>{const s=o("img",`${t}`);return s.src="./assets/games/speaker.svg",s.addEventListener("click",(()=>{(()=>he(this,void 0,void 0,(function*(){const t=new Audio(u+e.audio);yield t.play()})))().catch()})),s},this.turnOnCorrectAnswerSound=()=>{const e=new Audio;e.src="./assets/games-sounds/sprint-correct.mp3",e.autoplay=!0},this.turnOnWrongAnswerSound=()=>{const e=new Audio;e.src="./assets/games-sounds/sprint-wrong.mp3",e.autoplay=!0},this.sprintModel=e,this.sprintViewUtils=new le(e,this),this.gameCurrWord={},this.isAnswerCorrect=!1,this.isSprintRunning=!0,this.currIndex=0,this.sprintModel.on("drawNextSprintQuestion",(()=>this.drawNextSprintQuestion()))}}class pe{constructor(e,t){this.getWordsList=()=>{const e=this.getRandomPage(),t=`words?group=${w.level}&page=${e}`;this.sprintModel.getWordsList(t)},this.getRandomPage=()=>{const e=31*Math.random();return Math.floor(e)},this.checkSprintCorrectAnswer=e=>{this.addWordsToGuessRightArr(e);const t=JSON.parse(JSON.stringify(e));"userWord"in t?(0==+t.userWord.optional.correctAnswersSprint&&0==+t.userWord.optional.incorrectAnswersSprint&&0==+t.userWord.optional.correctAnswersChallenge&&0==+t.userWord.optional.incorrectAnswersChallenge&&(w.newWords+=1),t.userWord.optional.correctAnswersSprint=""+(+t.userWord.optional.correctAnswersSprint+1),t.userWord.optional.correctSequenceSprint=""+(+t.userWord.optional.correctSequenceSprint+1),(t.userWord.difficulty===M.difficult&&+t.userWord.optional.correctSequenceSprint%E.learnedForDifficult==0||t.userWord.difficulty===M.new&&+t.userWord.optional.correctSequenceSprint%E.learnedForNew==0)&&(t.userWord.difficulty=M.learned,w.learnedPerGame+=1),this.sprintModel.updateWordOnSprintAnswer(t,U.put)):(w.newWords+=1,t.userWord={difficulty:M.new,optional:{correctAnswersChallenge:"0",incorrectAnswersChallenge:"0",correctSequenceChallenge:"0",correctAnswersSprint:"1",incorrectAnswersSprint:"0",correctSequenceSprint:"1"}},this.sprintModel.updateWordOnSprintAnswer(t,U.post))},this.checkSprintIncorrectAnswer=e=>{this.addWordsToGuessWrongArr(e);const t=JSON.parse(JSON.stringify(e));"userWord"in t?(0==+t.userWord.optional.correctAnswersSprint&&0==+t.userWord.optional.incorrectAnswersSprint&&0==+t.userWord.optional.correctAnswersChallenge&&0==+t.userWord.optional.incorrectAnswersChallenge&&(w.newWords+=1),t.userWord.optional.incorrectAnswersSprint=""+(+t.userWord.optional.incorrectAnswersSprint+1),t.userWord.optional.correctSequenceSprint="0",t.userWord.difficulty===M.learned&&(t.userWord.difficulty=M.difficult),this.sprintModel.updateWordOnSprintAnswer(t,U.put)):(w.newWords+=1,t.userWord={difficulty:M.new,optional:{correctAnswersChallenge:"0",incorrectAnswersChallenge:"0",correctSequenceChallenge:"0",correctAnswersSprint:"0",incorrectAnswersSprint:"1",correctSequenceSprint:"0"}},this.sprintModel.updateWordOnSprintAnswer(t,U.post))},this.checkChainOfCorrectAnswers=e=>{e?(w.tempSequenceOfCorrectAnswers+=1,w.tempSequenceOfCorrectAnswers>w.sequenceOfCorrectAnswers&&(w.sequenceOfCorrectAnswers=w.tempSequenceOfCorrectAnswers)):e||(w.tempSequenceOfCorrectAnswers=0)},this.addWordsToGuessRightArr=e=>{this.checkChainOfCorrectAnswers(!0),w.learnedWords.includes(e.word)||w.unlearnedWords.includes(e.word)||w.learnedWords.push(e.word)},this.addWordsToGuessWrongArr=e=>{this.checkChainOfCorrectAnswers(!1),w.learnedWords.includes(e.word)||w.unlearnedWords.includes(e.word)||w.unlearnedWords.push(e.word)},this.sprintModel=e,this.sprintView=t,this.sprintView.on("sprintCorrectAnswerClicked",(e=>this.checkSprintCorrectAnswer(e))).on("sprintIncorrectAnswerClicked",(e=>this.checkSprintIncorrectAnswer(e))).on("sprintUnauthCorrectAnswerClicked",(e=>this.addWordsToGuessRightArr(e))).on("sprintUnauthIncorrectAnswerClicked",(e=>this.addWordsToGuessWrongArr(e)))}}var ge=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function a(e){try{d(n.next(e))}catch(e){i(e)}}function o(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,o)}d((n=n.apply(e,t||[])).next())}))},me=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function a(e){try{d(n.next(e))}catch(e){i(e)}}function o(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,o)}d((n=n.apply(e,t||[])).next())}))};const we=(e,t,s)=>({datasets:[{label:e,data:t,borderColor:"#a8eee4",backgroundColor:"rgb(168 238 228 / 50%)"}],labels:s}),ve=e=>({type:"line",data:e,options:{responsive:!0,plugins:{legend:{position:"top",labels:{color:"white"}},title:{display:!1,color:"white"}},scales:{x:{ticks:{color:"white"}},y:{ticks:{color:"white",precision:0}}}}});var _e=s(512);_e.kL.register(..._e.zX);class fe{constructor(){this.render=e=>{const t=d("main__wrapper");t.innerHTML="",x.isAuth?t.insertAdjacentHTML("afterbegin",(e=>{const{userName:t}=x.currUserSettings,{audiochallenge:s,sprint:n}=e,r=s.learnedWordsPerDay+n.learnedWordsPerDay,i=s.newWordsPerDay+n.newWordsPerDay,a=Math.round((s.correctAnswers+n.correctAnswers)/(s.correctAnswers+n.correctAnswers+s.incorrectAnswers+n.incorrectAnswers)*100)||0,o=Math.round(s.correctAnswers/(s.correctAnswers+s.incorrectAnswers)*100)||0,d=Math.round(n.correctAnswers/(n.correctAnswers+n.incorrectAnswers)*100)||0;return`\n  <div class="main__container statistics">\n  <div class="statistic__article">\n    <div class="bubbles-top img-x3">\n      <img src="./assets/bubbles.svg" alt="">\n    </div>\n    <div class="skat img-x15">\n      <img src="./assets/skat.svg" alt="">\n    </div>\n    <p>Привет, ${t} ! </p>\n    <div class="statistic__title"><h2 class="article__title">Статистика </h2><span class="statistic__sub-title accent">за сегодня</span></div>\n    <div class="statistic__today">\n      <div class="statistic__words">\n        <h3 class="stat-words-data"> <span><b> ${r} </b></span> слов изучено</h3>\n        <h3 class="stat-words-data"> <span><b> ${i} </b></span> новых слов</h3>\n        <h3 class="stat-words-data"> <span><b> ${a} % </b></span> правильных ответов</h3>\n      </div>\n      <div class="statistic__games">\n      <div class="stat-game-card audiochallenge">\n        <h4 class="stat-game-card__name">Аудиовызов</h4>\n        <div class="stat-game-card__data">\n          <p class="stat-game-card__learned-words">Новых слов: <span class="stat-game-card__accent ">${s.newWordsPerDay}</span></p>\n          <p class="stat-game-card__right-answers">Процент правильных ответов:<span class="stat-game-card__accent "> ${o}\n              %</span></p>\n          <p class="stat-game-card__responses-series">Cамая длинная серия правильных ответов: <span\n              class="stat-game-card__accent">${s.longestSeries}</span></p>\n        </div>\n      </div>\n      <div class="stat-game-card sprint">\n        <h4 class="stat-game-card__name">Спринт</h4>\n        <div class="stat-game-card__data">\n          <p class="stat-game-card__learned-words">Новых слов: <span class="stat-game-card__accent ">${n.newWordsPerDay}</span></p>\n          <p class="stat-game-card__right-answers">Процент правильных ответов:<span class="stat-game-card__accent"> ${d}\n              %</span></p>\n          <p class="stat-game-card__responses-series">Cамая длинная серия правильных ответов: <span\n              class="stat-game-card__accent ">${n.longestSeries}</span></p>\n        </div>\n        </div>\n      </div>\n    </div>\n    <div class="statistic__title"><span class="statistic__sub-title accent"> за всё время</span></div> \n    <div class="statistic__all-time">\n      <div class="all-time__card all-time-words">\n        <h4 class="all-time__card__name">Количество новых слов</h4>\n        <div class="all-time__card__chart">\n<div>\n  <canvas class="newWordsChart" ></canvas>\n</div>\n</div>\n      </div>\n      <div class="all-time__card all-time-dynamics">\n        <h4 class="all-time__card__name"> Общее количество изученных слов</h4>\n        <div class="all-time__card__chart">\n<div>\n  <canvas class="learnedWordsChart" ></canvas>\n</div>\n</div>\n      </div>\n    </div>\n    <div class="bubbles img-x5">\n      <img src="./assets/bubbles.svg" alt="">\n    </div>\n    <div class="whale img-x20">\n      <img src="./assets/whale.svg" alt="">\n    </div>\n  </div>\n</div>\n`})(e)):(t.insertAdjacentHTML("afterbegin",'\n<div class="main__container statistics">\n    <div class="statistic__article anonim">\n        <div class="bubbles-top img-x3">\n          <img src="./assets/bubbles.svg" alt="">\n        </div>\n        <div class="skat img-x15">\n          <img src="./assets/skat.svg" alt="">\n        </div>\n        <div class="statistic__title">\n        <h4 class="article__title">Статистика доступна только <span class="accent">авторизованным</span> пользователям</h4>\n        <a href="/login" class="btn btn-stat-login"> Войти </a>\n        </div>\n    </div>\n</div>\n'),this.bind())},this.bind=()=>{d("statistics").addEventListener("click",(e=>{e.target.classList.contains("btn-stat-login")&&(e.preventDefault(),y.push("/login"))}))}}}var be=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function a(e){try{d(n.next(e))}catch(e){i(e)}}function o(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,o)}d((n=n.apply(e,t||[])).next())}))};var ke=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function a(e){try{d(n.next(e))}catch(e){i(e)}}function o(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,o)}d((n=n.apply(e,t||[])).next())}))};const xe=new class{constructor(){this.init=()=>{this.model.mount().catch((e=>console.error(e))),this.view.render()},this.model=new A,this.view=new class{constructor(){this.render=()=>{const e=o("div","modal");this.nav.render(),this.main.append(this.mainWrapper,e),this.footer.insertAdjacentHTML("afterbegin",'<div class="wrapper footer__wrapper">\n<div class="footer__copyright">\n    <span class="copyright">©</span>\n    <span class="year">2022</span>\n</div>\n<div class="footer__info">\n    <a class="github-username" href="https://github.com/ddd-fx" target="_blank" rel="noopener noreferrer">Дмитрий</a>\n    <a class="github-username" href="https://github.com/orla90" target="_blank" rel="noopener noreferrer">Ольга</a>\n    <a class="github-username" href="https://github.com/OutLaw0" target="_blank" rel="noopener noreferrer">Валентин</a>\n</div>\n<a href="https://rs.school/js/" class="rss" target="_blank"> Rolling Scopes School </a>\n</div>'),document.body.append(this.header,this.main,this.footer),this.bind()},this.renderMainTemplate=()=>{this.mainWrapper.innerHTML="",this.mainWrapper.insertAdjacentHTML("afterbegin",'\n\n<div class="main__container">\n<div class="article main__article">\n<div class="bubbles-top img-x3">\n<img src="./assets/bubbles.svg" alt="">\n</div>\n<div class="skat img-x15">\n    <img src="./assets/skat.svg" alt="">\n  </div>\n<h2 class="article__title">Погрузись в <span class="accent">океан</span> знаний вместе с RS Lang</h2>\n<p class="article__text">Добро пожаловать на образовательную игровую площадку, которая помогает детям выучить английский язык.\n  Также, у нас есть миниигры, которые помогают улучшить навыки мышления у детей.</p>\n  <a href="/textbook" class="btn btn-article" data-btn="textbook"> Начать </a>\n  <div class="article__bottom-nav"><button class="btn btn-bottom-nav advantages"> О приложении <img class="advantages" src="./assets/icon-right.svg" alt=""></button></div>\n  </div>\n  <div class="bubbles img-x5">\n  <img src="./assets/bubbles.svg" alt="">\n</div>\n<div class="whale img-x20">\n\n    <img src="./assets/whale.svg" alt="">\n  </div>\n  </div>\n  \x3c!--<div class="main__container advantages-screen">\n  <h2 class="article__title">Наши преимущества </h2>\n  </div>\n  <div class="main__container about-us-screen">\n  <h2 class="article__title">О нас </h2>\n  </div>--\x3e\n\n')},this.renderCustomTemplate=e=>{this.mainWrapper.style.opacity="0",setTimeout((()=>{this.mainWrapper.innerHTML="",this.mainWrapper.insertAdjacentHTML("afterbegin",e()),this.mainWrapper.style.opacity="1"}),450)},this.renderPreloader=e=>{this.mainWrapper.innerHTML="",this.mainWrapper.insertAdjacentHTML("afterbegin",r),e?this.mainWrapper.classList.add(`${e}`):this.mainWrapper.classList.remove("textbook")},this.bind=()=>{d("main__wrapper").addEventListener("click",(e=>{e.target.classList.contains("btn-article")&&(e.preventDefault(),y.push("/textbook")),e.target.classList.contains("main")&&this.renderCustomTemplate(n),e.target.classList.contains("advantages")&&this.renderCustomTemplate(i),e.target.classList.contains("team")&&this.renderCustomTemplate(a)})),document.addEventListener("click",this.nav.closeNav)},(()=>{for(const e of h)(new Image).src=e})(),this.header=o("header","header"),this.main=o("main","main"),this.mainWrapper=o("div",["wrapper","main__wrapper"]),this.footer=o("footer"),this.nav=new C(this.header)}}}};xe.init();const We="| rs lang",ye=new class{constructor(){this.loginHandler=e=>be(this,void 0,void 0,(function*(){const t=e.email.value,s=e.password.value;if(0===t.length)c("Введите почту!");else if(s.length<8)c("Пароль более 8 символов!");else{const e={email:t,password:s},r=yield(n=e,f(void 0,void 0,void 0,(function*(){try{const e=yield fetch(`${u}signin`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)});return[e.status,yield e.json()]}catch(e){return["404"]}})));200===r[0]?(c("Успешная авторизация!"),this.setUserSettings(e.email,r[1]),window.location.replace("/"),new C(d("header")).render()):c("Неверный логин или пароль!")}var n})),this.authHandler=e=>be(this,void 0,void 0,(function*(){const t=e.username.value,s=e.email.value,n=e.password.value;if(0===s.length)c("Введите почту!");else if(n.length<8)c("Пароль более 8 символов!");else{const e={name:t,email:s,password:n},i=yield(r=e,f(void 0,void 0,void 0,(function*(){try{const e=yield fetch(`${u}users`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)}),t=e.status;return e.ok?[t,yield e.json()]:[t,(e=>{let t=e;try{const s=JSON.parse(e);s.error&&(t=s.error.errors[0].message)}catch(e){console.error(e)}return t})(yield e.text())]}catch(e){console.log(e)}})));200===i[0]?(c("Успешная регистрация!"),y.push("/login")):c(i[1])}var r})),this.setUserSettings=(e,t)=>{const{token:s,refreshToken:n,userId:r,name:i}=t,a=b(s)-3e5;x.currUserSettings.userId=r,x.currUserSettings.userEmail=e,x.currUserSettings.userName=i,x.currUserSettings.token=s,x.currUserSettings.refreshToken=n,x.currUserSettings.expireOn=a,x.isAuth=!0,x.setLSData(x.currUserID,x.currUserSettings)},this.view=new class{constructor(e,t){this.renderLoginForm=()=>{const e=d("main__wrapper"),t=new class{constructor(e){this.render=()=>this.regForm,this.bind=e=>{this.regForm.addEventListener("click",(e=>{if(e.target.classList.contains("register__link-link")){e.preventDefault();const t=e.target.pathname;y.push(t)}})),this.regForm.addEventListener("submit",(t=>{t.preventDefault();const s=document.forms.namedItem("loginForm");e(s).catch((e=>console.error(e)))}))},this.regForm=o("div","register"),this.regForm.innerHTML='\n<div class="register__images">\n<div class="bubbles img-x5">\n<img src="./assets/bubbles.svg" alt="">\n</div>\n<div class="whale img-x20">\n  <img src="./assets/whale.svg" alt="">\n</div>\n</div>\n<form class="form register__form" id="loginForm" name="loginForm" >\n<h2 class="register__title">Авторизация</h2>\n  <label>\n   <span class="input-title">Почта</span>\n    <input class="input" type="email" name="email" id="email" placeholder="elon@musk.com" autocomplete="email" required="required" autofocus>\n  </label>\n  <label>\n  <span class="input-title">Пароль</span>\n  <input class="input" type="password" name="password" id="password" placeholder="Qweasdzxc123" minlength="8" autocomplete="current-password" required="required">\n</label>\n  <button class="btn btn-register" type="submit">Вход</button>\n  \n  <div class="register__link"><span>Нет аккаунта? </span> <a class="register__link-link" href="/auth"> Регистрация </a></div>\n</form>\n',this.bind(e)}}(this.handleLogin);e.innerHTML="",e.append(t.render())},this.renderRegForm=()=>{const e=d("main__wrapper"),t=new class{constructor(e){this.render=()=>this.regForm,this.bind=e=>{this.regForm.addEventListener("click",(e=>{if(e.target.classList.contains("register__link-link")){e.preventDefault();const t=e.target.pathname;y.push(t)}})),this.regForm.addEventListener("submit",(t=>{t.preventDefault();const s=document.forms.namedItem("registerForm");e(s).catch((e=>console.error(e)))}))},this.regForm=o("div","register"),this.regForm.innerHTML='\n<div class="register__images">\n<div class="bubbles img-x5">\n<img src="./assets/bubbles.svg" alt="">\n</div>\n<div class="whale img-x20">\n  <img src="./assets/whale.svg" alt="">\n</div>\n</div>\n<form class="form register__form" id="registerForm" name="registerForm" action="/apply/" method="POST">\n<h2 class="register__title">Создать аккаунт</h2>\n  <label>\n <span class="input-title">Имя*</span>\n    <input class="input" type="text" name="username" id="username" placeholder="Илон Маск" autocomplete="username" autofocus>\n  </label>\n  <label>\n   <span class="input-title">Почта*</span>\n    <input class="input" type="email" name="email" id="email" placeholder="elon@musk.com" autocomplete="email" required="required">\n  </label>\n  <label>\n  <span class="input-title">Пароль*</span>\n  <input class="input" type="password" name="password" id="password" placeholder="Qweasdzxc123" minlength="8" autocomplete="new-password" required="required">\n</label>\n  <button class="btn btn-register" type="submit" >Регистрация</button>\n  \n  <div class="register__link"><span>Есть аккаунт? </span><a class="register__link-link" href="/login"> Войти </a></div>\n</form>\n',this.bind(e)}}(this.handleAuth);e.innerHTML="",e.append(t.render())},this.handleLogin=e,this.handleAuth=t}}(this.loginHandler,this.authHandler)}},Ce=new class{constructor(){this.init=()=>G(this,void 0,void 0,(function*(){this.textBookView.userTextBookView.onDictPage?this.textBookView.userTextBookView.drawDict():yield this.textBookModel.getTextBookList()})),this.changeTextBookPage=e=>{x.currUserSettings.currPage=e,x.currUserSettings.currWord="",x.setLSData(x.currUserID,x.currUserSettings),this.textBookModel.getTextBookList()},this.changeTextBookGroup=e=>{x.currUserSettings.currPage=0,x.currUserSettings.currWord="",x.currUserSettings.currGroup=e,x.setLSData(x.currUserID,x.currUserSettings),this.textBookModel.getTextBookList()},this.getWordCardData=(e,t)=>{x.currUserSettings.currWord=e,x.setLSData(x.currUserID,x.currUserSettings),this.textBookModel.getWordCardData(e,t)},this.getUserDictWords=()=>{this.textBookModel.getUserDictWords()},this.addUserWord=(e,t)=>G(this,void 0,void 0,(function*(){this.controlWordBtnOnFetch(e,!0);const s=this.textBookView.userTextBookView.onDictPage;if(this.isWordDifficult(e))yield this.textBookModel.updateUserWord(e,s,t,!1,!1),this.textBookView.userTextBookView.checkStarBtnActive();else if(this.isWordLearned(e))yield this.textBookModel.updateUserWord(e,s,t,!1,!1),this.textBookView.userTextBookView.checkBinBtnActive();else if(this.isWordNew(e))this.isWordNew(e)&&(yield this.textBookModel.updateUserWord(e,s,t,!0,!1));else{const s={difficulty:t,optional:{correctAnswersChallenge:"0",incorrectAnswersChallenge:"0",correctAnswersSprint:"0",incorrectAnswersSprint:"0",correctSequenceChallenge:"0",correctSequenceSprint:"0"}};yield this.textBookModel.addUserWord(s,e)}this.controlWordBtnOnFetch(e,!1)})),this.makeWordNew=(e,t)=>G(this,void 0,void 0,(function*(){const s=this.textBookView.userTextBookView.onDictPage;yield this.textBookModel.updateUserWord(e,s,t,!1,!0)})),this.isWordNew=e=>JSON.stringify(this.textBookModel.newWords).includes(e),this.isWordDifficult=e=>JSON.stringify(this.textBookModel.difficultWords).includes(e),this.isWordLearned=e=>JSON.stringify(this.textBookModel.learnedWords).includes(e),this.getGamesWordCollection=e=>G(this,void 0,void 0,(function*(){if(!x.currUserSettings.userId)return this.textBookModel.wordsChunk;const t=yield this.textBookModel.getWordsForGames();if(t){const s=t.filter((e=>e.page<=x.currUserSettings.currPage));return 0===x.currUserSettings.currPage?this.textBookModel.mapUserWordsID(s):s.length>20&&e===P.audioChallenge?this.textBookModel.mapUserWordsID(s.slice(-20)):this.textBookModel.mapUserWordsID(s)}throw new Error("collection gathering failed")})),this.textBookModel=new $,this.textBookView=new j(this.textBookModel),this.textBookView.on("pageBtnClicked",(e=>this.changeTextBookPage(e))).on("groupBtnClicked",(e=>this.changeTextBookGroup(e))).on("wordBtnClicked",((e,t)=>this.getWordCardData(e,t))).on("dictBtnClicked",(()=>this.getUserDictWords())).on("addDifficultWordBtnClicked",((e,t)=>this.addUserWord(e,t))).on("deleteDifficultWordBtnClicked",((e,t)=>this.makeWordNew(e,t))).on("addLearnedWordBtnClicked",((e,t)=>this.addUserWord(e,t))).on("deleteLearnedWordBtnClicked",((e,t)=>this.makeWordNew(e,t)))}controlWordBtnOnFetch(e,t){document.getElementById(e).style.pointerEvents=t?"none":"auto"}},Se=new class{constructor(){this.startAudioChallengeGame=()=>ge(this,void 0,void 0,(function*(){this.gamesEntranceView.renderPreloader(),m.startFromTextbook=!1;const e=new X,t=new Y(e),s=new q(e,t);yield e.getStatistics(),yield s.getWordsList(),t.drawAudioChallengeGame()})),this.startAudioChallengeFromTextBook=e=>ge(this,void 0,void 0,(function*(){this.gamesEntranceView.renderPreloader(),m.startFromTextbook=!0;const t=new X,s=new Y(t),n=new q(t,s);t.getWordsListFromTextbook(e),e.length<m.wordsPerPage&&(yield n.getNewWordData(m.wordsPerPage-e.length)),yield t.getStatistics(),s.drawAudioChallengeGame()})),this.startSprintGame=()=>ge(this,void 0,void 0,(function*(){this.gamesEntranceView.renderPreloader(),w.startFromTextbook=!1;const e=new ne,t=new ue(e);new pe(e,t),x.currUserSettings.userId?yield e.getUserWordsForSprint():yield e.getDefaultWordsForSprint(),yield e.getStatistics(),t.sprintViewUtils.buildBeReadyHTML()})),this.startSprintGameFromTextBook=e=>ge(this,void 0,void 0,(function*(){this.gamesEntranceView.renderPreloader(),w.startFromTextbook=!0;const t=new ne,s=new ue(t);new pe(t,s),t.getWordsListFromTextbook(e),yield t.getPageChunk(),yield t.getStatistics(),s.sprintViewUtils.buildBeReadyHTML()})),this.addGameLevel=e=>{this.gamesEntranceModel.addGameLevel(e)},this.gamesEntranceModel=new te,this.gamesEntranceView=new ee(this.gamesEntranceModel),this.gamesEntranceView.on("sprintGameStarted",(()=>this.startSprintGame())).on("audioChallengeGameStarted",(()=>this.startAudioChallengeGame())).on("gameOptionClicked",(e=>this.addGameLevel(e)))}},Be=new class{constructor(){this.render=()=>{const e=d("main__wrapper"),t=(new H).render();e.innerHTML="",e.append(t)},this.mount=()=>{const e=d("main__wrapper"),t=document.getElementsByClassName("games-link__audiochallenge")[0],s=document.getElementsByClassName("games-link__sprint")[0];t.addEventListener("click",(()=>{e.innerHTML="",y.push("/audiochallenge")})),s.addEventListener("click",(()=>{e.innerHTML="",y.push("/sprint")}))}}},Ae=new class{constructor(){this.init=()=>{return e=this,t=void 0,n=function*(){if(x.isAuth){yield this.model.mount();const{dayData:e,allDaysData:t}=this.model.state;this.view.render(e),new _e.kL(d("newWordsChart"),ve(we("Количество новых слов",t.newWords,t.labels))),new _e.kL(d("learnedWordsChart"),ve(we("Количество изученных слов",t.learnedWords,t.labels)))}else this.view.render()},new((s=void 0)||(s=Promise))((function(r,i){function a(e){try{d(n.next(e))}catch(e){i(e)}}function o(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,o)}d((n=n.apply(e,t||[])).next())}));var e,t,s,n},this.model=new class{constructor(){this.mount=()=>me(this,void 0,void 0,(function*(){x.isAuth&&(yield this.getStatData())})),this.getStatData=()=>me(this,void 0,void 0,(function*(){const{userId:e,token:t}=x.currUserSettings,s=yield Q(e,t);if(s){const e=s.optional,t=l(),n=Object.keys(e);t in e&&(this.state.dayData=e[t]);const r=[],i=[];let a=0;if(0!==n.length){for(const t in e)r.push(e[t].audiochallenge.newWordsPerDay+e[t].sprint.newWordsPerDay),a+=e[t].audiochallenge.learnedWordsPerDay+e[t].sprint.learnedWordsPerDay,i.push(a);this.state.allDaysData={labels:n,learnedWords:i,newWords:r}}}})),this.state=_}},this.view=new fe}},Le=d("main__wrapper");new class{constructor(e){this.render=e=>{return t=this,s=void 0,r=function*(){yield this.router.resolve(e.pathname).catch((()=>{}))},new((n=void 0)||(n=Promise))((function(e,i){function a(e){try{d(r.next(e))}catch(e){i(e)}}function o(e){try{d(r.throw(e))}catch(e){i(e)}}function d(t){var s;t.done?e(t.value):(s=t.value,s instanceof n?s:new n((function(e){e(s)}))).then(a,o)}d((r=r.apply(t,s||[])).next())}));var t,s,n,r},this.setRouter=()=>{y.listen((({location:e})=>{this.render(e).catch((e=>console.error(e)))}))},this.routes=e,this.router=new T.Z(e),this.setRouter()}}([{path:"",action:()=>{xe.view.renderPreloader(),xe.view.renderMainTemplate(),document.title=`Главная ${We}`}},{path:"/textbook",action:()=>{xe.view.renderPreloader("textbook"),Ce.init().catch((e=>console.error(e))),document.title=`Учебник ${We}`}},{path:"/games",action:()=>{xe.view.renderPreloader(),Be.render(),Be.mount(),document.title=`Миниигры ${We}`}},{path:"/audiochallenge",action:()=>{xe.view.renderPreloader(),Le.innerHTML="",Le.append(Se.gamesEntranceView.buildAudioChallengeHTML()),document.title=`Игра Аудиовызов ${We}`}},{path:"/audiochallenge-pages",action:()=>ke(void 0,void 0,void 0,(function*(){xe.view.renderPreloader();const e=yield Ce.getGamesWordCollection(P.audioChallenge);Se.startAudioChallengeFromTextBook(e).catch((e=>console.error(e))),document.title=`Игра Аудиовызов ${We}`}))},{path:"/sprint",action:()=>{xe.view.renderPreloader(),Le.innerHTML="",Le.append(Se.gamesEntranceView.buildSprintHTML()),document.title=`Игра Спринт ${We}`}},{path:"/sprint-pages",action:()=>ke(void 0,void 0,void 0,(function*(){xe.view.renderPreloader();const e=yield Ce.getGamesWordCollection(P.sprint);yield Se.startSprintGameFromTextBook(e),document.title=`Игра Спринт ${We}`}))},{path:"/stat",action:()=>{xe.view.renderPreloader(),Ae.init().catch((e=>console.error(e))),document.title=`Статистика ${We}`}},{path:"/login",action:()=>{xe.view.renderPreloader(),ye.view.renderLoginForm(),document.title=`Авторизация ${We}`}},{path:"/logout",action:()=>{x.setLSData(g,p),x.isAuth=!1,window.location.replace("/"),new C(d("header")).render(),document.title=`Выход ${We}`}},{path:"/auth",action:()=>{ye.view.renderRegForm(),document.title=`Регистрация ${We}`}}]).render(y.location).catch((e=>console.error(e)))}},s={};function n(e){var r=s[e];if(void 0!==r)return r.exports;var i=s[e]={exports:{}};return t[e](i,i.exports,n),i.exports}n.m=t,e=[],n.O=(t,s,r,i)=>{if(!s){var a=1/0;for(l=0;l<e.length;l++){for(var[s,r,i]=e[l],o=!0,d=0;d<s.length;d++)(!1&i||a>=i)&&Object.keys(n.O).every((e=>n.O[e](s[d])))?s.splice(d--,1):(o=!1,i<a&&(a=i));if(o){e.splice(l--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[s,r,i]},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,s)=>{var r,i,[a,o,d]=s,c=0;if(a.some((t=>0!==e[t]))){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(d)var l=d(n)}for(t&&t(s);c<a.length;c++)i=a[c],n.o(e,i)&&e[i]&&e[i][0](),e[a[c]]=0;return n.O(l)},s=self.webpackChunkstandart=self.webpackChunkstandart||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var r=n.O(void 0,[102],(()=>n(588)));r=n.O(r)})();