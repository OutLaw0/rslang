/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";const t=(t,n)=>{const e=document.createElement(t);return n&&e.classList.add(n),e},n=t=>document.querySelector(t);function e(){return e=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},e.apply(this,arguments)}var r;!function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(r||(r={}));var a="beforeunload";function i(t){t.preventDefault(),t.returnValue=""}function o(){var t=[];return{get length(){return t.length},push:function(n){return t.push(n),function(){t=t.filter((function(t){return t!==n}))}},call:function(n){t.forEach((function(t){return t&&t(n)}))}}}const s=function(t){void 0===t&&(t={});var n=t.window,s=void 0===n?document.defaultView:n,c=s.history;function u(){var t=s.location,n=t.pathname,e=t.search,r=t.hash,a=c.state||{};return[a.idx,{pathname:n,search:e,hash:r,state:a.usr||null,key:a.key||"default"}]}var h=null;s.addEventListener("popstate",(function(){if(h)m.call(h),h=null;else{var t=r.Pop,n=u(),e=n[0],a=n[1];if(m.length){if(null!=e){var i=p-e;i&&(h={action:t,location:a,retry:function(){E(-1*i)}},E(i))}}else w(t)}}));var l=r.Pop,f=u(),p=f[0],d=f[1],v=o(),m=o();function g(t){return"string"==typeof t?t:(e=(n=t).pathname,r=void 0===e?"/":e,a=n.search,i=void 0===a?"":a,o=n.hash,s=void 0===o?"":o,i&&"?"!==i&&(r+="?"===i.charAt(0)?i:"?"+i),s&&"#"!==s&&(r+="#"===s.charAt(0)?s:"#"+s),r);var n,e,r,a,i,o,s}function b(t,n){return void 0===n&&(n=null),e({pathname:d.pathname,hash:"",search:""},"string"==typeof t?function(t){var n={};if(t){var e=t.indexOf("#");e>=0&&(n.hash=t.substr(e),t=t.substr(0,e));var r=t.indexOf("?");r>=0&&(n.search=t.substr(r),t=t.substr(0,r)),t&&(n.pathname=t)}return n}(t):t,{state:n,key:Math.random().toString(36).substr(2,8)})}function x(t,n){return[{usr:t.state,key:t.key,idx:n},g(t)]}function y(t,n,e){return!m.length||(m.call({action:t,location:n,retry:e}),!1)}function w(t){l=t;var n=u();p=n[0],d=n[1],v.call({action:l,location:d})}function E(t){c.go(t)}return null==p&&(p=0,c.replaceState(e({},c.state,{idx:p}),"")),{get action(){return l},get location(){return d},createHref:g,push:function t(n,e){var a=r.Push,i=b(n,e);if(y(a,i,(function(){t(n,e)}))){var o=x(i,p+1),u=o[0],h=o[1];try{c.pushState(u,"",h)}catch(t){s.location.assign(h)}w(a)}},replace:function t(n,e){var a=r.Replace,i=b(n,e);if(y(a,i,(function(){t(n,e)}))){var o=x(i,p),s=o[0],u=o[1];c.replaceState(s,"",u),w(a)}},go:E,back:function(){E(-1)},forward:function(){E(1)},listen:function(t){return v.push(t)},block:function(t){var n=m.push(t);return 1===m.length&&s.addEventListener(a,i),function(){n(),m.length||s.removeEventListener(a,i)}}}}();class c{constructor(){this.render=()=>{n(".nav").append(this.nav)},this.bind=()=>{this.nav.addEventListener("click",(t=>{if(t.preventDefault(),"A"===t.target.tagName){const n=t.target.pathname;s.push(n)}}))},this.nav=t("ul","nav__list"),this.nav.innerHTML='\n<li>\n<a href="/" class="btn" data-btn="main"> Главная </a>\n</li>\n<li>\n  <a href="/textbook" class="btn" data-btn="textbook">Учебник</a>\n</li>\n<li>\n  <a href="/games" class="btn" data-btn="games"> Игры </a>\n</li>\n<li>\n  <a href="/stat" class="btn" data-btn="stat"> Статистика </a>\n</li>\n<li>\n  <a href="/login" class="btn inactive" data-btn="login"> Login </a>\n</li>\n',this.bind()}}function u(t,n){var e=[];return function(t,n,e){void 0===e&&(e={});var r=e.decode,a=void 0===r?function(t){return t}:r;return function(e){var r=t.exec(e);if(!r)return!1;for(var i=r[0],o=r.index,s=Object.create(null),c=function(t){if(void 0===r[t])return"continue";var e=n[t-1];"*"===e.modifier||"+"===e.modifier?s[e.name]=r[t].split(e.prefix+e.suffix).map((function(t){return a(t,e)})):s[e.name]=a(r[t],e)},u=1;u<r.length;u++)c(u);return{path:i,index:o,params:s}}}(p(t,e,n),e,n)}function h(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function l(t){return t&&t.sensitive?"":"i"}function f(t,n,e){return function(t,n,e){void 0===e&&(e={});for(var r=e.strict,a=void 0!==r&&r,i=e.start,o=void 0===i||i,s=e.end,c=void 0===s||s,u=e.encode,f=void 0===u?function(t){return t}:u,p=e.delimiter,d=void 0===p?"/#?":p,v=e.endsWith,m="[".concat(h(void 0===v?"":v),"]|$"),g="[".concat(h(d),"]"),b=o?"^":"",x=0,y=t;x<y.length;x++){var w=y[x];if("string"==typeof w)b+=h(f(w));else{var E=h(f(w.prefix)),A=h(f(w.suffix));if(w.pattern)if(n&&n.push(w),E||A)if("+"===w.modifier||"*"===w.modifier){var P="*"===w.modifier?"?":"";b+="(?:".concat(E,"((?:").concat(w.pattern,")(?:").concat(A).concat(E,"(?:").concat(w.pattern,"))*)").concat(A,")").concat(P)}else b+="(?:".concat(E,"(").concat(w.pattern,")").concat(A,")").concat(w.modifier);else"+"===w.modifier||"*"===w.modifier?b+="((?:".concat(w.pattern,")").concat(w.modifier,")"):b+="(".concat(w.pattern,")").concat(w.modifier);else b+="(?:".concat(E).concat(A,")").concat(w.modifier)}}if(c)a||(b+="".concat(g,"?")),b+=e.endsWith?"(?=".concat(m,")"):"$";else{var R=t[t.length-1],T="string"==typeof R?g.indexOf(R[R.length-1])>-1:void 0===R;a||(b+="(?:".concat(g,"(?=").concat(m,"))?")),T||(b+="(?=".concat(g,"|").concat(m,")"))}return new RegExp(b,l(e))}(function(t,n){void 0===n&&(n={});for(var e=function(t){for(var n=[],e=0;e<t.length;){var r=t[e];if("*"!==r&&"+"!==r&&"?"!==r)if("\\"!==r)if("{"!==r)if("}"!==r)if(":"!==r)if("("!==r)n.push({type:"CHAR",index:e,value:t[e++]});else{var a=1,i="";if("?"===t[s=e+1])throw new TypeError('Pattern cannot start with "?" at '.concat(s));for(;s<t.length;)if("\\"!==t[s]){if(")"===t[s]){if(0==--a){s++;break}}else if("("===t[s]&&(a++,"?"!==t[s+1]))throw new TypeError("Capturing groups are not allowed at ".concat(s));i+=t[s++]}else i+=t[s++]+t[s++];if(a)throw new TypeError("Unbalanced pattern at ".concat(e));if(!i)throw new TypeError("Missing pattern at ".concat(e));n.push({type:"PATTERN",index:e,value:i}),e=s}else{for(var o="",s=e+1;s<t.length;){var c=t.charCodeAt(s);if(!(c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||95===c))break;o+=t[s++]}if(!o)throw new TypeError("Missing parameter name at ".concat(e));n.push({type:"NAME",index:e,value:o}),e=s}else n.push({type:"CLOSE",index:e,value:t[e++]});else n.push({type:"OPEN",index:e,value:t[e++]});else n.push({type:"ESCAPED_CHAR",index:e++,value:t[e++]});else n.push({type:"MODIFIER",index:e,value:t[e++]})}return n.push({type:"END",index:e,value:""}),n}(t),r=n.prefixes,a=void 0===r?"./":r,i="[^".concat(h(n.delimiter||"/#?"),"]+?"),o=[],s=0,c=0,u="",l=function(t){if(c<e.length&&e[c].type===t)return e[c++].value},f=function(t){var n=l(t);if(void 0!==n)return n;var r=e[c],a=r.type,i=r.index;throw new TypeError("Unexpected ".concat(a," at ").concat(i,", expected ").concat(t))},p=function(){for(var t,n="";t=l("CHAR")||l("ESCAPED_CHAR");)n+=t;return n};c<e.length;){var d=l("CHAR"),v=l("NAME"),m=l("PATTERN");if(v||m){var g=d||"";-1===a.indexOf(g)&&(u+=g,g=""),u&&(o.push(u),u=""),o.push({name:v||s++,prefix:g,suffix:"",pattern:m||i,modifier:l("MODIFIER")||""})}else{var b=d||l("ESCAPED_CHAR");if(b)u+=b;else if(u&&(o.push(u),u=""),l("OPEN")){g=p();var x=l("NAME")||"",y=l("PATTERN")||"",w=p();f("CLOSE"),o.push({name:x||(y?s++:""),pattern:x&&!y?i:y,prefix:g,suffix:w,modifier:l("MODIFIER")||""})}else f("END")}}return o}(t,e),n,e)}function p(t,n,e){return t instanceof RegExp?function(t,n){if(!n)return t;for(var e=/\((?:\?<(.*?)>)?(?!\?)/g,r=0,a=e.exec(t.source);a;)n.push({name:a[1]||r++,prefix:"",suffix:"",modifier:"",pattern:""}),a=e.exec(t.source);return t}(t,n):Array.isArray(t)?function(t,n,e){var r=t.map((function(t){return p(t,n,e).source}));return new RegExp("(?:".concat(r.join("|"),")"),l(e))}(t,n,e):f(t,n,e)}function d(t){try{return decodeURIComponent(t)}catch(n){return t}}function v(t,n,e,r,a){var i,o,s=0;return{next:function(c){if(t===c)return{done:!0,value:!1};if(!i){var h=t,l=!h.children;if(h.match||(h.match=u(h.path||"",Object.assign({end:l},e))),i=h.match(r)){var f=i.path;return i.path=l||"/"!==f.charAt(f.length-1)?f:f.substr(1),i.params=Object.assign({},a,i.params),{done:!1,value:{route:t,baseUrl:n,path:i.path,params:i.params}}}}if(i&&t.children)for(;s<t.children.length;){if(!o){var p=t.children[s];p.parent=t,o=v(p,n+i.path,e,r.substr(i.path.length),i.params)}var d=o.next(c);if(!d.done)return{done:!1,value:d.value};o=null,s++}return{done:!0,value:!1}}}}function m(t,n){if("function"==typeof t.route.action)return t.route.action(t,n)}const g=function(){function t(t,n){if(!t||"object"!=typeof t)throw new TypeError("Invalid routes");this.options=Object.assign({decode:d},n),this.baseUrl=this.options.baseUrl||"",this.root=Array.isArray(t)?{path:"",children:t,parent:null}:t,this.root.parent=null}return t.prototype.resolve=function(t){var n,e,r=this,a=Object.assign({router:this},this.options.context,"string"==typeof t?{pathname:t}:t),i=v(this.root,this.baseUrl,this.options,a.pathname.substr(this.baseUrl.length)),o=this.options.resolveRoute||m,s=a;function c(t,r,u){void 0===r&&(r=!n.done&&n.value.route);var h=null===u&&!n.done&&n.value.route;if(n=e||i.next(h),e=null,!t&&(n.done||!function(t,n){for(var e=n;e;)if((e=e.parent)===t)return!0;return!1}(r,n.value.route)))return e=n,Promise.resolve(null);if(n.done){var l=new Error("Route not found");return l.status=404,Promise.reject(l)}return s=Object.assign({},a,n.value),Promise.resolve(o(s,n.value.params)).then((function(n){return null!=n?n:c(t,r,n)}))}return a.next=c,Promise.resolve().then((function(){return c(!0,r.root)})).catch((function(t){if(r.options.errorHandler)return r.options.errorHandler(t,s);throw t}))},t}();const b=new class{constructor(){this.init=()=>{this.view.render(),this.mountListeners()},this.mountListeners=()=>{},this.model=new class{constructor(){this.state={}}},this.view=new class{constructor(){this.render=()=>{this.header.insertAdjacentHTML("afterbegin",'\n<div class="wrapper header__wrapper">\n<h1>RS Lang</h1>\n<nav class="nav">\n</nav>\n</div>\n'),this.main.append(this.mainWrapper),this.footer.insertAdjacentHTML("afterbegin",'<div class="wrapper footer__wrapper">\n<div class="footer__copyright">\n    <span class="copyright">©</span>\n    <span class="year">2022</span>\n</div>\n<div class="footer__info">\n    <a class="github-username" href="https://github.com/ddd-fx" target="_blank" rel="noopener noreferrer">Дмитрий</a>\n    <a class="github-username" href="https://github.com/orla90" target="_blank" rel="noopener noreferrer">Ольга</a>\n    <a class="github-username" href="https://github.com/OutLaw0" target="_blank" rel="noopener noreferrer">Валентин</a>\n</div>\n<a href="https://rs.school/js/" class="rss" target="_blank"> Rolling Scopes School </a>\n</div>'),document.body.append(this.header,this.main,this.footer),(new c).render()},this.renderMain=()=>{this.mainWrapper.innerHTML="",this.mainWrapper.insertAdjacentHTML("afterbegin",'\n<div class="img-x20">\n    <img src="./assets/whale.svg" alt="">\n  </div>\n')},this.header=t("header","header"),this.main=t("main"),this.mainWrapper=t("div","wrapper"),this.footer=t("footer")}}}};b.init();const x=n("main .wrapper");new class{constructor(t){this.render=t=>{return n=this,e=void 0,a=function*(){yield this.router.resolve(t.pathname).catch((()=>{}))},new((r=void 0)||(r=Promise))((function(t,i){function o(t){try{c(a.next(t))}catch(t){i(t)}}function s(t){try{c(a.throw(t))}catch(t){i(t)}}function c(n){var e;n.done?t(n.value):(e=n.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,s)}c((a=a.apply(n,e||[])).next())}));var n,e,r,a},this.setRouter=()=>{s.listen((({action:t,location:n})=>{this.render(n)}))},this.routes=t,this.router=new g(t),this.setRouter(),this.render(s.location)}}([{path:"",action:()=>{b.view.renderMain()}},{path:"/textbook",action:()=>{(new class{constructor(){this.render=()=>{const t=n("main .wrapper"),e=this.renderTextbook();t.innerHTML="",t.insertAdjacentHTML("afterbegin",e)},this.renderTextbook=()=>'\n<div class="img-x15">\n    <img src="./assets/skat.svg" alt="">\n  </div>\n'}}).render()}},{path:"/games",action:()=>{x.innerHTML='\n      <h1>Page Games</h1>\n      <div class="img-x5">\n      <img src="./assets/bubbles.svg" alt="">\n    </div>\n  '}},{path:"/stat",action:()=>{x.innerHTML="<h1>Page Statistics</h1>"}},{path:"/login",action:()=>{x.innerHTML="<h1>Not Found</h1>"}}])})();